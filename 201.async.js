!(function(){var yd=Object.defineProperty,Ed=Object.defineProperties;var Td=Object.getOwnPropertyDescriptors;var Ji=Object.getOwnPropertySymbols;var Da=Object.prototype.hasOwnProperty,Ia=Object.prototype.propertyIsEnumerable;var an=Math.pow,Ma=(J,j,u)=>j in J?yd(J,j,{enumerable:!0,configurable:!0,writable:!0,value:u}):J[j]=u,Ge=(J,j)=>{for(var u in j||(j={}))Da.call(j,u)&&Ma(J,u,j[u]);if(Ji)for(var u of Ji(j))Ia.call(j,u)&&Ma(J,u,j[u]);return J},Hr=(J,j)=>Ed(J,Td(j));var Ba=(J,j)=>{var u={};for(var v in J)Da.call(J,v)&&j.indexOf(v)<0&&(u[v]=J[v]);if(J!=null&&Ji)for(var v of Ji(J))j.indexOf(v)<0&&Ia.call(J,v)&&(u[v]=J[v]);return u};var vo=(J,j,u)=>new Promise((v,V)=>{var C=B=>{try{m(u.next(B))}catch(M){V(M)}},L=B=>{try{m(u.throw(B))}catch(M){V(M)}},m=B=>B.done?v(B.value):Promise.resolve(B.value).then(C,L);m((u=u.apply(J,j)).next())});(self.webpackChunk=self.webpackChunk||[]).push([[201],{80828:function(J,j,u){"use strict";u.d(j,{Z:function(){return V}});var v=u(99973);class V extends v.mY{constructor(L,m){super(L),this.attributeKey=m}refresh(){const L=this.editor.model,m=L.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=L.schema.checkAttributeInSelection(m.selection,this.attributeKey)}execute(L={}){const m=this.editor.model,M=m.document.selection,D=L.forceValue===void 0?!this.value:L.forceValue;m.change(O=>{if(M.isCollapsed)D?O.setSelectionAttribute(this.attributeKey,!0):O.removeSelectionAttribute(this.attributeKey);else{const W=m.schema.getValidRanges(M.getRanges(),this.attributeKey);for(const z of W)D?O.setAttribute(this.attributeKey,D,z):O.removeAttribute(this.attributeKey,z)}})}_getValueFromFirstAllowedNode(){const L=this.editor.model,m=L.schema,B=L.document.selection;if(B.isCollapsed)return B.hasAttribute(this.attributeKey);for(const M of B.getRanges())for(const D of M.getItems())if(m.checkAttribute(D,this.attributeKey))return D.hasAttribute(this.attributeKey);return!1}}},70449:function(J,j,u){"use strict";u.d(j,{Z:function(){return D}});var v=u(99973),V=u(80828);const C="bold";class L extends v.Sy{static get pluginName(){return"BoldEditing"}init(){const W=this.editor;W.model.schema.extend("$text",{allowAttributes:C}),W.model.schema.setAttributeProperties(C,{isFormatting:!0,copyOnEnter:!0}),W.conversion.attributeToElement({model:C,view:"strong",upcastAlso:["b",z=>{const q=z.getStyle("font-weight");return q&&(q=="bold"||Number(q)>=600)?{name:!0,styles:["font-weight"]}:null}]}),W.commands.add(C,new V.Z(W,C)),W.keystrokes.set("CTRL+B",C)}}var m=u(99314);const B="bold";class M extends v.Sy{static get pluginName(){return"BoldUI"}init(){const W=this.editor,z=W.t;W.ui.componentFactory.add(B,q=>{const te=W.commands.get(B),de=new m.r5(q);return de.set({label:z("Bold"),icon:v.ci.bold,keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),de.bind("isOn","isEnabled").to(te,"value","isEnabled"),this.listenTo(de,"execute",()=>{W.execute(B),W.editing.view.focus()}),de})}}class D extends v.Sy{static get requires(){return[L,M]}static get pluginName(){return"Bold"}}},11437:function(J,j,u){"use strict";u.d(j,{Z:function(){return O}});var v=u(99973),V=u(80828);const C="italic";class L extends v.Sy{static get pluginName(){return"ItalicEditing"}init(){const z=this.editor;z.model.schema.extend("$text",{allowAttributes:C}),z.model.schema.setAttributeProperties(C,{isFormatting:!0,copyOnEnter:!0}),z.conversion.attributeToElement({model:C,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),z.commands.add(C,new V.Z(z,C)),z.keystrokes.set("CTRL+I",C)}}var m=u(99314),B='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';const M="italic";class D extends v.Sy{static get pluginName(){return"ItalicUI"}init(){const z=this.editor,q=z.t;z.ui.componentFactory.add(M,te=>{const de=z.commands.get(M),he=new m.r5(te);return he.set({label:q("Italic"),icon:B,keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),he.bind("isOn","isEnabled").to(de,"value","isEnabled"),this.listenTo(he,"execute",()=>{z.execute(M),z.editing.view.focus()}),he})}}class O extends v.Sy{static get requires(){return[L,D]}static get pluginName(){return"Italic"}}},95770:function(J,j,u){"use strict";u.d(j,{mY:function(){return L},_y:function(){return D},W9:function(){return T},ML:function(){return te},xK:function(){return Te},Sy:function(){return V},P$:function(){return he},icons:function(){return Sr}});var v=u(5820);class V extends(0,v.Re)(){constructor(oe){super(),this._disableStack=new Set,this.editor=oe,this.set("isEnabled",!0)}forceDisabled(oe){this._disableStack.add(oe),this._disableStack.size==1&&(this.on("set:isEnabled",C,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(oe){this._disableStack.delete(oe),this._disableStack.size==0&&(this.off("set:isEnabled",C),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function C(Xe){Xe.return=!1,Xe.stop()}class L extends(0,v.Re)(){constructor(oe){super(),this.editor=oe,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(oe,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",be=>{if(!this.affectsData)return;const De=oe.model.document.selection,vt=!(De.getFirstPosition().root.rootName=="$graveyard")&&oe.model.canEditAt(De);(oe.isReadOnly||this._isEnabledBasedOnSelection&&!vt)&&(be.return=!1,be.stop())},{priority:"highest"}),this.on("execute",be=>{this.isEnabled||be.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(oe){this._affectsData=oe}refresh(){this.isEnabled=!0}forceDisabled(oe){this._disableStack.add(oe),this._disableStack.size==1&&(this.on("set:isEnabled",m,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(oe){this._disableStack.delete(oe),this._disableStack.size==0&&(this.off("set:isEnabled",m),this.refresh())}execute(...oe){}destroy(){this.stopListening()}}function m(Xe){Xe.return=!1,Xe.stop()}class B extends null{constructor(){super(...arguments),this._childCommandsDefinitions=[]}refresh(){}execute(...oe){const be=this._getFirstEnabledCommand();return!!be&&be.execute(oe)}registerChildCommand(oe,be={}){insertToPriorityArray(this._childCommandsDefinitions,{command:oe,priority:be.priority||"normal"}),oe.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const oe=this._childCommandsDefinitions.find(({command:be})=>be.isEnabled);return oe&&oe.command}}class M extends(0,v.ln)(){constructor(oe,be=[],De=[]){super(),this._plugins=new Map,this._context=oe,this._availablePlugins=new Map;for(const nt of be)nt.pluginName&&this._availablePlugins.set(nt.pluginName,nt);this._contextPlugins=new Map;for(const[nt,vt]of De)this._contextPlugins.set(nt,vt),this._contextPlugins.set(vt,nt),nt.pluginName&&this._availablePlugins.set(nt.pluginName,nt)}*[Symbol.iterator](){for(const oe of this._plugins)typeof oe[0]=="function"&&(yield oe)}get(oe){const be=this._plugins.get(oe);if(!be){let De=oe;throw typeof oe=="function"&&(De=oe.pluginName||oe.name),new v.Bb("plugincollection-plugin-not-loaded",this._context,{plugin:De})}return be}has(oe){return this._plugins.has(oe)}init(oe,be=[],De=[]){const nt=this,vt=this._context;yt(oe),hr(oe);const yn=oe.filter(et=>!gn(et,be)),en=[...pn(yn)];oo(en,De);const ln=Kt(en);return nr(ln,"init").then(()=>nr(ln,"afterInit")).then(()=>ln);function dn(et){return typeof et=="function"}function Or(et){return dn(et)&&!!et.isContextPlugin}function gn(et,ht){return ht.some(Ue=>Ue===et||_n(et)===Ue||_n(Ue)===et)}function _n(et){return dn(et)?et.pluginName||et.name:et}function yt(et,ht=new Set){et.forEach(Ue=>{dn(Ue)&&(ht.has(Ue)||(ht.add(Ue),Ue.pluginName&&!nt._availablePlugins.has(Ue.pluginName)&&nt._availablePlugins.set(Ue.pluginName,Ue),Ue.requires&&yt(Ue.requires,ht)))})}function pn(et,ht=new Set){return et.map(Ue=>dn(Ue)?Ue:nt._availablePlugins.get(Ue)).reduce((Ue,gt)=>ht.has(gt)?Ue:(ht.add(gt),gt.requires&&(hr(gt.requires,gt),pn(gt.requires,ht).forEach(Rt=>Ue.add(Rt))),Ue.add(gt)),new Set)}function hr(et,ht=null){et.map(Ue=>dn(Ue)?Ue:nt._availablePlugins.get(Ue)||Ue).forEach(Ue=>{Rr(Ue,ht),tn(Ue,ht),On(Ue,ht)})}function Rr(et,ht){if(!dn(et))throw ht?new v.Bb("plugincollection-soft-required",vt,{missingPlugin:et,requiredBy:_n(ht)}):new v.Bb("plugincollection-plugin-not-found",vt,{plugin:et})}function tn(et,ht){if(Or(ht)&&!Or(et))throw new v.Bb("plugincollection-context-required",vt,{plugin:_n(et),requiredBy:_n(ht)})}function On(et,ht){if(ht&&gn(et,be))throw new v.Bb("plugincollection-required",vt,{plugin:_n(et),requiredBy:_n(ht)})}function Kt(et){return et.map(ht=>{let Ue=nt._contextPlugins.get(ht);return Ue=Ue||new ht(vt),nt._add(ht,Ue),Ue})}function nr(et,ht){return et.reduce((Ue,gt)=>!gt[ht]||nt._contextPlugins.has(gt)?Ue:Ue.then(gt[ht].bind(gt)),Promise.resolve())}function oo(et,ht){for(const Ue of ht){if(typeof Ue!="function")throw new v.Bb("plugincollection-replace-plugin-invalid-type",null,{pluginItem:Ue});const gt=Ue.pluginName;if(!gt)throw new v.Bb("plugincollection-replace-plugin-missing-name",null,{pluginItem:Ue});if(Ue.requires&&Ue.requires.length)throw new v.Bb("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:gt});const Rt=nt._availablePlugins.get(gt);if(!Rt)throw new v.Bb("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:gt});const $t=et.indexOf(Rt);if($t===-1){if(nt._contextPlugins.has(Rt))return;throw new v.Bb("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:gt})}if(Rt.requires&&Rt.requires.length)throw new v.Bb("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:gt});et.splice($t,1,Ue),nt._availablePlugins.set(gt,Ue)}}}destroy(){const oe=[];for(const[,be]of this)typeof be.destroy=="function"&&!this._contextPlugins.has(be)&&oe.push(be.destroy());return Promise.all(oe)}_add(oe,be){this._plugins.set(oe,be);const De=oe.pluginName;if(De){if(this._plugins.has(De))throw new v.Bb("plugincollection-plugin-name-conflict",null,{pluginName:De,plugin1:this._plugins.get(De).constructor,plugin2:oe});this._plugins.set(De,be)}}}class D{constructor(oe){this._contextOwner=null,this.config=new v.De(oe,this.constructor.defaultConfig);const be=this.constructor.builtinPlugins;this.config.define("plugins",be),this.plugins=new M(this,be);const De=this.config.get("language")||{};this.locale=new v.go({uiLanguage:typeof De=="string"?De:De.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new v.FE}initPlugins(){const oe=this.config.get("plugins")||[],be=this.config.get("substitutePlugins")||[];for(const De of oe.concat(be)){if(typeof De!="function")throw new v.Bb("context-initplugins-constructor-only",null,{Plugin:De});if(De.isContextPlugin!==!0)throw new v.Bb("context-initplugins-invalid-plugin",null,{Plugin:De})}return this.plugins.init(oe,[],be)}destroy(){return Promise.all(Array.from(this.editors,oe=>oe.destroy())).then(()=>this.plugins.destroy())}_addEditor(oe,be){if(this._contextOwner)throw new v.Bb("context-addeditor-private-context");this.editors.add(oe),be&&(this._contextOwner=oe)}_removeEditor(oe){return this.editors.has(oe)&&this.editors.remove(oe),this._contextOwner===oe?this.destroy():Promise.resolve()}_getEditorConfig(){const oe={};for(const be of this.config.names())["plugins","removePlugins","extraPlugins"].includes(be)||(oe[be]=this.config.get(be));return oe}static create(oe){return new Promise(be=>{const De=new this(oe);be(De.initPlugins().then(()=>De))})}}class O extends(0,v.Re)(){constructor(oe){super(),this.context=oe}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}var W=u(21494);class z{constructor(){this._commands=new Map}add(oe,be){this._commands.set(oe,be)}get(oe){return this._commands.get(oe)}execute(oe,...be){const De=this.get(oe);if(!De)throw new v.Bb("commandcollection-command-not-found",this,{commandName:oe});return De.execute(...be)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const oe of this.commands())oe.destroy()}}class q extends v.VD{constructor(oe){super(),this.editor=oe}set(oe,be,De={}){if(typeof be=="string"){const nt=be;be=(vt,yn)=>{this.editor.execute(nt),yn()}}super.set(oe,be,De)}}class te extends(0,v.Re)(){constructor(oe={}){super();const be=this.constructor,De=oe.language||be.defaultConfig&&be.defaultConfig.language;this._context=oe.context||new D({language:De}),this._context._addEditor(this,!oe.context);const nt=Array.from(be.builtinPlugins||[]);this.config=new v.De(oe,be.defaultConfig),this.config.define("plugins",nt),this.config.define(this._context._getEditorConfig()),this.plugins=new M(this,nt,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new z,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new W.Hn,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const vt=new W.A_;this.data=new W.Yc(this.model,vt),this.editing=new W.jH(this.model,vt),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new W.uz([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new q(this),this.keystrokes.listenTo(this.editing.view.document)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(oe){throw new v.Bb("editor-isreadonly-has-no-setter")}enableReadOnlyMode(oe){if(typeof oe!="string"&&typeof oe!="symbol")throw new v.Bb("editor-read-only-lock-id-invalid",null,{lockId:oe});this._readOnlyLocks.has(oe)||(this._readOnlyLocks.add(oe),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(oe){if(typeof oe!="string"&&typeof oe!="symbol")throw new v.Bb("editor-read-only-lock-id-invalid",null,{lockId:oe});this._readOnlyLocks.has(oe)&&(this._readOnlyLocks.delete(oe),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}initPlugins(){const oe=this.config,be=oe.get("plugins"),De=oe.get("removePlugins")||[],nt=oe.get("extraPlugins")||[],vt=oe.get("substitutePlugins")||[];return this.plugins.init(be.concat(nt),De,vt)}destroy(){let oe=Promise.resolve();return this.state=="initializing"&&(oe=new Promise(be=>this.once("ready",be))),oe.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(oe,...be){try{return this.commands.execute(oe,...be)}catch(De){v.Bb.rethrowUnexpectedError(De,this)}}focus(){this.editing.view.focus()}static create(...oe){throw new Error("This is an abstract method.")}}var de=u(88987);function he(Xe){if(!(0,de.Z)(Xe.updateSourceElement))throw new v.Bb("attachtoform-missing-elementapi-interface",Xe);const oe=Xe.sourceElement;if(Ie(oe)&&oe.form){let be;const De=oe.form,nt=()=>Xe.updateSourceElement();(0,de.Z)(De.submit)&&(be=De.submit,De.submit=()=>{nt(),be.apply(De)}),De.addEventListener("submit",nt),Xe.on("destroy",()=>{De.removeEventListener("submit",nt),be&&(De.submit=be)})}}function Ie(Xe){return!!Xe&&Xe.tagName.toLowerCase()==="textarea"}function T(Xe){class oe extends Xe{setData(De){this.data.set(De)}getData(De){return this.data.get(De)}}return oe}{const Xe=T(Object);T.setData=Xe.prototype.setData,T.getData=Xe.prototype.getData}function Te(Xe){class oe extends Xe{updateSourceElement(De=this.data.get()){if(!this.sourceElement)throw new v.Bb("editor-missing-sourceelement",this);const nt=this.config.get("updateSourceElementOnDestroy"),vt=this.sourceElement instanceof HTMLTextAreaElement;if(!nt&&!vt){(0,v.jS)(this.sourceElement,"");return}(0,v.jS)(this.sourceElement,De)}}return oe}Te.updateSourceElement=Te(Object).prototype.updateSourceElement;function Le(Xe,oe){if(oe.ckeditorInstance)throw new CKEditorError("editor-source-element-already-used",Xe);oe.ckeditorInstance=Xe,Xe.once("destroy",()=>{delete oe.ckeditorInstance})}class Pe extends O{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new v.FE({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(oe){if(typeof oe!="string")throw new v.Bb("pendingactions-add-invalid-message",this);const be=new((0,v.Re)());return be.set("message",oe),this._actions.add(be),this.hasAny=!0,be}remove(oe){this._actions.remove(oe),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}var Qe=u(76304),ct='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',Fe=u(49706),Ee='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',Ke=u(92300),mt='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',St='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>',We='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',Re='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',Ne='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',Oe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',Be='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',it='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',ze='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',dt='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',je='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',pt='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',kt='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',Ht='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',Me='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',pe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',G='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',ce='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M13 6H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h11z"/></svg>',fe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M7 10H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h5z"/></svg>',ke='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M10 8H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h8z"/></svg>',_e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',xe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',He='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',ut='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',Ye='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',Yt='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',cn='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',Vt='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',qt='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>';const Sr={bold:Ye,cancel:Qe,caption:ct,check:Fe,cog:Ee,eraser:Ke,image:St,lowVision:mt,importExport:qt,paragraph:Yt,plus:cn,text:Vt,alignBottom:We,alignMiddle:Re,alignTop:Ne,alignLeft:Oe,alignCenter:Be,alignRight:it,alignJustify:ze,objectLeft:Me,objectCenter:je,objectRight:pe,objectFullWidth:kt,objectInline:Ht,objectBlockLeft:dt,objectBlockRight:pt,objectSizeFull:G,objectSizeLarge:ce,objectSizeSmall:fe,objectSizeMedium:ke,pencil:_e,pilcrow:xe,quote:He,threeVerticalDots:ut}},8275:function(J,j,u){"use strict";u.d(j,{Z:function(){return kt}});var v=u(99314),V=u(21494);var C=u(5820);class L extends v.S8{constructor(G,ce){super(G),this.view=ce,this._toolbarConfig=(0,v.iw)(G.config.get("toolbar")),this._elementReplacer=new C.a6,this.listenTo(G.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(G){const ce=this.editor,fe=this.view,ke=ce.editing.view,_e=fe.editable,xe=ke.document.getRoot();_e.name=xe.rootName,fe.render();const He=_e.element;this.setEditableElement(_e.name,He),fe.editable.bind("isFocused").to(this.focusTracker),ke.attachDomRoot(He),G&&this._elementReplacer.replace(G,this.element),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){super.destroy();const G=this.view,ce=this.editor.editing.view;this._elementReplacer.restore(),ce.detachDomRoot(G.editable.name),G.destroy()}_initToolbar(){const G=this.view;G.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),G.stickyPanel.limiterElement=G.element,G.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:ce})=>ce||0),G.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(G.toolbar)}_initPlaceholder(){const G=this.editor,ce=G.editing.view,fe=ce.document.getRoot(),ke=G.sourceElement;let _e;const xe=G.config.get("placeholder");xe&&(_e=typeof xe=="string"?xe:xe[this.view.editable.name]),!_e&&ke&&ke.tagName.toLowerCase()==="textarea"&&(_e=ke.getAttribute("placeholder")),_e&&(fe.placeholder=_e),(0,V.ID)({view:ce,element:fe,isDirectHost:!1,keepOnFocus:!0})}_handleScrollToTheSelectionWithStickyPanel(G,ce,fe){const ke=this.view.stickyPanel;if(ke.isSticky){const _e=new C.UL(ke.element).height;ce.viewportOffset.top+=_e}else{const _e=()=>{this.editor.editing.view.scrollToTheSelection(fe)};this.listenTo(ke,"change:isSticky",_e),setTimeout(()=>{this.stopListening(ke,"change:isSticky",_e)},20)}}}var m=u(1062),B=u.n(m),M=u(60552),D=u.n(M),O=u(33566),W=u.n(O),z=u(84107),q=u.n(z),te=u(24911),de=u.n(te),he=u(63227),Ie=u.n(he),T=u(64586),Te={};Te.styleTagTransform=Ie(),Te.setAttributes=q(),Te.insert=W().bind(null,"head"),Te.domAPI=D(),Te.insertStyleElement=de();var Le=B()(T.Z,Te),Pe=T.Z&&T.Z.locals?T.Z.locals:void 0;class Qe extends v.py{constructor(G,ce,fe={}){super(G),this.stickyPanel=new v.lp(G),this.toolbar=new v.jB(G,{shouldGroupWhenFull:fe.shouldToolbarGroupWhenFull}),this.editable=new v.r1(G,ce)}render(){super.render(),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}var ct=u(99973);class Fe{constructor(G){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit=typeof G.crashNumberLimit=="number"?G.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof G.minimumNonErrorTimePeriod=="number"?G.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=ce=>{const fe="error"in ce?ce.error:ce.reason;fe instanceof Error&&this._handleError(fe,ce)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(G,ce){this._listeners[G]||(this._listeners[G]=[]),this._listeners[G].push(ce)}off(G,ce){this._listeners[G]=this._listeners[G].filter(fe=>fe!==ce)}_fire(G,...ce){const fe=this._listeners[G]||[];for(const ke of fe)ke.apply(this,[null,...ce])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(G,ce){if(this._shouldReactToError(G)){this.crashes.push({message:G.message,stack:G.stack,filename:ce instanceof ErrorEvent?ce.filename:void 0,lineno:ce instanceof ErrorEvent?ce.lineno:void 0,colno:ce instanceof ErrorEvent?ce.colno:void 0,date:this._now()});const fe=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:G,causesRestart:fe}),fe?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(G){return G.is&&G.is("CKEditorError")&&G.context!==void 0&&G.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(G)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const G=this.crashes[this.crashes.length-1].date,ce=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(G-ce)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}function Ee(pe,G=new Set){const ce=[pe],fe=new Set;let ke=0;for(;ce.length>ke;){const _e=ce[ke++];if(!(fe.has(_e)||!Ke(_e)||G.has(_e)))if(fe.add(_e),Symbol.iterator in _e)try{for(const xe of _e)ce.push(xe)}catch(xe){}else for(const xe in _e)xe!=="defaultValue"&&ce.push(_e[xe])}return fe}function Ke(pe){const G=Object.prototype.toString.call(pe),ce=typeof pe;return!(ce==="number"||ce==="boolean"||ce==="string"||ce==="symbol"||ce==="function"||G==="[object Date]"||G==="[object RegExp]"||G==="[object Module]"||pe===void 0||pe===null||pe._watchdogExcluded||pe instanceof EventTarget||pe instanceof Event)}function mt(pe,G,ce=new Set){if(pe===G&&We(pe))return!0;const fe=Ee(pe,ce),ke=Ee(G,ce);for(const _e of fe)if(ke.has(_e))return!0;return!1}function St(pe,G,ce){const{subNodes:fe,prevNodeMap:ke}=getSubNodes(pe,ce.subNodes),{subNodes:_e,prevNodeMap:xe}=getSubNodes(G,ce.subNodes);for(const He of fe)if(_e.has(He)){const ut=[];ut.push(He);let Ye=ke.get(He);for(;Ye&&Ye!==pe;)ut.push(Ye),Ye=ke.get(Ye);for(Ye=xe.get(He);Ye&&Ye!==G;)ut.unshift(Ye),Ye=xe.get(Ye);return console.log("--------"),console.log({target1:pe}),console.log({sharedNode:He}),console.log({target2:G}),console.log({connection:ut}),!0}return!1}function We(pe){return typeof pe=="object"&&pe!==null}var Re=u(20057),Ne=u(23132),Oe=u(94195);class Be extends Fe{constructor(G,ce={}){super(ce),this._editor=null,this._initUsingData=!0,this._editables={},this._throttledSave=(0,Re.Z)(this._save.bind(this),typeof ce.saveInterval=="number"?ce.saveInterval:5e3),G&&(this._creator=(fe,ke)=>G.create(fe,ke)),this._destructor=fe=>fe.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(G){this._creator=G}setDestructor(G){this._destructor=G}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(G=>{console.error("An error happened during the editor destroying.",G)}).then(()=>{const G={},ce=[],fe=this._config.rootsAttributes||{},ke={};for(const[xe,He]of Object.entries(this._data.roots))He.isLoaded?(G[xe]="",ke[xe]=fe[xe]||{}):ce.push(xe);const _e=Hr(Ge({},this._config),{extraPlugins:this._config.extraPlugins||[],lazyRoots:ce,rootsAttributes:ke,_watchdogInitialData:this._data});return delete _e.initialData,_e.extraPlugins.push(it),this._initUsingData?this.create(G,_e,_e.context):(0,Ne.Z)(this._elementOrData)?this.create(this._elementOrData,_e,_e.context):this.create(this._editables,_e,_e.context)}).then(()=>{this._fire("restart")})}create(G=this._elementOrData,ce=this._config,fe){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=G,this._initUsingData=typeof G=="string"||Object.keys(G).length>0&&typeof Object.values(G)[0]=="string",this._config=this._cloneEditorConfiguration(ce)||{},this._config.context=fe,this._creator(G,this._config))).then(ke=>{this._editor=ke,ke.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=ke.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const G=this._editor;return this._editor=null,G.model.document.off("change:data",this._throttledSave),this._destructor(G)})}_save(){const G=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=G}catch(ce){console.error(ce,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(G){this._excludedProps=G}_getData(){const G=this._editor,ce=G.model.document.roots.filter(He=>He.isAttached()&&He.rootName!="$graveyard"),{plugins:fe}=G,ke=fe.has("CommentsRepository")&&fe.get("CommentsRepository"),_e=fe.has("TrackChanges")&&fe.get("TrackChanges"),xe={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};ce.forEach(He=>{xe.roots[He.rootName]={content:JSON.stringify(Array.from(He.getChildren())),attributes:JSON.stringify(Array.from(He.getAttributes())),isLoaded:He._isLoaded}});for(const He of G.model.markers)He._affectsData&&(xe.markers[He.name]={rangeJSON:He.getRange().toJSON(),usingOperation:He._managedUsingOperations,affectsData:He._affectsData});return ke&&(xe.commentThreads=JSON.stringify(ke.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),_e&&(xe.suggestions=JSON.stringify(_e.getSuggestions({toJSON:!0,skipNotAttached:!0}))),xe}_getEditables(){const G={};for(const ce of this.editor.model.document.getRootNames()){const fe=this.editor.ui.getEditableElement(ce);fe&&(G[ce]=fe)}return G}_isErrorComingFromThisItem(G){return mt(this._editor,G.context,this._excludedProps)}_cloneEditorConfiguration(G){return(0,Oe.Z)(G,(ce,fe)=>{if((0,Ne.Z)(ce)||fe==="context")return ce})}}class it{constructor(G){this.editor=G,this._data=G.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",G=>{G.stop(),this.editor.model.enqueueChange({isUndoable:!1},ce=>{this._restoreCollaborationData(),this._restoreEditorData(ce)}),this.editor.data.fire("ready")},{priority:1e3-1})}_createNode(G,ce){if("name"in ce){const fe=G.createElement(ce.name,ce.attributes);if(ce.children)for(const ke of ce.children)fe._appendChild(this._createNode(G,ke));return fe}else return G.createText(ce.data,ce.attributes)}_restoreEditorData(G){const ce=this.editor;Object.entries(this._data.roots).forEach(([fe,{content:ke,attributes:_e}])=>{const xe=JSON.parse(ke),He=JSON.parse(_e),ut=ce.model.document.getRoot(fe);for(const[Ye,Yt]of He)G.setAttribute(Ye,Yt,ut);for(const Ye of xe){const Yt=this._createNode(G,Ye);G.insert(Yt,ut,"end")}}),Object.entries(this._data.markers).forEach(([fe,ke])=>{const{document:_e}=ce.model,qt=ke,{rangeJSON:{start:xe,end:He}}=qt,ut=Ba(qt,["rangeJSON"]),Ye=_e.getRoot(xe.root),Yt=G.createPositionFromPath(Ye,xe.path,xe.stickiness),cn=G.createPositionFromPath(Ye,He.path,He.stickiness),Vt=G.createRange(Yt,cn);G.addMarker(fe,Ge({range:Vt},ut))})}_restoreCollaborationData(){const G=JSON.parse(this._data.commentThreads),ce=JSON.parse(this._data.suggestions);G.forEach(fe=>{const ke=this.editor.config.get("collaboration.channelId"),_e=this.editor.plugins.get("CommentsRepository");_e.hasCommentThread(fe.threadId)&&_e.getCommentThread(fe.threadId).remove(),_e.addCommentThread(Ge({channelId:ke},fe))}),ce.forEach(fe=>{const ke=this.editor.plugins.get("TrackChangesEditing");if(ke.hasSuggestion(fe.id)){const _e=ke.getSuggestion(fe.id);_e.attributes=fe.attributes}else ke.addSuggestionData(fe)})}}const ze=Symbol("MainQueueId");class dt extends Fe{constructor(G,ce={}){super(ce),this._watchdogs=new Map,this._context=null,this._contextProps=new Set,this._actionQueues=new je,this._watchdogConfig=ce,this._creator=fe=>G.create(fe),this._destructor=fe=>fe.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(G){this._creator=G}setDestructor(G){this._destructor=G}get context(){return this._context}create(G={}){return this._actionQueues.enqueue(ze,()=>(this._contextConfig=G,this._create()))}getItem(G){return this._getWatchdog(G)._item}getItemState(G){return this._getWatchdog(G).state}add(G){const ce=pt(G);return Promise.all(ce.map(fe=>this._actionQueues.enqueue(fe.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let ke;if(this._watchdogs.has(fe.id))throw new Error(`Item with the given id is already added: '${fe.id}'.`);if(fe.type==="editor")return ke=new Be(null,this._watchdogConfig),ke.setCreator(fe.creator),ke._setExcludedProperties(this._contextProps),fe.destructor&&ke.setDestructor(fe.destructor),this._watchdogs.set(fe.id,ke),ke.on("error",(_e,{error:xe,causesRestart:He})=>{this._fire("itemError",{itemId:fe.id,error:xe}),He&&this._actionQueues.enqueue(fe.id,()=>new Promise(ut=>{const Ye=()=>{ke.off("restart",Ye),this._fire("itemRestart",{itemId:fe.id}),ut()};ke.on("restart",Ye)}))}),ke.create(fe.sourceElementOrData,fe.config,this._context);throw new Error(`Not supported item type: '${fe.type}'.`)})))}remove(G){const ce=pt(G);return Promise.all(ce.map(fe=>this._actionQueues.enqueue(fe,()=>{const ke=this._getWatchdog(fe);return this._watchdogs.delete(fe),ke.destroy()})))}destroy(){return this._actionQueues.enqueue(ze,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(ze,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(G=>{console.error("An error happened during destroying the context or items.",G)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(G=>(this._context=G,this._contextProps=Ee(this._context),Promise.all(Array.from(this._watchdogs.values()).map(ce=>(ce._setExcludedProperties(this._contextProps),ce.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const G=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(ce=>ce.destroy())).then(()=>this._destructor(G))})}_getWatchdog(G){const ce=this._watchdogs.get(G);if(!ce)throw new Error(`Item with the given id was not registered: ${G}.`);return ce}_isErrorComingFromThisItem(G){for(const ce of this._watchdogs.values())if(ce._isErrorComingFromThisItem(G))return!1;return mt(this._context,G.context)}}class je{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._activeActions=0}onEmpty(G){this._onEmptyCallbacks.push(G)}enqueue(G,ce){const fe=G===ze;this._activeActions++,this._queues.get(G)||this._queues.set(G,Promise.resolve());const _e=(fe?Promise.all(this._queues.values()):Promise.all([this._queues.get(ze),this._queues.get(G)])).then(ce),xe=_e.catch(()=>{});return this._queues.set(G,xe),_e.finally(()=>{this._activeActions--,this._queues.get(G)===xe&&this._activeActions===0&&this._onEmptyCallbacks.forEach(He=>He())})}}function pt(pe){return Array.isArray(pe)?pe:[pe]}class kt extends(0,ct.W9)((0,ct.xK)(ct.ML)){constructor(G,ce={}){if(!Me(G)&&ce.initialData!==void 0)throw new C.Bb("editor-create-initial-data",null);super(ce),this.config.get("initialData")===void 0&&this.config.set("initialData",Ht(G)),Me(G)&&(this.sourceElement=G),this.model.document.createRoot();const fe=!this.config.get("toolbar.shouldNotGroupWhenFull"),ke=new Qe(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:fe});this.ui=new L(this,ke),(0,ct.P$)(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(G,ce={}){return new Promise(fe=>{const ke=new this(G,ce);fe(ke.initPlugins().then(()=>ke.ui.init(Me(G)?G:null)).then(()=>ke.data.init(ke.config.get("initialData"))).then(()=>ke.fire("ready")).then(()=>ke))})}}kt.Context=ct._y,kt.EditorWatchdog=Be,kt.ContextWatchdog=dt;function Ht(pe){return Me(pe)?(0,C.yy)(pe):pe}function Me(pe){return(0,Ne.Z)(pe)}},21494:function(J,j,u){"use strict";u.d(j,{r7:function(){return br},uz:function(){return sl},Yc:function(){return ol},tn:function(){return ds},dK:function(){return lt},qZ:function(){return rt},jH:function(){return Dc},DX:function(){return mi},iE:function(){return Z},Hn:function(){return Yl},dM:function(){return Ql},Pk:function(){return fn},Qj:function(){return Ae},A_:function(){return No},ID:function(){return Pe},Rf:function(){return hl}});var v=u(1062),V=u.n(v),C=u(60552),L=u.n(C),m=u(33566),B=u.n(m),M=u(84107),D=u.n(M),O=u(24911),W=u.n(O),z=u(63227),q=u.n(z),te=u(38709),de={};de.styleTagTransform=q(),de.setAttributes=D(),de.insert=B().bind(null,"head"),de.domAPI=L(),de.insertStyleElement=W();var he=V()(te.Z,de),Ie=te.Z&&te.Z.locals?te.Z.locals:void 0,T=u(5820);const Te=new WeakMap;let Le=!1;function Pe({view:r,element:e,text:t,isDirectHost:n=!0,keepOnFocus:o=!1}){const i=r.document;Te.has(i)||(Te.set(i,new Map),i.registerPostFixer(_=>Ke(i,_)),i.on("change:isComposing",()=>{r.change(_=>Ke(i,_))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(_,S,H)=>{a(H)}),e.placeholder?a(e.placeholder):t&&a(t),t&&We();function a(_){Te.get(i).set(e,{text:_,isDirectHost:n,keepOnFocus:o,hostElement:n?e:null}),r.change(S=>Ke(i,S))}}function Qe(r,e){const t=e.document;Te.has(t)&&r.change(n=>{const o=Te.get(t),i=o.get(e);n.removeAttribute("data-placeholder",i.hostElement),Fe(n,i.hostElement),o.delete(e)})}function ct(r,e){return e.hasClass("ck-placeholder")?!1:(r.addClass("ck-placeholder",e),!0)}function Fe(r,e){return e.hasClass("ck-placeholder")?(r.removeClass("ck-placeholder",e),!0):!1}function Ee(r,e){if(!r.isAttached()||Array.from(r.getChildren()).some(a=>!a.is("uiElement")))return!1;const n=r.document,i=n.selection.anchor;return n.isComposing&&i&&i.parent===r?!1:e||!n.isFocused?!0:!!i&&i.parent!==r}function Ke(r,e){const t=Te.get(r),n=[];let o=!1;for(const[i,a]of t)a.isDirectHost&&(n.push(i),mt(e,i,a)&&(o=!0));for(const[i,a]of t){if(a.isDirectHost)continue;const _=St(i);_&&(n.includes(_)||(a.hostElement=_,mt(e,i,a)&&(o=!0)))}return o}function mt(r,e,t){const{text:n,isDirectHost:o,hostElement:i}=t;let a=!1;return i.getAttribute("data-placeholder")!==n&&(r.setAttribute("data-placeholder",n,i),a=!0),(o||e.childCount==1)&&Ee(i,t.keepOnFocus)?ct(r,i)&&(a=!0):Fe(r,i)&&(a=!0),a}function St(r){if(r.childCount){const e=r.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function We(){Le||(0,T.KE)("enableplaceholder-deprecated-text-option"),Le=!0}class Re{is(){throw new Error("is() method is abstract")}}var Ne=u(12653),Oe=4;function Be(r){return(0,Ne.Z)(r,Oe)}var it=Be,ze=u(55379);class dt extends(0,T.ln)(Re){constructor(e){super(),this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new T.Bb("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={}){const t=[];let n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}getCommonAncestor(e,t={}){const n=this.getAncestors(t),o=e.getAncestors(t);let i=0;for(;n[i]==o[i]&&n[i];)i++;return i===0?null:n[i-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),n=e.getPath(),o=(0,T.Rt)(t,n);switch(o){case"prefix":return!0;case"extension":return!1;default:return t[o]<n[o]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire(`change:${e}`,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){const e=it(this);return delete e.parent,e}}dt.prototype.is=function(r){return r==="node"||r==="view:node"};class je extends dt{constructor(e,t){super(e),this._textData=t}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof je?this===e||this.data===e.data:!1}_clone(){return new je(this.document,this.data)}}je.prototype.is=function(r){return r==="$text"||r==="view:$text"||r==="text"||r==="view:text"||r==="node"||r==="view:node"};class pt extends Re{constructor(e,t,n){if(super(),this.textNode=e,t<0||t>e.data.length)throw new T.Bb("view-textproxy-wrong-offsetintext",this);if(n<0||t+n>e.data.length)throw new T.Bb("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+n),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const t=[];let n=e.includeSelf?this.textNode:this.parent;for(;n!==null;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}}pt.prototype.is=function(r){return r==="$textProxy"||r==="view:$textProxy"||r==="textProxy"||r==="view:textProxy"};var kt=u(54098);class Ht{constructor(...e){this._patterns=[],this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const t of e)for(const n of this._patterns){const o=Me(t,n);if(o)return{element:t,pattern:n,match:o}}return null}matchAll(...e){const t=[];for(const n of e)for(const o of this._patterns){const i=Me(n,o);i&&t.push({element:n,pattern:o,match:i})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const e=this._patterns[0],t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null}}function Me(r,e){if(typeof e=="function")return e(r);const t={};return e.name&&(t.name=pe(e.name,r.name),!t.name)||e.attributes&&(t.attributes=_e(e.attributes,r),!t.attributes)||e.classes&&(t.classes=xe(e.classes,r),!t.classes)||e.styles&&(t.styles=He(e.styles,r),!t.styles)?null:t}function pe(r,e){return r instanceof RegExp?!!e.match(r):r===e}function G(r,e,t){const n=ce(r),o=Array.from(e),i=[];if(n.forEach(([a,_])=>{o.forEach(S=>{fe(a,S)&&ke(_,S,t)&&i.push(S)})}),!(!n.length||i.length<n.length))return i}function ce(r){return Array.isArray(r)?r.map(e=>(0,kt.Z)(e)?((e.key===void 0||e.value===void 0)&&(0,T.KE)("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):(0,kt.Z)(r)?Object.entries(r):[[r,!0]]}function fe(r,e){return r===!0||r===e||r instanceof RegExp&&e.match(r)}function ke(r,e,t){if(r===!0)return!0;const n=t(e);return r===n||r instanceof RegExp&&!!String(n).match(r)}function _e(r,e){const t=new Set(e.getAttributeKeys());return(0,kt.Z)(r)?(r.style!==void 0&&(0,T.KE)("matcher-pattern-deprecated-attributes-style-key",r),r.class!==void 0&&(0,T.KE)("matcher-pattern-deprecated-attributes-class-key",r)):(t.delete("style"),t.delete("class")),G(r,t,n=>e.getAttribute(n))}function xe(r,e){return G(r,e.getClassNames(),()=>{})}function He(r,e){return G(r,e.getStyleNames(!0),t=>e.getStyle(t))}var ut=u(82433),Ye=u(56052),Yt=u(98111),cn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vt=/^\w*$/;function qt(r,e){if((0,Ye.Z)(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||(0,Yt.Z)(r)?!0:Vt.test(r)||!cn.test(r)||e!=null&&r in Object(e)}var Sr=qt,Xe=u(91380),oe="Expected a function";function be(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(oe);var t=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=t.cache;if(i.has(o))return i.get(o);var a=r.apply(this,n);return t.cache=i.set(o,a)||i,a};return t.cache=new(be.Cache||Xe.Z),t}be.Cache=Xe.Z;var De=be,nt=500;function vt(r){var e=De(r,function(n){return t.size===nt&&t.clear(),n}),t=e.cache;return e}var yn=vt,en=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ln=/\\(\\)?/g,dn=yn(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(en,function(t,n,o,i){e.push(o?i.replace(ln,"$1"):n||t)}),e}),Or=dn,gn=u(66711);function _n(r,e){for(var t=-1,n=r==null?0:r.length,o=Array(n);++t<n;)o[t]=e(r[t],t,r);return o}var yt=_n,pn=1/0,hr=gn.Z?gn.Z.prototype:void 0,Rr=hr?hr.toString:void 0;function tn(r){if(typeof r=="string")return r;if((0,Ye.Z)(r))return yt(r,tn)+"";if((0,Yt.Z)(r))return Rr?Rr.call(r):"";var e=r+"";return e=="0"&&1/r==-pn?"-0":e}var On=tn;function Kt(r){return r==null?"":On(r)}var nr=Kt;function oo(r,e){return(0,Ye.Z)(r)?r:Sr(r,e)?[r]:Or(nr(r))}var et=oo;function ht(r){var e=r==null?0:r.length;return e?r[e-1]:void 0}var Ue=ht,gt=1/0;function Rt(r){if(typeof r=="string"||(0,Yt.Z)(r))return r;var e=r+"";return e=="0"&&1/r==-gt?"-0":e}var $t=Rt;function mn(r,e){e=et(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[$t(e[t++])];return t&&t==n?r:void 0}var Rn=mn;function Nn(r,e,t){var n=-1,o=r.length;e<0&&(e=-e>o?0:o+e),t=t>o?o:t,t<0&&(t+=o),o=e>t?0:t-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=r[n+e];return i}var fr=Nn;function Mr(r,e){return e.length<2?r:Rn(r,fr(e,0,-1))}var Et=Mr;function En(r,e){return e=et(e,r),r=Et(r,e),r==null||delete r[$t(Ue(e))]}var Dr=En;function Tn(r,e){return r==null?!0:Dr(r,e)}var gr=Tn;function Mn(r,e,t){var n=r==null?void 0:Rn(r,e);return n===void 0?t:n}var Nt=Mn,Ct=u(24507),Ln=u(857),_r=u(54523);function Fn(r,e,t){(t!==void 0&&!(0,_r.Z)(r[e],t)||t===void 0&&!(e in r))&&(0,Ln.Z)(r,e,t)}var zn=Fn;function Wn(r){return function(e,t,n){for(var o=-1,i=Object(e),a=n(e),_=a.length;_--;){var S=a[r?_:++o];if(t(i[S],S,i)===!1)break}return e}}var Ir=Wn,Br=Ir(),Pn=Br,Tt=u(14054),io=u(11523),jn=u(32126),Kr=u(16448),pr=u(65380),so=u(49634),Zn=u(13795);function Vr(r){return(0,Zn.Z)(r)&&(0,so.Z)(r)}var $r=Vr,Un=u(45673),bt=u(88987),Gt=u(79064);function rr(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}var le=rr,st=u(52949),xt=u(32817);function bn(r){return(0,st.Z)(r,(0,xt.Z)(r))}var Cn=bn;function un(r,e,t,n,o,i,a){var _=le(r,t),S=le(e,t),H=a.get(S);if(H){zn(r,t,H);return}var X=i?i(_,S,t+"",r,e,a):void 0,se=X===void 0;if(se){var Se=(0,Ye.Z)(S),Ze=!Se&&(0,Un.Z)(S),at=!Se&&!Ze&&(0,Gt.Z)(S);X=S,Se||Ze||at?(0,Ye.Z)(_)?X=_:$r(_)?X=(0,jn.Z)(_):Ze?(se=!1,X=(0,Tt.Z)(S,!0)):at?(se=!1,X=(0,io.Z)(S,!0)):X=[]:(0,kt.Z)(S)||(0,pr.Z)(S)?(X=_,(0,pr.Z)(_)?X=Cn(_):(!(0,ut.Z)(_)||(0,bt.Z)(_))&&(X=(0,Kr.Z)(S))):se=!1}se&&(a.set(S,X),o(X,S,n,i,a),a.delete(S)),zn(r,t,X)}var Mt=un;function Hn(r,e,t,n,o){r!==e&&Pn(e,function(i,a){if(o||(o=new Ct.Z),(0,ut.Z)(i))Mt(r,e,a,t,Hn,n,o);else{var _=n?n(le(r,a),i,a+"",r,e,o):void 0;_===void 0&&(_=i),zn(r,a,_)}},xt.Z)}var Kn=Hn,$n=u(67194),wn=(0,$n.Z)(function(r,e,t){Kn(r,e,t)}),Dn=wn,or=u(61572),mr=u(99313);function ao(r,e,t,n){if(!(0,ut.Z)(r))return r;e=et(e,r);for(var o=-1,i=e.length,a=i-1,_=r;_!=null&&++o<i;){var S=$t(e[o]),H=t;if(S==="__proto__"||S==="constructor"||S==="prototype")return r;if(o!=a){var X=_[S];H=n?n(X,S,_):void 0,H===void 0&&(H=(0,ut.Z)(X)?X:(0,mr.Z)(e[o+1])?[]:{})}(0,or.Z)(_,S,H),_=_[S]}return r}var co=ao;function nn(r,e,t){return r==null?r:co(r,e,t)}var Jt=nn;class Wt{constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){const e=Object.entries(this._styles);return!Array.from(e).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=Array.from(Nr(e).entries());for(const[n,o]of t)this._styleProcessor.toNormalizedForm(n,o,this._styles)}has(e){if(this.isEmpty)return!1;const n=this._styleProcessor.getReducedForm(e,this._styles).find(([o])=>o===e);return Array.isArray(n)}set(e,t){if((0,ut.Z)(e))for(const[n,o]of Object.entries(e))this._styleProcessor.toNormalizedForm(n,o,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){const t=Lr(e);gr(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this._getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!(0,ut.Z)(this._styles[e]))return this._styles[e];const n=this._styleProcessor.getReducedForm(e,this._styles).find(([o])=>o===e);if(Array.isArray(n))return n[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this._getStylesEntries().map(([n])=>n)}clear(){this._styles={}}_getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const n of t)e.push(...this._styleProcessor.getReducedForm(n,this._styles));return e}_cleanEmptyObjectsOnPath(e){const t=e.split(".");if(!(t.length>1))return;const o=t.splice(0,t.length-1).join("."),i=Nt(this._styles,o);if(!i)return;!Array.from(Object.keys(i)).length&&this.remove(o)}}class No{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,n){if((0,ut.Z)(t)){In(n,Lr(e),t);return}if(this._normalizers.has(e)){const o=this._normalizers.get(e),{path:i,value:a}=o(t);In(n,i,a)}else In(n,e,t)}getNormalized(e,t){if(!e)return Dn({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){const n=this._extractors.get(e);if(typeof n=="string")return Nt(t,n);const o=n(e,t);if(o)return o}return Nt(t,Lr(e))}getReducedForm(e,t){const n=this.getNormalized(e,t);return n===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(n):[[e,n]]}getStyleNames(e){const t=Array.from(this._consumables.keys()).filter(o=>{const i=this.getNormalized(o,e);return i&&typeof i=="object"?Object.keys(i).length:i}),n=new Set([...t,...Object.keys(e)]);return Array.from(n.values())}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const n of t)this._mapStyleNames(n,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function Nr(r){let e=null,t=0,n=0,o=null;const i=new Map;if(r==="")return i;r.charAt(r.length-1)!=";"&&(r=r+";");for(let a=0;a<r.length;a++){const _=r.charAt(a);if(e===null)switch(_){case":":o||(o=r.substr(t,a-t),n=a+1);break;case'"':case"'":e=_;break;case";":{const S=r.substr(n,a-n);o&&i.set(o.trim(),S.trim()),o=null,t=a+1;break}}else _===e&&(e=null)}return i}function Lr(r){return r.replace("-",".")}function In(r,e,t){let n=t;(0,ut.Z)(t)&&(n=Dn({},Nt(r,e),t)),Jt(r,e,n)}class Ot extends dt{constructor(e,t,n,o){if(super(e),this._unsafeAttributesToRender=[],this._customProperties=new Map,this.name=t,this._attrs=Lo(n),this._children=[],o&&this._insertChild(0,o),this._classes=new Set,this._attrs.has("class")){const i=this._attrs.get("class");yo(this._classes,i),this._attrs.delete("class")}this._styles=new Wt(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){const t=this._styles.toString();return t==""?void 0:t}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof Ot))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[t,n]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==n)return!1;for(const t of this._classes)if(!e._classes.has(t))return!1;for(const t of this._styles.getStyleNames())if(!e._styles.has(t)||e._styles.getAsString(t)!==this._styles.getAsString(t))return!1;return!0}hasClass(...e){for(const t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(const t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){const t=new Ht(...e);let n=this.parent;for(;n&&!n.is("documentFragment");){if(t.match(n))return n;n=n.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),n=Array.from(this._attrs).map(o=>`${o[0]}="${o[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(t?` style="${t}"`:"")+(n==""?"":` ${n}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const t=[];if(e)for(const o of this.getChildren())t.push(o._clone(e));const n=new this.constructor(this.document,this.name,this._attrs,t);return n._classes=new Set(this._classes),n._styles.set(this._styles.getNormalized()),n._customProperties=new Map(this._customProperties),n.getFillerOffset=this.getFillerOffset,n._unsafeAttributesToRender=this._unsafeAttributesToRender,n}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let n=0;const o=Gr(this.document,t);for(const i of o)i.parent!==null&&i._remove(),i.parent=this,i.document=this.document,this._children.splice(e,0,i),e++,n++;return n}_removeChildren(e,t=1){this._fireChange("children",this);for(let n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){const n=String(t);this._fireChange("attributes",this),e=="class"?yo(this._classes,n):e=="style"?this._styles.setTo(n):this._attrs.set(e,n)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const t of(0,T.qo)(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(const t of(0,T.qo)(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),typeof e!="string"?this._styles.set(e):this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(const t of(0,T.qo)(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}}Ot.prototype.is=function(r,e){return e?e===this.name&&(r==="element"||r==="view:element"):r==="element"||r==="view:element"||r==="node"||r==="view:node"};function Lo(r){const e=(0,T.qL)(r);for(const[t,n]of e)n===null?e.delete(t):typeof n!="string"&&e.set(t,String(n));return e}function yo(r,e){const t=e.split(/\s+/);r.clear(),t.forEach(n=>r.add(n))}function Gr(r,e){return typeof e=="string"?[new je(r,e)]:((0,T.TW)(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new je(r,t):t instanceof pt?new je(r,t.data):t))}class kn extends Ot{constructor(e,t,n,o){super(e,t,n,o),this.getFillerOffset=Jr}}kn.prototype.is=function(r,e){return e?e===this.name&&(r==="containerElement"||r==="view:containerElement"||r==="element"||r==="view:element"):r==="containerElement"||r==="view:containerElement"||r==="element"||r==="view:element"||r==="node"||r==="view:node"};function Jr(){const r=[...this.getChildren()],e=r[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const t of r)if(!t.is("uiElement"))return null;return this.childCount}class Bn extends(0,T.Re)(kn){constructor(e,t,n,o){super(e,t,n,o),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",i=>i&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}}Bn.prototype.is=function(r,e){return e?e===this.name&&(r==="editableElement"||r==="view:editableElement"||r==="containerElement"||r==="view:containerElement"||r==="element"||r==="view:element"):r==="editableElement"||r==="view:editableElement"||r==="containerElement"||r==="view:containerElement"||r==="element"||r==="view:element"||r==="node"||r==="view:node"};const Eo=Symbol("rootName");class fo extends Bn{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(Eo)}set rootName(e){this._setCustomProperty(Eo,e)}set _name(e){this.name=e}}fo.prototype.is=function(r,e){return e?e===this.name&&(r==="rootElement"||r==="view:rootElement"||r==="editableElement"||r==="view:editableElement"||r==="containerElement"||r==="view:containerElement"||r==="element"||r==="view:element"):r==="rootElement"||r==="view:rootElement"||r==="editableElement"||r==="view:editableElement"||r==="containerElement"||r==="view:containerElement"||r==="element"||r==="view:element"||r==="node"||r==="view:node"};class Gn{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new T.Bb("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new T.Bb("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=we._createAt(e.startPosition):this._position=we._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,n;do n=this.position,t=this.next();while(!t.done&&e(t.value));t.done||(this._position=n)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone();const t=this.position,n=e.parent;if(n.parent===null&&e.offset===n.childCount)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let o;if(n instanceof je){if(e.isAtEnd)return this._position=we._createAfter(n),this._next();o=n.data[e.offset]}else o=n.getChild(e.offset);if(o instanceof Ot){if(!this.shallow)e=new we(o,0);else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,this._formatReturnValue("elementStart",o,t,e,1)}if(o instanceof je){if(this.singleCharacters)return e=new we(o,0),this._position=e,this._next();let i=o.data.length,a;return o==this._boundaryEndParent?(i=this.boundaries.end.offset,a=new pt(o,0,i),e=we._createAfter(a)):(a=new pt(o,0,o.data.length),e.offset++),this._position=e,this._formatReturnValue("text",a,t,e,i)}if(typeof o=="string"){let i;this.singleCharacters?i=1:i=(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-e.offset;const a=new pt(n,e.offset,i);return e.offset+=i,this._position=e,this._formatReturnValue("text",a,t,e,i)}return e=we._createAfter(n),this._position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,t,e)}_previous(){let e=this.position.clone();const t=this.position,n=e.parent;if(n.parent===null&&e.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let o;if(n instanceof je){if(e.isAtStart)return this._position=we._createBefore(n),this._previous();o=n.data[e.offset-1]}else o=n.getChild(e.offset-1);if(o instanceof Ot)return this.shallow?(e.offset--,this._position=e,this._formatReturnValue("elementStart",o,t,e,1)):(e=new we(o,o.childCount),this._position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",o,t,e));if(o instanceof je){if(this.singleCharacters)return e=new we(o,o.data.length),this._position=e,this._previous();let i=o.data.length,a;if(o==this._boundaryStartParent){const _=this.boundaries.start.offset;a=new pt(o,_,o.data.length-_),i=a.data.length,e=we._createBefore(a)}else a=new pt(o,0,o.data.length),e.offset--;return this._position=e,this._formatReturnValue("text",a,t,e,i)}if(typeof o=="string"){let i;if(this.singleCharacters)i=1;else{const _=n===this._boundaryStartParent?this.boundaries.start.offset:0;i=e.offset-_}e.offset-=i;const a=new pt(n,e.offset,i);return this._position=e,this._formatReturnValue("text",a,t,e,i)}return e=we._createBefore(n),this._position=e,this._formatReturnValue("elementStart",n,t,e,1)}_formatReturnValue(e,t,n,o,i){return t instanceof pt&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(o=we._createAfter(t.textNode),this._position=o):n=we._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(o=we._createBefore(t.textNode),this._position=o):n=we._createBefore(t.textNode))),{done:!1,value:{type:e,item:t,previousPosition:n,nextPosition:o,length:i}}}}class we extends Re{constructor(e,t){super(),this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof Bn);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const t=we._createAt(this),n=t.offset+e;return t.offset=n<0?0:n,t}getLastMatchingPosition(e,t={}){t.startPosition=this;const n=new Gn(t);return n.skip(e),n.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const t=this.getAncestors(),n=e.getAncestors();let o=0;for(;t[o]==n[o]&&t[o];)o++;return o===0?null:t[o-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const t=this.parent.is("node")?this.parent.getPath():[],n=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),n.push(e.offset);const o=(0,T.Rt)(t,n);switch(o){case"prefix":return"before";case"extension":return"after";default:return t[o]<n[o]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new Gn(e)}clone(){return new we(this.parent,this.offset)}static _createAt(e,t){if(e instanceof we)return new this(e.parent,e.offset);{const n=e;if(t=="end")t=n.is("$text")?n.data.length:n.childCount;else{if(t=="before")return this._createBefore(n);if(t=="after")return this._createAfter(n);if(t!==0&&!t)throw new T.Bb("view-createpositionat-offset-required",n)}return new we(n,t)}}static _createAfter(e){if(e.is("$textProxy"))return new we(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new T.Bb("view-position-after-root",e,{root:e});return new we(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new we(e.textNode,e.offsetInText);if(!e.parent)throw new T.Bb("view-position-before-root",e,{root:e});return new we(e.parent,e.index)}}we.prototype.is=function(r){return r==="position"||r==="view:position"};class $e extends Re{constructor(e,t=null){super(),this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*new Gn({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(ir,{direction:"backward"}),t=this.end.getLastMatchingPosition(ir);return e.parent.is("$text")&&e.isAtStart&&(e=we._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=we._createAfter(t.parent)),new $e(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(ir);if(e.isAfter(this.end)||e.isEqual(this.end))return new $e(e,e);let t=this.end.getLastMatchingPosition(ir,{direction:"backward"});const n=e.nodeAfter,o=t.nodeBefore;return n&&n.is("$text")&&(e=new we(n,0)),o&&o.is("$text")&&(t=new we(o,o.data.length)),new $e(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),o=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&o}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new $e(this.start,e.start)),this.containsPosition(e.end)&&t.push(new $e(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,n=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(n=e.end),new $e(t,n)}return null}getWalker(e={}){return e.boundaries=this,new Gn(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new $e(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new Gn(e);for(const n of t)yield n.item}*getPositions(e={}){e.boundaries=this;const t=new Gn(e);yield t.position;for(const n of t)yield n.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,n,o){return new this(new we(e,t),new we(n,o))}static _createFromPositionAndShift(e,t){const n=e,o=e.getShiftedBy(t);return t>0?new this(n,o):new this(o,n)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(we._createBefore(e),t)}}$e.prototype.is=function(r){return r==="range"||r==="view:range"};function ir(r){return!!(r.item.is("attributeElement")||r.item.is("uiElement"))}class xn extends(0,T.ln)(Re){constructor(...e){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?e.clone():null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let n=!1;for(const o of e._ranges)if(t.isEqual(o)){n=!0;break}if(!n)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const t=(0,T.QX)(this.getRanges()),n=(0,T.QX)(e.getRanges());if(t!=n)return!1;if(t==0)return!0;for(let o of this.getRanges()){o=o.getTrimmed();let i=!1;for(let a of e.getRanges())if(a=a.getTrimmed(),o.start.isEqual(a.start)&&o.end.isEqual(a.end)){i=!0;break}if(!i)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[t,n,o]=e;if(typeof n=="object"&&(o=n,n=void 0),t===null)this._setRanges([]),this._setFakeOptions(o);else if(t instanceof xn||t instanceof Xr)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof $e)this._setRanges([t],o&&o.backward),this._setFakeOptions(o);else if(t instanceof we)this._setRanges([new $e(t)]),this._setFakeOptions(o);else if(t instanceof dt){const i=!!o&&!!o.backward;let a;if(n===void 0)throw new T.Bb("view-selection-setto-required-second-parameter",this);n=="in"?a=$e._createIn(t):n=="on"?a=$e._createOn(t):a=new $e(we._createAt(t,n)),this._setRanges([a],i),this._setFakeOptions(o)}else if((0,T.TW)(t))this._setRanges(t,o&&o.backward),this._setFakeOptions(o);else throw new T.Bb("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,t){if(this.anchor===null)throw new T.Bb("view-selection-setfocus-no-ranges",this);const n=we._createAt(e,t);if(n.compareWith(this.focus)=="same")return;const o=this.anchor;this._ranges.pop(),n.compareWith(o)=="before"?this._addRange(new $e(n,o),!0):this._addRange(new $e(o,n)),this.fire("change")}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const n of e)this._addRange(n);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof $e))throw new T.Bb("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new T.Bb("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new $e(e.start,e.end))}}xn.prototype.is=function(r){return r==="selection"||r==="view:selection"};class Xr extends(0,T.ln)(Re){constructor(...e){super(),this._selection=new xn,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,t){this._selection.setFocus(e,t)}}Xr.prototype.is=function(r){return r==="selection"||r=="documentSelection"||r=="view:selection"||r=="view:documentSelection"};class br extends T.M3{constructor(e,t,n){super(e,t),this.startRange=n,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Fr=Symbol("bubbling contexts");function Yr(r){class e extends r{fire(n,...o){try{const i=n instanceof T.M3?n:new T.M3(this,n),a=vr(this);if(!a.size)return;if(wr(i,"capturing",this),kr(a,"$capture",i,...o))return i.return;const _=i.startRange||this.selection.getFirstRange(),S=_?_.getContainedElement():null,H=S?!!To(a,S):!1;let X=S||Po(_);if(wr(i,"atTarget",X),!H){if(kr(a,"$text",i,...o))return i.return;wr(i,"bubbling",X)}for(;X;){if(X.is("rootElement")){if(kr(a,"$root",i,...o))return i.return}else if(X.is("element")&&kr(a,X.name,i,...o))return i.return;if(kr(a,X,i,...o))return i.return;X=X.parent,wr(i,"bubbling",X)}return wr(i,"bubbling",this),kr(a,"$document",i,...o),i.return}catch(i){T.Bb.rethrowUnexpectedError(i,this)}}_addEventListener(n,o,i){const a=(0,T.qo)(i.context||"$document"),_=vr(this);for(const S of a){let H=_.get(S);H||(H=new((0,T.ln)()),_.set(S,H)),this.listenTo(H,n,o,i)}}_removeEventListener(n,o){const i=vr(this);for(const a of i.values())this.stopListening(a,n,o)}}return e}{const r=Yr(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{Yr[e]=r.prototype[e]})}function wr(r,e,t){r instanceof br&&(r._eventPhase=e,r._currentTarget=t)}function kr(r,e,t,...n){const o=typeof e=="string"?r.get(e):To(r,e);return o?(o.fire(t,...n),t.stop.called):!1}function To(r,e){for(const[t,n]of r)if(typeof t=="function"&&t(e))return n;return null}function vr(r){return r[Fr]||(r[Fr]=new Map),r[Fr]}function Po(r){if(!r)return null;const e=r.start.parent,t=r.end.parent,n=e.getPath(),o=t.getPath();return n.length>o.length?e:t}class sr extends Yr((0,T.Re)()){constructor(e){super(),this._postFixers=new Set,this.selection=new Xr,this.roots=new T.FE({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.map(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do for(const n of this._postFixers)if(t=n(e),t)break;while(t)}}const Dt=10;class Jn extends Ot{constructor(e,t,n,o){super(e,t,n,o),this._priority=Dt,this._id=null,this._clonesGroup=null,this.getFillerOffset=zr}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new T.Bb("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}}Jn.DEFAULT_PRIORITY=Dt,Jn.prototype.is=function(r,e){return e?e===this.name&&(r==="attributeElement"||r==="view:attributeElement"||r==="element"||r==="view:element"):r==="attributeElement"||r==="view:attributeElement"||r==="element"||r==="view:element"||r==="node"||r==="view:node"};function zr(){if(ar(this))return null;let r=this.parent;for(;r&&r.is("attributeElement");){if(ar(r)>1)return null;r=r.parent}return!r||ar(r)>1?null:this.childCount}function ar(r){return Array.from(r.getChildren()).filter(e=>!e.is("uiElement")).length}class yr extends Ot{constructor(e,t,n,o){super(e,t,n,o),this.getFillerOffset=Co}_insertChild(e,t){if(t&&(t instanceof dt||Array.from(t).length>0))throw new T.Bb("view-emptyelement-cannot-add",[this,t]);return 0}}yr.prototype.is=function(r,e){return e?e===this.name&&(r==="emptyElement"||r==="view:emptyElement"||r==="element"||r==="view:element"):r==="emptyElement"||r==="view:emptyElement"||r==="element"||r==="view:element"||r==="node"||r==="view:node"};function Co(){return null}class go extends Ot{constructor(e,t,n,o){super(e,t,n,o),this.getFillerOffset=po}_insertChild(e,t){if(t&&(t instanceof dt||Array.from(t).length>0))throw new T.Bb("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const n of this.getAttributeKeys())t.setAttribute(n,this.getAttribute(n));return t}}go.prototype.is=function(r,e){return e?e===this.name&&(r==="uiElement"||r==="view:uiElement"||r==="element"||r==="view:element"):r==="uiElement"||r==="view:uiElement"||r==="element"||r==="view:element"||r==="node"||r==="view:node"};function _o(r){r.document.on("arrowKey",(e,t)=>xo(e,t,r.domConverter),{priority:"low"})}function po(){return null}function xo(r,e,t){if(e.keyCode==T.Do.arrowright){const n=e.domTarget.ownerDocument.defaultView.getSelection(),o=n.rangeCount==1&&n.getRangeAt(0).collapsed;if(o||e.shiftKey){const i=n.focusNode,a=n.focusOffset,_=t.domPositionToView(i,a);if(_===null)return;let S=!1;const H=_.getLastMatchingPosition(X=>(X.item.is("uiElement")&&(S=!0),!!(X.item.is("uiElement")||X.item.is("attributeElement"))));if(S){const X=t.viewPositionToDom(H);o?n.collapse(X.parent,X.offset):n.extend(X.parent,X.offset)}}}}class b extends Ot{constructor(e,t,n,o){super(e,t,n,o),this.getFillerOffset=h}_insertChild(e,t){if(t&&(t instanceof dt||Array.from(t).length>0))throw new T.Bb("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}}b.prototype.is=function(r,e){return e?e===this.name&&(r==="rawElement"||r==="view:rawElement"||r==="element"||r==="view:element"):r==="rawElement"||r==="view:rawElement"||r===this.name||r==="view:"+this.name||r==="element"||r==="view:element"||r==="node"||r==="view:node"};function h(){return null}class y extends(0,T.ln)(Re){constructor(e,t){super(),this._children=[],this._customProperties=new Map,this.document=e,t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let n=0;const o=R(this.document,t);for(const i of o)i.parent!==null&&i._remove(),i.parent=this,this._children.splice(e,0,i),e++,n++;return n}_removeChildren(e,t=1){this._fireChange("children",this);for(let n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}}y.prototype.is=function(r){return r==="documentFragment"||r==="view:documentFragment"};function R(r,e){return typeof e=="string"?[new je(r,e)]:((0,T.TW)(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new je(r,t):t instanceof pt?new je(r,t.data):t))}class F{constructor(e){this._cloneGroups=new Map,this._slotFactory=null,this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new y(this.document,e)}createText(e){return new je(this.document,e)}createAttributeElement(e,t,n={}){const o=new Jn(this.document,e,t);return typeof n.priority=="number"&&(o._priority=n.priority),n.id&&(o._id=n.id),n.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),o}createContainerElement(e,t,n={},o={}){let i=null;(0,kt.Z)(n)?o=n:i=n;const a=new kn(this.document,e,t,i);return o.renderUnsafeAttributes&&a._unsafeAttributesToRender.push(...o.renderUnsafeAttributes),a}createEditableElement(e,t,n={}){const o=new Bn(this.document,e,t);return n.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),o}createEmptyElement(e,t,n={}){const o=new yr(this.document,e,t);return n.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),o}createUIElement(e,t,n){const o=new go(this.document,e,t);return n&&(o.render=n),o}createRawElement(e,t,n,o={}){const i=new b(this.document,e,t);return n&&(i.render=n),o.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...o.renderUnsafeAttributes),i}setAttribute(e,t,n){n._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,n){(0,kt.Z)(e)&&n===void 0?t._setStyle(e):n._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,n){n._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof we?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new T.Bb("view-writer-break-non-container-element",this.document);if(!t.parent)throw new T.Bb("view-writer-break-root",this.document);if(e.isAtStart)return we._createBefore(t);if(!e.isAtEnd){const n=t._clone(!1);this.insert(we._createAfter(t),n);const o=new $e(e,we._createAt(t,"end")),i=new we(n,0);this.move(o,i)}return we._createAfter(t)}mergeAttributes(e){const t=e.offset,n=e.parent;if(n.is("$text"))return e;if(n.is("attributeElement")&&n.childCount===0){const a=n.parent,_=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new we(a,_))}const o=n.getChild(t-1),i=n.getChild(t);if(!o||!i)return e;if(o.is("$text")&&i.is("$text"))return Je(o,i);if(o.is("attributeElement")&&i.is("attributeElement")&&o.isSimilar(i)){const a=o.childCount;return o._appendChild(i.getChildren()),i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new we(o,a))}return e}mergeContainers(e){const t=e.nodeBefore,n=e.nodeAfter;if(!t||!n||!t.is("containerElement")||!n.is("containerElement"))throw new T.Bb("view-writer-merge-containers-invalid-position",this.document);const o=t.getChild(t.childCount-1),i=o instanceof je?we._createAt(o,"end"):we._createAt(t,"end");return this.move($e._createIn(n),we._createAt(t,"end")),this.remove($e._createOn(n)),i}insert(e,t){t=(0,T.TW)(t)?[...t]:[t],Xt(t,this.document);const n=t.reduce((a,_)=>{const S=a[a.length-1],H=!_.is("uiElement");return!S||S.breakAttributes!=H?a.push({breakAttributes:H,nodes:[_]}):S.nodes.push(_),a},[]);let o=null,i=e;for(const{nodes:a,breakAttributes:_}of n){const S=this._insertNodes(i,a,_);o||(o=S.start),i=S.end}return o?new $e(o,i):new $e(e)}remove(e){const t=e instanceof $e?e:$e._createOn(e);if(Lt(t,this.document),t.isCollapsed)return new y(this.document);const{start:n,end:o}=this._breakAttributesRange(t,!0),i=n.parent,a=o.offset-n.offset,_=i._removeChildren(n.offset,a);for(const H of _)this._removeFromClonedElementsGroup(H);const S=this.mergeAttributes(n);return t.start=S,t.end=S.clone(),new y(this.document,_)}clear(e,t){Lt(e,this.document);const n=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const o of n){const i=o.item;let a;if(i.is("element")&&t.isSimilar(i))a=$e._createOn(i);else if(!o.nextPosition.isAfter(e.start)&&i.is("$textProxy")){const _=i.getAncestors().find(S=>S.is("element")&&t.isSimilar(S));_&&(a=$e._createIn(_))}a&&(a.end.isAfter(e.end)&&(a.end=e.end),a.start.isBefore(e.start)&&(a.start=e.start),this.remove(a))}}move(e,t){let n;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);const o=t.parent,i=o.childCount;e=this._breakAttributesRange(e,!0),n=this.remove(e),t.offset+=o.childCount-i}else n=this.remove(e);return this.insert(t,n)}wrap(e,t){if(!(t instanceof Jn))throw new T.Bb("view-writer-wrap-invalid-attribute",this.document);if(Lt(e,this.document),e.isCollapsed){let n=e.start;n.parent.is("element")&&!Y(n.parent)&&(n=n.getLastMatchingPosition(i=>i.item.is("uiElement"))),n=this._wrapPosition(n,t);const o=this.document.selection;return o.isCollapsed&&o.getFirstPosition().isEqual(e.start)&&this.setSelection(n),new $e(n)}else return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof Jn))throw new T.Bb("view-writer-unwrap-invalid-attribute",this.document);if(Lt(e,this.document),e.isCollapsed)return e;const{start:n,end:o}=this._breakAttributesRange(e,!0),i=n.parent,a=this._unwrapChildren(i,n.offset,o.offset,t),_=this.mergeAttributes(a.start);_.isEqual(a.start)||a.end.offset--;const S=this.mergeAttributes(a.end);return new $e(_,S)}rename(e,t){const n=new kn(this.document,e,t.getAttributes());return this.insert(we._createAfter(t),n),this.move($e._createIn(t),we._createAt(n,0)),this.remove($e._createOn(t)),n}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return we._createAt(e,t)}createPositionAfter(e){return we._createAfter(e)}createPositionBefore(e){return we._createBefore(e)}createRange(e,t){return new $e(e,t)}createRangeOn(e){return $e._createOn(e)}createRangeIn(e){return $e._createIn(e)}createSelection(...e){return new xn(...e)}createSlot(e="children"){if(!this._slotFactory)throw new T.Bb("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,n){let o;if(n?o=re(e):o=e.parent.is("$text")?e.parent.parent:e.parent,!o)throw new T.Bb("view-writer-invalid-position-container",this.document);let i;n?i=this._breakAttributes(e,!0):i=e.parent.is("$text")?Ce(e):e;const a=o._insertChild(i.offset,t);for(const X of t)this._addToClonedElementsGroup(X);const _=i.getShiftedBy(a),S=this.mergeAttributes(i);S.isEqual(i)||_.offset--;const H=this.mergeAttributes(_);return new $e(S,H)}_wrapChildren(e,t,n,o){let i=t;const a=[];for(;i<n;){const S=e.getChild(i),H=S.is("$text"),X=S.is("attributeElement");if(X&&this._wrapAttributeElement(o,S))a.push(new we(e,i));else if(H||!X||ue(o,S)){const se=o._clone();S._remove(),se._appendChild(S),e._insertChild(i,se),this._addToClonedElementsGroup(se),a.push(new we(e,i))}else this._wrapChildren(S,0,S.childCount,o);i++}let _=0;for(const S of a){if(S.offset-=_,S.offset==t)continue;this.mergeAttributes(S).isEqual(S)||(_++,n--)}return $e._createFromParentsAndOffsets(e,t,e,n)}_unwrapChildren(e,t,n,o){let i=t;const a=[];for(;i<n;){const S=e.getChild(i);if(!S.is("attributeElement")){i++;continue}if(S.isSimilar(o)){const H=S.getChildren(),X=S.childCount;S._remove(),e._insertChild(i,H),this._removeFromClonedElementsGroup(S),a.push(new we(e,i),new we(e,i+X)),i+=X,n+=X-1;continue}if(this._unwrapAttributeElement(o,S)){a.push(new we(e,i),new we(e,i+1)),i++;continue}this._unwrapChildren(S,0,S.childCount,o),i++}let _=0;for(const S of a){if(S.offset-=_,S.offset==t||S.offset==n)continue;this.mergeAttributes(S).isEqual(S)||(_++,n--)}return $e._createFromParentsAndOffsets(e,t,e,n)}_wrapRange(e,t){const{start:n,end:o}=this._breakAttributesRange(e,!0),i=n.parent,a=this._wrapChildren(i,n.offset,o.offset,t),_=this.mergeAttributes(a.start);_.isEqual(a.start)||a.end.offset--;const S=this.mergeAttributes(a.end);return new $e(_,S)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return ye(e.clone());e.parent.is("$text")&&(e=Ce(e));const n=this.createAttributeElement("_wrapPosition-fake-element");n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,e.parent._insertChild(e.offset,n);const o=new $e(e,e.getShiftedBy(1));this.wrap(o,t);const i=new we(n.parent,n.index);n._remove();const a=i.nodeBefore,_=i.nodeAfter;return a instanceof je&&_ instanceof je?Je(a,_):ye(i)}_wrapAttributeElement(e,t){if(!jt(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const n of e.getAttributeKeys())if(!(n==="class"||n==="style")&&t.hasAttribute(n)&&t.getAttribute(n)!==e.getAttribute(n))return!1;for(const n of e.getStyleNames())if(t.hasStyle(n)&&t.getStyle(n)!==e.getStyle(n))return!1;for(const n of e.getAttributeKeys())n==="class"||n==="style"||t.hasAttribute(n)||this.setAttribute(n,e.getAttribute(n),t);for(const n of e.getStyleNames())t.hasStyle(n)||this.setStyle(n,e.getStyle(n),t);for(const n of e.getClassNames())t.hasClass(n)||this.addClass(n,t);return!0}_unwrapAttributeElement(e,t){if(!jt(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const n of e.getAttributeKeys())if(!(n==="class"||n==="style")&&(!t.hasAttribute(n)||t.getAttribute(n)!==e.getAttribute(n)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const n of e.getStyleNames())if(!t.hasStyle(n)||t.getStyle(n)!==e.getStyle(n))return!1;for(const n of e.getAttributeKeys())n==="class"||n==="style"||this.removeAttribute(n,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){const n=e.start,o=e.end;if(Lt(e,this.document),e.isCollapsed){const S=this._breakAttributes(e.start,t);return new $e(S,S)}const i=this._breakAttributes(o,t),a=i.parent.childCount,_=this._breakAttributes(n,t);return i.offset+=i.parent.childCount-a,new $e(_,i)}_breakAttributes(e,t=!1){const n=e.offset,o=e.parent;if(e.parent.is("emptyElement"))throw new T.Bb("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new T.Bb("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new T.Bb("view-writer-cannot-break-raw-element",this.document);if(!t&&o.is("$text")&&Vn(o.parent)||Vn(o))return e.clone();if(o.is("$text"))return this._breakAttributes(Ce(e),t);const i=o.childCount;if(n==i){const a=new we(o.parent,o.index+1);return this._breakAttributes(a,t)}else if(n===0){const a=new we(o.parent,o.index);return this._breakAttributes(a,t)}else{const a=o.index+1,_=o._clone();o.parent._insertChild(a,_),this._addToClonedElementsGroup(_);const S=o.childCount-n,H=o._removeChildren(n,S);_._appendChild(H);const X=new we(o.parent,a);return this._breakAttributes(X,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const o of e.getChildren())this._addToClonedElementsGroup(o);const t=e.id;if(!t)return;let n=this._cloneGroups.get(t);n||(n=new Set,this._cloneGroups.set(t,n)),n.add(e),e._clonesGroup=n}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const o of e.getChildren())this._removeFromClonedElementsGroup(o);const t=e.id;if(!t)return;const n=this._cloneGroups.get(t);n&&n.delete(e)}}function Y(r){return Array.from(r.getChildren()).some(e=>!e.is("uiElement"))}function re(r){let e=r.parent;for(;!Vn(e);){if(!e)return;e=e.parent}return e}function ue(r,e){return r.priority<e.priority?!0:r.priority>e.priority?!1:r.getIdentity()<e.getIdentity()}function ye(r){const e=r.nodeBefore;if(e&&e.is("$text"))return new we(e,e.data.length);const t=r.nodeAfter;return t&&t.is("$text")?new we(t,0):r}function Ce(r){if(r.offset==r.parent.data.length)return new we(r.parent.parent,r.parent.index+1);if(r.offset===0)return new we(r.parent.parent,r.parent.index);const e=r.parent.data.slice(r.offset);return r.parent._data=r.parent.data.slice(0,r.offset),r.parent.parent._insertChild(r.parent.index+1,new je(r.root.document,e)),new we(r.parent.parent,r.parent.index+1)}function Je(r,e){const t=r.data.length;return r._data+=e.data,e._remove(),new we(r,t)}const qe=[je,Jn,kn,yr,b,go];function Xt(r,e){for(const t of r){if(!qe.some(n=>t instanceof n))throw new T.Bb("view-writer-insert-invalid-node-type",e);t.is("$text")||Xt(t.getChildren(),e)}}function Vn(r){return r&&(r.is("containerElement")||r.is("documentFragment"))}function Lt(r,e){const t=re(r.start),n=re(r.end);if(!t||!n||t!==n)throw new T.Bb("view-writer-invalid-range-container",e)}function jt(r,e){return r.id===null&&e.id===null}const Wr=r=>r.createTextNode("\xA0"),lo=r=>{const e=r.createElement("span");return e.dataset.ckeFiller="true",e.innerText="\xA0",e},A=r=>{const e=r.createElement("br");return e.dataset.ckeFiller="true",e},l=7,d="\u2060".repeat(l);function g(r){return typeof r=="string"?r.substr(0,l)===d:(0,T.Gs)(r)&&r.data.substr(0,l)===d}function w(r){return r.data.length==l&&g(r)}function k(r){const e=typeof r=="string"?r:r.data;return g(r)?e.slice(l):e}function I(r){r.document.on("arrowKey",N,{priority:"low"})}function N(r,e){if(e.keyCode==T.Do.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const n=t.getRangeAt(0).startContainer,o=t.getRangeAt(0).startOffset;g(n)&&o<=l&&t.collapse(n,0)}}}var K=u(9379),ee={};ee.styleTagTransform=q(),ee.setAttributes=D(),ee.insert=B().bind(null,"head"),ee.domAPI=L(),ee.insertStyleElement=W();var me=V()(K.Z,ee),ve=K.Z&&K.Z.locals?K.Z.locals:void 0;class Ve extends(0,T.Re)(){constructor(e,t){super(),this.domDocuments=new Set,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this._inlineFiller=null,this._fakeSelectionContainer=null,this.domConverter=e,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),T.OB.isBlink&&!T.OB.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()}),this.set("isComposing",!1),this.on("change:isComposing",()=>{this.isComposing||this.render()})}markToSync(e,t){if(e==="text")this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if(e==="attributes")this.markedAttributes.add(t);else if(e==="children")this.markedChildren.add(t);else{const n=e;throw new T.Bb("view-renderer-unknown-type",this)}}}render(){if(this.isComposing&&!T.OB.isAndroid)return;let e=null;const t=T.OB.isBlink&&!T.OB.isAndroid?!this.isSelecting:!0;for(const n of this.markedChildren)this._updateChildrenMappings(n);t?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=we._createBefore(e.parent)));for(const n of this.markedAttributes)this._updateAttrs(n);for(const n of this.markedChildren)this._updateChildren(n,{inlineFillerPosition:e});for(const n of this.markedTexts)!this.markedChildren.has(n.parent)&&this.domConverter.mapViewToDom(n.parent)&&this._updateText(n,{inlineFillerPosition:e});if(t)if(e){const n=this.domConverter.viewPositionToDom(e),o=n.parent.ownerDocument;g(n.parent)?this._inlineFiller=n.parent:this._inlineFiller=_t(o,n.parent,n.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){if(!this.domConverter.mapViewToDom(e))return;const n=Array.from(this.domConverter.mapViewToDom(e).childNodes),o=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),i=this._diffNodeLists(n,o),a=this._findUpdateActions(i,n,o,rn);if(a.indexOf("update")!==-1){const _={equal:0,insert:0,delete:0};for(const S of a)if(S==="update"){const H=_.equal+_.insert,X=_.equal+_.delete,se=e.getChild(H);se&&!(se.is("uiElement")||se.is("rawElement"))&&this._updateElementMappings(se,n[X]),(0,T.Od)(o[H]),_.equal++}else _[S]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?we._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&(0,T.Gs)(t.parent)&&g(t.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!g(e))throw new T.Bb("view-renderer-filler-was-lost",this);w(e)?e.remove():e.data=e.data.substr(l),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=e.parent,n=e.offset;if(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!ot(t)||n===t.getFillerOffset())return!1;const o=e.nodeBefore,i=e.nodeAfter;return!(o instanceof je||i instanceof je||T.OB.isAndroid&&(o||i))}_updateText(e,t){const n=this.domConverter.findCorrespondingDomText(e);let i=this.domConverter.viewToDom(e).data;const a=t.inlineFillerPosition;a&&a.parent==e.parent&&a.offset==e.index&&(i=d+i),Tr(n,i)}_updateAttrs(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const n=Array.from(t.attributes).map(i=>i.name),o=e.getAttributeKeys();for(const i of o)this.domConverter.setDomElementAttribute(t,i,e.getAttribute(i),e);for(const i of n)e.hasAttribute(i)||this.domConverter.removeDomElementAttribute(t,i)}_updateChildren(e,t){const n=this.domConverter.mapViewToDom(e);if(!n)return;if(T.OB.isAndroid){let se=null;for(const Se of Array.from(n.childNodes)){if(se&&(0,T.Gs)(se)&&(0,T.Gs)(Se)){n.normalize();break}se=Se}}const o=t.inlineFillerPosition,i=n.childNodes,a=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));o&&o.parent===e&&_t(n.ownerDocument,a,o.offset);const _=this._diffNodeLists(i,a),S=this._findUpdateActions(_,i,a,An);let H=0;const X=new Set;for(const se of S)se==="delete"?(X.add(i[H]),(0,T.Od)(i[H])):(se==="equal"||se==="update")&&H++;H=0;for(const se of S)se==="insert"?((0,T.ZQ)(n,H,a[H]),H++):se==="update"?(Tr(i[H],a[H].data),H++):se==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(a[H])),H++);for(const se of X)se.parentNode||this.domConverter.unbindDomElement(se)}_diffNodeLists(e,t){return e=cr(e,this._fakeSelectionContainer),(0,T.Hg)(e,t,Xn.bind(null,this.domConverter))}_findUpdateActions(e,t,n,o){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let i=[],a=[],_=[];const S={equal:0,insert:0,delete:0};for(const H of e)H==="insert"?_.push(n[S.equal+S.insert]):H==="delete"?a.push(t[S.equal+S.delete]):(i=i.concat((0,T.Hg)(a,_,o).map(X=>X==="equal"?"update":X)),i.push("equal"),a=[],_=[]),S[H]++;return i.concat((0,T.Hg)(a,_,o).map(H=>H==="equal"?"update":H))}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const t of e.getChildren())this._markDescendantTextToSync(t)}}_updateSelection(){if(T.OB.isBlink&&!T.OB.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&T.OB.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){const t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=Yn(t));const n=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(n,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!n.parentElement||n.parentElement!=e)&&e.appendChild(n),n.textContent=this.selection.fakeSelectionLabel||"\xA0";const o=t.getSelection(),i=t.createRange();o.removeAllRanges(),i.selectNodeContents(n),o.addRange(i)}_updateDomSelection(e){const t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;const n=this.domConverter.viewPositionToDom(this.selection.anchor),o=this.domConverter.viewPositionToDom(this.selection.focus);t.setBaseAndExtent(n.parent,n.offset,o.parent,o.offset),T.OB.isGecko&&Er(o,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t)||!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){const t=this._fakeSelectionContainer,n=e.ownerDocument.getSelection();return!t||t.parentElement!==e||n.anchorNode!==t&&!t.contains(n.anchorNode)?!0:t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const t=e.getSelection();if(t.rangeCount){const n=e.activeElement,o=this.domConverter.mapDomToView(n);n&&o&&t.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function ot(r){if(r.getAttribute("contenteditable")=="false")return!1;const e=r.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function _t(r,e,t){const n=e instanceof Array?e:e.childNodes,o=n[t];if((0,T.Gs)(o))return o.data=d+o.data,o;{const i=r.createTextNode(d);return Array.isArray(e)?n.splice(t,0,i):(0,T.ZQ)(e,t,i),i}}function rn(r,e){return(0,T.UG)(r)&&(0,T.UG)(e)&&!(0,T.Gs)(r)&&!(0,T.Gs)(e)&&!(0,T.C3)(r)&&!(0,T.C3)(e)&&r.tagName.toLowerCase()===e.tagName.toLowerCase()}function An(r,e){return(0,T.UG)(r)&&(0,T.UG)(e)&&(0,T.Gs)(r)&&(0,T.Gs)(e)}function Xn(r,e,t){return e===t?!0:(0,T.Gs)(e)&&(0,T.Gs)(t)?e.data===t.data:!!(r.isBlockFiller(e)&&r.isBlockFiller(t))}function Er(r,e){const t=r.parent;if(t.nodeType!=Node.ELEMENT_NODE||r.offset!=t.childNodes.length-1)return;const n=t.childNodes[r.offset];n&&n.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function cr(r,e){const t=Array.from(r);return t.length==0||!e||t[t.length-1]==e&&t.pop(),t}function Yn(r){const e=r.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent="\xA0",e}function Tr(r,e){const t=r.data;if(t==e)return;const n=(0,T.HZ)(t,e);for(const o of n)o.type==="insert"?r.insertData(o.index,o.values.join("")):r.deleteData(o.index,o.howMany)}const Fo=A(T.global.document),Ao=Wr(T.global.document),So=lo(T.global.document),Qr="data-ck-unsafe-attribute-",zo="data-ck-unsafe-element";class uo{constructor(e,{blockFillerMode:t,renderingMode:n="editing"}={}){this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new Ht,this._inlineObjectElementMatcher=new Ht,this.document=e,this.renderingMode=n,this.blockFillerMode=t||(n==="editing"?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?T.global.document:T.global.document.implementation.createHTMLDocument("")}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new xn(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const n of Array.from(e.children))this.unbindDomElement(n)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,n){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:n==="img"&&(e==="src"||e==="srcset")||n==="source"&&e==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data"){e.innerHTML=t;return}const n=new DOMParser().parseFromString(t,"text/html"),o=n.createDocumentFragment(),i=n.body.childNodes;for(;i.length>0;)o.appendChild(i[0]);const a=n.createTreeWalker(o,NodeFilter.SHOW_ELEMENT),_=[];let S;for(;S=a.nextNode();)_.push(S);for(const H of _){for(const se of H.getAttributeNames())this.setDomElementAttribute(H,se,H.getAttribute(se));const X=H.tagName.toLowerCase();this._shouldRenameElement(X)&&(ne(X),H.replaceWith(this._createReplacementDomElement(X,H)))}for(;e.firstChild;)e.firstChild.remove();e.append(o)}viewToDom(e,t={}){if(e.is("$text")){const n=this._processDataFromViewText(e);return this._domDocument.createTextNode(n)}else{if(this.mapViewToDom(e))return this.mapViewToDom(e);let n;if(e.is("documentFragment"))n=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(n,e);else{if(e.is("uiElement"))return e.name==="$comment"?n=this._domDocument.createComment(e.getCustomProperty("$rawContent")):n=e.render(this._domDocument,this),t.bind&&this.bindElements(n,e),n;this._shouldRenameElement(e.name)?(ne(e.name),n=this._createReplacementDomElement(e.name)):e.hasAttribute("xmlns")?n=this._domDocument.createElementNS(e.getAttribute("xmlns"),e.name):n=this._domDocument.createElement(e.name),e.is("rawElement")&&e.render(n,this),t.bind&&this.bindElements(n,e);for(const o of e.getAttributeKeys())this.setDomElementAttribute(n,o,e.getAttribute(o),e)}if(t.withChildren!==!1)for(const o of this.viewChildrenToDom(e,t))n.appendChild(o);return n}}setDomElementAttribute(e,t,n,o){const i=this.shouldRenderAttribute(t,n,e.tagName.toLowerCase())||o&&o.shouldRenderUnsafeAttribute(t);if(i||(0,T.KE)("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:n}),!(0,T.$b)(t)){(0,T.KE)("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:n});return}e.hasAttribute(t)&&!i?e.removeAttribute(t):e.hasAttribute(Qr+t)&&i&&e.removeAttribute(Qr+t),e.setAttribute(i?t:Qr+t,n)}removeDomElementAttribute(e,t){t!=zo&&(e.removeAttribute(t),e.removeAttribute(Qr+t))}*viewChildrenToDom(e,t={}){const n=e.getFillerOffset&&e.getFillerOffset();let o=0;for(const i of e.getChildren()){n===o&&(yield this._getBlockFiller());const a=i.is("element")&&!!i.getCustomProperty("dataPipeline:transparentRendering")&&!(0,T.Ps)(i.getAttributes());a&&this.renderingMode=="data"?yield*this.viewChildrenToDom(i,t):(a&&(0,T.KE)("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:i}),yield this.viewToDom(i,t)),o++}n===o&&(yield this._getBlockFiller())}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),n=this.viewPositionToDom(e.end),o=this._domDocument.createRange();return o.setStart(t.parent,t.offset),o.setEnd(n.parent,n.offset),o}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const n=this.findCorrespondingDomText(t);if(!n)return null;let o=e.offset;return g(n)&&(o+=l),{parent:n,offset:o}}else{let n,o,i;if(e.offset===0){if(n=this.mapViewToDom(t),!n)return null;i=n.childNodes[0]}else{const _=e.nodeBefore;if(o=_.is("$text")?this.findCorrespondingDomText(_):this.mapViewToDom(_),!o)return null;n=o.parentNode,i=o.nextSibling}if((0,T.Gs)(i)&&g(i))return{parent:i,offset:l};const a=o?(0,T.cq)(o)+1:0;return{parent:n,offset:a}}}domToView(e,t={}){const n=[],o=this._domToView(e,t,n),i=o.next().value;return!i||(o.next(),this._processDomInlineNodes(null,n,t),i.is("$text")&&i.data.length==0)?null:i}*domChildrenToView(e,t={},n=[]){for(let o=0;o<e.childNodes.length;o++){const i=e.childNodes[o],a=this._domToView(i,t,n),_=a.next().value;_!==null&&(this._isBlockViewElement(_)&&this._processDomInlineNodes(e,n,t),yield _,a.next())}this._processDomInlineNodes(e,n,t)}domSelectionToView(e){if(e.rangeCount===1){let o=e.getRangeAt(0).startContainer;(0,T.Gs)(o)&&(o=o.parentNode);const i=this.fakeSelectionToView(o);if(i)return i}const t=this.isDomSelectionBackward(e),n=[];for(let o=0;o<e.rangeCount;o++){const i=e.getRangeAt(o),a=this.domRangeToView(i);a&&n.push(a)}return new xn(n,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),n=this.domPositionToView(e.endContainer,e.endOffset);return t&&n?new $e(t,n):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,(0,T.cq)(e));const n=this.mapDomToView(e);if(n&&(n.is("uiElement")||n.is("rawElement")))return we._createBefore(n);if((0,T.Gs)(e)){if(w(e))return this.domPositionToView(e.parentNode,(0,T.cq)(e));const o=this.findCorrespondingViewText(e);let i=t;return o?(g(e)&&(i-=l,i=i<0?0:i),new we(o,i)):null}else{if(t===0){const o=this.mapDomToView(e);if(o)return new we(o,0)}else{const o=e.childNodes[t-1];if((0,T.Gs)(o)&&w(o)||o&&this.isBlockFiller(o))return this.domPositionToView(o.parentNode,(0,T.cq)(o));const i=(0,T.Gs)(o)?this.findCorrespondingViewText(o):this.mapDomToView(o);if(i&&i.parent)return new we(i.parent,i.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(w(e))return null;const t=this.getHostViewElement(e);if(t)return t;const n=e.previousSibling;if(n){if(!this.isElement(n))return null;const o=this.mapDomToView(n);if(o){const i=o.nextSibling;return i instanceof je?i:null}}else{const o=this.mapDomToView(e.parentNode);if(o){const i=o.getChild(0);return i instanceof je?i:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:n,scrollY:o}=T.global.window,i=[];E(t,a=>{const{scrollLeft:_,scrollTop:S}=a;i.push([_,S])}),t.focus(),E(t,a=>{const[_,S]=i.shift();a.scrollLeft=_,a.scrollTop=S}),T.global.window.scrollTo(n,o)}}_clearDomSelection(){const e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;const t=e.ownerDocument.defaultView.getSelection(),n=this.domSelectionToView(t);n&&n.rangeCount>0&&t.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(Fo):e.tagName==="BR"&&U(e,this.blockElements)&&e.parentNode.childNodes.length===1?!0:e.isEqualNode(So)||x(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch(o){return!1}const n=t.collapsed;return t.detach(),n}getHostViewElement(e){const t=(0,T.dk)(e);for(t.pop();t.length;){const n=t.pop(),o=this._domToViewMapping.get(n);if(o&&(o.is("uiElement")||o.is("rawElement")))return o}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return Wr(this._domDocument);case"markedNbsp":return lo(this._domDocument);case"br":return A(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if((0,T.Gs)(e)&&g(e)&&t<l||this.isElement(e)&&g(e.childNodes[t]))return!1;const n=this.mapDomToView(e);return!(n&&(n.is("uiElement")||n.is("rawElement")))}*_domToView(e,t,n){if(this.isBlockFiller(e))return null;const o=this.getHostViewElement(e);if(o)return o;if((0,T.C3)(e)&&t.skipComments)return null;if((0,T.Gs)(e)){if(w(e))return null;{const i=e.data;if(i==="")return null;const a=new je(this.document,i);return n.push(a),a}}else{let i=this.mapDomToView(e);if(i)return this._isInlineObjectElement(i)&&n.push(i),i;if(this.isDocumentFragment(e))i=new y(this.document),t.bind&&this.bindDocumentFragments(e,i);else{i=this._createViewElement(e,t),t.bind&&this.bindElements(e,i);const _=e.attributes;if(_)for(let S=_.length,H=0;H<S;H++)i._setAttribute(_[H].name,_[H].value);if(this._isViewElementWithRawContent(i,t))return i._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(i)||n.push(i),i;if((0,T.C3)(e))return i._setCustomProperty("$rawContent",e.data),i}yield i;const a=[];if(t.withChildren!==!1)for(const _ of this.domChildrenToView(e,t,a))i._appendChild(_);if(this._isInlineObjectElement(i))n.push(i);else for(const _ of a)n.push(_)}}_processDomInlineNodes(e,t,n){if(!t.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let o=!1;for(let i=0;i<t.length;i++){const a=t[i];if(!a.is("$text")){o=!1;continue}let _,S=!1;if(Wo(a,this.preElements))_=k(a.data);else{_=a.data.replace(/[ \n\t\r]{1,}/g," "),S=/[^\S\u00A0]/.test(_.charAt(_.length-1));const H=i>0?t[i-1]:null,X=i+1<t.length?t[i+1]:null,se=!H||H.is("element")&&H.name=="br"||o,Se=X?!1:!g(a.data);n.withChildren!==!1&&(se&&(_=_.replace(/^ /,"")),Se&&(_=_.replace(/ $/,""))),_=k(_),_=_.replace(/ \u00A0/g,"  ");const Ze=X&&X.is("element")&&X.name!="br",at=X&&X.is("$text")&&X.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(_)||!X||Ze||at)&&(_=_.replace(/\u00A0$/," ")),(se||H&&H.is("element")&&H.name!="br")&&(_=_.replace(/^\u00A0/," "))}_.length==0&&a.parent?(a._remove(),t.splice(i,1),i--):(a._data=_,o=S)}t.length=0}_processDataFromViewText(e){let t=e.data;if(e.getAncestors().some(n=>this.preElements.includes(n.name)))return t;if(t.charAt(0)==" "){const n=this._getTouchingInlineViewNode(e,!1);(n&&n.is("$textProxy")&&this._nodeEndsWithSpace(n)||!n)&&(t="\xA0"+t.substr(1))}if(t.charAt(t.length-1)==" "){const n=this._getTouchingInlineViewNode(e,!0),o=n&&n.is("$textProxy")&&n.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!n||o)&&(t=t.substr(0,t.length-1)+"\xA0")}return t.replace(/ {2}/g," \xA0")}_nodeEndsWithSpace(e){if(e.getAncestors().some(n=>this.preElements.includes(n.name)))return!1;const t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_getTouchingInlineViewNode(e,t){const n=new Gn({startPosition:t?we._createAfter(e):we._createBefore(e),direction:t?"forward":"backward"});for(const o of n){if(o.item.is("element","br"))return null;if(this._isInlineObjectElement(o.item))return o.item;if(o.item.is("containerElement"))return null;if(o.item.is("$textProxy"))return o.item}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return e.is("element")?e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e):!1}_createViewElement(e,t){if((0,T.C3)(e))return new go(this.document,"$comment");const n=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new Ot(this.document,n)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){const t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){const n=this._domDocument.createElement("span");if(n.setAttribute(zo,e),t){for(;t.firstChild;)n.appendChild(t.firstChild);for(const o of t.getAttributeNames())n.setAttribute(o,t.getAttribute(o))}return n}}function Wo(r,e){return r.getAncestors().some(t=>t.is("element")&&e.includes(t.name))}function E(r,e){let t=r;for(;t;)e(t),t=t.parentElement}function x(r,e){return r.isEqualNode(Ao)&&U(r,e)&&r.parentNode.childNodes.length===1}function U(r,e){const t=r.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function ne(r){r==="script"&&(0,T.KE)("domconverter-unsafe-script-element-detected"),r==="style"&&(0,T.KE)("domconverter-unsafe-style-element-detected")}class Ae extends(0,T.Xu)(){constructor(e){super(),this._isEnabled=!1,this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}var tt=u(43670);class lt{constructor(e,t,n){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,(0,tt.Z)(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class rt extends Ae{constructor(){super(...arguments),this.useCapture=!1}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(n=>{this.listenTo(e,n,(o,i)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(i.target)&&this.onDomEvent(i)},{useCapture:this.useCapture})})}stopObserving(e){this.stopListening(e)}fire(e,t,n){this.isEnabled&&this.document.fire(e,new lt(this.view,t,n))}}class Zt extends rt{constructor(){super(...arguments),this.domEventType=["keydown","keyup"]}onDomEvent(e){const t={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return(0,T.Cq)(this)}};this.fire(e.type,e,t)}}var Ft=u(67811);class $o extends Ae{constructor(e){super(e),this._fireSelectionChangeDoneDebounced=(0,Ft.Z)(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){const e=this.document;e.on("arrowKey",(t,n)=>{e.selection.isFake&&this.isEnabled&&n.preventDefault()},{context:"$capture"}),e.on("arrowKey",(t,n)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(n.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const t=this.document.selection,n=new xn(t.getRanges(),{backward:t.isBackward,fake:!1});(e==T.Do.arrowleft||e==T.Do.arrowup)&&n.setTo(n.getFirstPosition()),(e==T.Do.arrowright||e==T.Do.arrowdown)&&n.setTo(n.getLastPosition());const o={oldSelection:t,newSelection:n,domSelection:null};this.document.fire("selectionChange",o),this._fireSelectionChangeDoneDebounced(o)}}var ho="__lodash_hash_undefined__";function jr(r){return this.__data__.set(r,ho),this}var Oo=jr;function jo(r){return this.__data__.has(r)}var mo=jo;function on(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new Xe.Z;++e<t;)this.add(r[e])}on.prototype.add=on.prototype.push=Oo,on.prototype.has=mo;var vn=on;function Qn(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1}var qr=Qn;function bo(r,e){return r.has(e)}var Xi=bo,ui=1,hi=2;function ei(r,e,t,n,o,i){var a=t&ui,_=r.length,S=e.length;if(_!=S&&!(a&&S>_))return!1;var H=i.get(r),X=i.get(e);if(H&&X)return H==e&&X==r;var se=-1,Se=!0,Ze=t&hi?new vn:void 0;for(i.set(r,e),i.set(e,r);++se<_;){var at=r[se],Ut=e[se];if(n)var er=a?n(Ut,at,se,e,r,i):n(at,Ut,se,r,e,i);if(er!==void 0){if(er)continue;Se=!1;break}if(Ze){if(!qr(e,function(tr,qo){if(!Xi(Ze,qo)&&(at===tr||o(at,tr,t,n,i)))return Ze.push(qo)})){Se=!1;break}}else if(!(at===Ut||o(at,Ut,t,n,i))){Se=!1;break}}return i.delete(r),i.delete(e),Se}var Ro=ei,Yi=u(16299);function Cs(r){var e=-1,t=Array(r.size);return r.forEach(function(n,o){t[++e]=[o,n]}),t}var xi=Cs;function Ai(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}var lr=Ai,fi=1,Si=2,Qi="[object Boolean]",ti="[object Date]",Zo="[object Error]",xs="[object Map]",As="[object Number]",Oi="[object RegExp]",hn="[object Set]",gi="[object String]",qi="[object Symbol]",es="[object ArrayBuffer]",ts="[object DataView]",Ri=gn.Z?gn.Z.prototype:void 0,_i=Ri?Ri.valueOf:void 0;function ns(r,e,t,n,o,i,a){switch(t){case ts:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case es:return!(r.byteLength!=e.byteLength||!i(new Yi.Z(r),new Yi.Z(e)));case Qi:case ti:case As:return(0,_r.Z)(+r,+e);case Zo:return r.name==e.name&&r.message==e.message;case Oi:case gi:return r==e+"";case xs:var _=xi;case hn:var S=n&fi;if(_||(_=lr),r.size!=e.size&&!S)return!1;var H=a.get(r);if(H)return H==e;n|=Si,a.set(r,e);var X=Ro(_(r),_(e),n,o,i,a);return a.delete(r),X;case qi:if(_i)return _i.call(r)==_i.call(e)}return!1}var rs=ns,Mi=u(38366),ni=1,os=Object.prototype,is=os.hasOwnProperty;function ss(r,e,t,n,o,i){var a=t&ni,_=(0,Mi.Z)(r),S=_.length,H=(0,Mi.Z)(e),X=H.length;if(S!=X&&!a)return!1;for(var se=S;se--;){var Se=_[se];if(!(a?Se in e:is.call(e,Se)))return!1}var Ze=i.get(r),at=i.get(e);if(Ze&&at)return Ze==e&&at==r;var Ut=!0;i.set(r,e),i.set(e,r);for(var er=a;++se<S;){Se=_[se];var tr=r[Se],qo=e[Se];if(n)var Ra=a?n(qo,tr,Se,e,r,i):n(tr,qo,Se,r,e,i);if(!(Ra===void 0?tr===qo||o(tr,qo,t,n,i):Ra)){Ut=!1;break}er||(er=Se=="constructor")}if(Ut&&!er){var $i=r.constructor,Gi=e.constructor;$i!=Gi&&"constructor"in r&&"constructor"in e&&!(typeof $i=="function"&&$i instanceof $i&&typeof Gi=="function"&&Gi instanceof Gi)&&(Ut=!1)}return i.delete(r),i.delete(e),Ut}var as=ss,Di=u(25922),Ii=1,pi="[object Arguments]",Bi="[object Array]",Go="[object Object]",ri=Object.prototype,Mo=ri.hasOwnProperty;function Ss(r,e,t,n,o,i){var a=(0,Ye.Z)(r),_=(0,Ye.Z)(e),S=a?Bi:(0,Di.Z)(r),H=_?Bi:(0,Di.Z)(e);S=S==pi?Go:S,H=H==pi?Go:H;var X=S==Go,se=H==Go,Se=S==H;if(Se&&(0,Un.Z)(r)){if(!(0,Un.Z)(e))return!1;a=!0,X=!1}if(Se&&!X)return i||(i=new Ct.Z),a||(0,Gt.Z)(r)?Ro(r,e,t,n,o,i):rs(r,e,S,t,n,o,i);if(!(t&Ii)){var Ze=X&&Mo.call(r,"__wrapped__"),at=se&&Mo.call(e,"__wrapped__");if(Ze||at){var Ut=Ze?r.value():r,er=at?e.value():e;return i||(i=new Ct.Z),o(Ut,er,t,n,i)}}return Se?(i||(i=new Ct.Z),as(r,e,t,n,o,i)):!1}var Os=Ss;function Vi(r,e,t,n,o){return r===e?!0:r==null||e==null||!(0,Zn.Z)(r)&&!(0,Zn.Z)(e)?r!==r&&e!==e:Os(r,e,t,n,Vi,o)}var Ni=Vi;function cs(r,e,t){t=typeof t=="function"?t:void 0;var n=t?t(r,e):void 0;return n===void 0?Ni(r,e,void 0,t):!!n}var ls=cs;class Jo extends Ae{constructor(e){super(e),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this.renderer=e._renderer,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const t=this.domConverter,n=new Set,o=new Set;for(const a of e){const _=t.mapDomToView(a.target);_&&(_.is("uiElement")||_.is("rawElement")||a.type==="childList"&&!this._isBogusBrMutation(a)&&o.add(_))}for(const a of e){const _=t.mapDomToView(a.target);if(!(_&&(_.is("uiElement")||_.is("rawElement")))&&a.type==="characterData"){const S=t.findCorrespondingViewText(a.target);S&&!o.has(S.parent)?n.add(S):!S&&g(a.target)&&o.add(t.mapDomToView(a.target.parentNode))}}let i=!1;for(const a of n)i=!0,this.renderer.markToSync("text",a);for(const a of o){const _=t.mapViewToDom(a),S=Array.from(a.getChildren()),H=Array.from(t.domChildrenToView(_,{withChildren:!1}));ls(S,H,Uo)||(i=!0,this.renderer.markToSync("children",a))}i&&this.view.forceRender()}_isBogusBrMutation(e){let t=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}}function Uo(r,e){if(!Array.isArray(r))return r===e?!0:r.is("$text")&&e.is("$text")?r.data===e.data:!1}class mi extends rt{constructor(e){super(e),this._isFocusChanging=!1,this.domEventType=["focus","blur"],this.useCapture=!0;const t=this.document;t.on("focus",()=>{this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this.flush(),e.change(()=>{})},50)}),t.on("blur",(n,o)=>{const i=t.selection.editableElement;(i===null||i===o.target)&&(t.isFocused=!1,this._isFocusChanging=!1,e.change(()=>{}))})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}class Rs extends Ae{constructor(e){super(e),this.mutationObserver=e.getObserver(Jo),this.focusObserver=e.getObserver(mi),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=(0,Ft.Z)(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=(0,Ft.Z)(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){const t=e.ownerDocument,n=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},o=()=>{this.document.isSelecting&&(this._handleSelectionChange(null,t),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",n,{priority:"highest"}),this.listenTo(e,"keydown",o,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",o,{priority:"highest",useCapture:!0}),!this._documents.has(t)&&(this.listenTo(t,"mouseup",o,{priority:"highest",useCapture:!0}),this.listenTo(t,"selectionchange",(i,a)=>{this.document.isComposing&&!T.OB.isAndroid||(this._handleSelectionChange(a,t),this._documentIsSelectingInactivityTimeoutDebounced())}),this._documents.add(t))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e,t){if(!this.isEnabled)return;const n=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(n.anchorNode))return;this.mutationObserver.flush();const o=this.domConverter.domSelectionToView(n);if(o.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(o)&&this.domConverter.isDomSelectionCorrect(n))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(o))this.view.forceRender();else{const i={oldSelection:this.selection,newSelection:o,domSelection:n};this.document.fire("selectionChange",i),this._fireSelectionChangeDoneDebounced(i)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class Ms extends rt{constructor(e){super(e),this.domEventType=["compositionstart","compositionupdate","compositionend"];const t=this.document;t.on("compositionstart",()=>{t.isComposing=!0},{priority:"low"}),t.on("compositionend",()=>{t.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}class ds{constructor(e,t={}){this._files=t.cacheFiles?us(e):null,this._native=e}get files(){return this._files||(this._files=us(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,n){this._native.setDragImage(e,t,n)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function us(r){const e=Array.from(r.files||[]),t=Array.from(r.items||[]);return e.length?e:t.filter(n=>n.kind==="file").map(n=>n.getAsFile())}class hs extends rt{constructor(){super(...arguments),this.domEventType="beforeinput"}onDomEvent(e){const t=e.getTargetRanges(),n=this.view,o=n.document;let i=null,a=null,_=[];if(e.dataTransfer&&(i=new ds(e.dataTransfer)),e.data!==null?a=e.data:i&&(a=i.getData("text/plain")),o.selection.isFake)_=Array.from(o.selection.getRanges());else if(t.length)_=t.map(S=>{const H=n.domConverter.domPositionToView(S.startContainer,S.startOffset),X=n.domConverter.domPositionToView(S.endContainer,S.endOffset);if(H)return n.createRange(H,X);if(X)return n.createRange(X)}).filter(S=>!!S);else if(T.OB.isAndroid){const S=e.target.ownerDocument.defaultView.getSelection();_=Array.from(n.domConverter.domSelectionToView(S).getRanges())}if(T.OB.isAndroid&&e.inputType=="insertCompositionText"&&a&&a.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[n.createRange(_[0].end)]});return}if(e.inputType=="insertText"&&a&&a.includes(`
`)){const S=a.split(/\n{1,2}/g);let H=_;for(let X=0;X<S.length;X++){const se=S[X];se!=""&&(this.fire(e.type,e,{data:se,dataTransfer:i,targetRanges:H,inputType:e.inputType,isComposing:e.isComposing}),H=[o.selection.getFirstRange()]),X+1<S.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:H}),H=[o.selection.getFirstRange()])}return}this.fire(e.type,e,{data:a,dataTransfer:i,targetRanges:_,inputType:e.inputType,isComposing:e.isComposing})}}class Ds extends Ae{constructor(e){super(e),this.document.on("keydown",(t,n)=>{if(this.isEnabled&&(0,T.dj)(n.keyCode)){const o=new br(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(o,n),o.stop.called&&t.stop()}})}observe(){}stopObserving(){}}class Is extends Ae{constructor(e){super(e);const t=this.document;t.on("keydown",(n,o)=>{if(!this.isEnabled||o.keyCode!=T.Do.tab||o.ctrlKey)return;const i=new br(t,"tab",t.selection.getFirstRange());t.fire(i,o),i.stop.called&&n.stop()})}observe(){}stopObserving(){}}var Bs=1,oi=4;function Ho(r){return(0,Ne.Z)(r,Bs|oi)}var Do=Ho;class Vs extends(0,T.Re)(){constructor(e){super(),this.domRoots=new Map,this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this.document=new sr(e),this.domConverter=new uo(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Ve(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new F(this.document),this.addObserver(Jo),this.addObserver(mi),this.addObserver(Rs),this.addObserver(Zt),this.addObserver($o),this.addObserver(Ms),this.addObserver(Ds),this.addObserver(hs),this.addObserver(Is),I(this),_o(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),T.OB.isiOS&&this.listenTo(this.document,"blur",(t,n)=>{this.domConverter.mapDomToView(n.domEvent.relatedTarget)||this.domConverter._clearDomSelection()})}attachDomRoot(e,t="main"){const n=this.document.getRoot(t);n._name=e.tagName.toLowerCase();const o={};for(const{name:a,value:_}of Array.from(e.attributes))o[a]=_,a==="class"?this._writer.addClass(_.split(" "),n):this._writer.setAttribute(a,_,n);this._initialDomRootAttributes.set(e,o);const i=()=>{this._writer.setAttribute("contenteditable",(!n.isReadOnly).toString(),n),n.isReadOnly?this._writer.addClass("ck-read-only",n):this._writer.removeClass("ck-read-only",n)};i(),this.domRoots.set(t,e),this.domConverter.bindElements(e,n),this._renderer.markToSync("children",n),this._renderer.markToSync("attributes",n),this._renderer.domDocuments.add(e.ownerDocument),n.on("change:children",(a,_)=>this._renderer.markToSync("children",_)),n.on("change:attributes",(a,_)=>this._renderer.markToSync("attributes",_)),n.on("change:text",(a,_)=>this._renderer.markToSync("text",_)),n.on("change:isReadOnly",()=>this.change(i)),n.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const a of this._observers.values())a.observe(e,t)}detachDomRoot(e){const t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:o})=>t.removeAttribute(o));const n=this._initialDomRootAttributes.get(t);for(const o in n)t.setAttribute(o,n[o]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t);for(const o of this._observers.values())o.stopObserving(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(const[n,o]of this.domRoots)t.observe(o,n);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:t,viewportOffset:n=20,ancestorOffset:o=20}={}){const i=this.document.selection.getFirstRange();if(!i)return;const a=Do({alignToTop:e,forceScroll:t,viewportOffset:n,ancestorOffset:o});typeof n=="number"&&(n={top:n,bottom:n,left:n,right:n});const _={target:this.domConverter.viewRangeToDom(i),viewportOffset:n,ancestorOffset:o,alignToTop:e,forceScroll:t};this.fire("scrollToTheSelection",_,a),(0,T.mR)(_)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new T.Bb("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(t){T.Bb.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(mi).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return we._createAt(e,t)}createPositionAfter(e){return we._createAfter(e)}createPositionBefore(e){return we._createBefore(e)}createRange(e,t){return new $e(e,t)}createRangeOn(e){return $e._createOn(e)}createRangeIn(e){return $e._createIn(e)}createSelection(...e){return new xn(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}class Zr{is(){throw new Error("is() method is abstract")}}class Pr extends Zr{constructor(e){super(),this.parent=null,this._attrs=(0,T.qL)(e)}get document(){return null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))===null)throw new T.Bb("model-node-not-found-in-parent",this);return e}get startOffset(){let e;if(!this.parent)return null;if((e=this.parent.getChildStartOffset(this))===null)throw new T.Bb("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={}){const t=[];let n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}getCommonAncestor(e,t={}){const n=this.getAncestors(t),o=e.getAncestors(t);let i=0;for(;n[i]==o[i]&&n[i];)i++;return i===0?null:n[i-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),n=e.getPath(),o=(0,T.Rt)(t,n);switch(o){case"prefix":return!0;case"extension":return!1;default:return t[o]<n[o]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((t,n)=>(t[n[0]]=n[1],t),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=(0,T.qL)(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}}Pr.prototype.is=function(r){return r==="node"||r==="model:node"};class ii{constructor(e){this._nodes=[],e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((e,t)=>e+t.offsetSize,0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){const t=this._nodes.indexOf(e);return t==-1?null:t}getNodeStartOffset(e){const t=this.getNodeIndex(e);return t===null?null:this._nodes.slice(0,t).reduce((n,o)=>n+o.offsetSize,0)}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new T.Bb("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){let t=0;for(const n of this._nodes){if(e>=t&&e<t+n.offsetSize)return this.getNodeIndex(n);t+=n.offsetSize}if(t!=e)throw new T.Bb("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}_insertNodes(e,t){for(const n of t)if(!(n instanceof Pr))throw new T.Bb("model-nodelist-insertnodes-not-node",this);this._nodes=(0,T.x)(this._nodes,Array.from(t),e,0)}_removeNodes(e,t=1){return this._nodes.splice(e,t)}toJSON(){return this._nodes.map(e=>e.toJSON())}}class It extends Pr{constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new It(this.data,this.getAttributes())}static fromJSON(e){return new It(e.data,e.attributes)}}It.prototype.is=function(r){return r==="$text"||r==="model:$text"||r==="text"||r==="model:text"||r==="node"||r==="model:node"};class qn extends Zr{constructor(e,t,n){if(super(),this.textNode=e,t<0||t>e.offsetSize)throw new T.Bb("model-textproxy-wrong-offsetintext",this);if(n<0||t+n>e.offsetSize)throw new T.Bb("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+n),this.offsetInText=t}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const t=[];let n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}qn.prototype.is=function(r){return r==="$textProxy"||r==="model:$textProxy"||r==="textProxy"||r==="model:textProxy"};class Bt extends Pr{constructor(e,t,n){super(t),this._children=new ii,this.name=e,n&&this._insertChild(0,n)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const n of e)t=t.getChild(t.offsetToIndex(n));return t}findAncestor(e,t={}){let n=t.includeSelf?this:this.parent;for(;n;){if(n.name===e)return n;n=n.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){const t=e?Array.from(this._children).map(n=>n._clone(!0)):void 0;return new Bt(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const n=fs(t);for(const o of n)o.parent!==null&&o._remove(),o.parent=this;this._children._insertNodes(e,n)}_removeChildren(e,t=1){const n=this._children._removeNodes(e,t);for(const o of n)o.parent=null;return n}static fromJSON(e){let t;if(e.children){t=[];for(const n of e.children)n.name?t.push(Bt.fromJSON(n)):t.push(It.fromJSON(n))}return new Bt(e.name,e.attributes,t)}}Bt.prototype.is=function(r,e){return e?e===this.name&&(r==="element"||r==="model:element"):r==="element"||r==="model:element"||r==="node"||r==="model:node"};function fs(r){return typeof r=="string"?[new It(r)]:((0,T.TW)(r)||(r=[r]),Array.from(r).map(e=>typeof e=="string"?new It(e):e instanceof qn?new It(e.data,e.getAttributes()):e))}class wo{constructor(e){if(!e||!e.boundaries&&!e.startPosition)throw new T.Bb("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new T.Bb("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=ge._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,n,o,i;do o=this.position,i=this._visitedParent,{done:t,value:n}=this.next();while(!t&&e(n));t||(this._position=o,this._visitedParent=i)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),n=this._visitedParent;if(n.parent===null&&t.offset===n.maxOffset)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const o=si(t,n),i=o||gs(t,n,o);if(i instanceof Bt){if(!this.shallow)t.path.push(0),this._visitedParent=i;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,eo("elementStart",i,e,t,1)}if(i instanceof It){let a;if(this.singleCharacters)a=1;else{let H=i.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<H&&(H=this.boundaries.end.offset),a=H-t.offset}const _=t.offset-i.startOffset,S=new qn(i,_,a);return t.offset+=a,this._position=t,eo("text",S,e,t,a)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():eo("elementEnd",n,e,t)}_previous(){const e=this.position,t=this.position.clone(),n=this._visitedParent;if(n.parent===null&&t.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const o=t.parent,i=si(t,o),a=i||Io(t,o,i);if(a instanceof Bt)return t.offset--,this.shallow?(this._position=t,eo("elementStart",a,e,t,1)):(t.path.push(a.maxOffset),this._position=t,this._visitedParent=a,this.ignoreElementEnd?this._previous():eo("elementEnd",a,e,t));if(a instanceof It){let _;if(this.singleCharacters)_=1;else{let X=a.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>X&&(X=this.boundaries.start.offset),_=t.offset-X}const S=t.offset-a.startOffset,H=new qn(a,S-_,_);return t.offset-=_,this._position=t,eo("text",H,e,t,_)}return t.path.pop(),this._position=t,this._visitedParent=n.parent,eo("elementStart",n,e,t,1)}}function eo(r,e,t,n,o){return{done:!1,value:{type:r,item:e,previousPosition:t,nextPosition:n,length:o}}}class ge extends Zr{constructor(e,t,n="toNone"){if(super(),!e.is("element")&&!e.is("documentFragment"))throw new T.Bb("model-position-root-invalid",e);if(!(t instanceof Array)||t.length===0)throw new T.Bb("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=n}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChild(e.offsetToIndex(this.path[t])),!e)throw new T.Bb("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new T.Bb("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return si(this,this.parent)}get nodeAfter(){const e=this.parent;return gs(this,e,si(this,e))}get nodeBefore(){const e=this.parent;return Io(this,e,si(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const t=(0,T.Rt)(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;const n=new wo(t);return n.skip(e),n.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const t=(0,T.Rt)(this.path,e.path),n=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,n)}getCommonAncestor(e){const t=this.getAncestors(),n=e.getAncestors();let o=0;for(;t[o]==n[o]&&t[o];)o++;return o===0?null:t[o-1]}getShiftedBy(e){const t=this.clone(),n=t.offset+e;return t.offset=n<0?0:n,t}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const t=Math.min(this.path.length,e.path.length);for(let n=0;n<t;n++){const o=this.path[n]-e.path[n];if(o<-1||o>1)return!1;if(o===1)return Li(e,this,n);if(o===-1)return Li(this,e,n)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?bi(this.path,t):bi(e.path,t)}hasSameParentAs(e){if(this.root!==e.root)return!1;const t=this.getParentPath(),n=e.getParentPath();return(0,T.Rt)(t,n)=="same"}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=ge._createAt(this);break}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const t=e.movedRange,n=t.containsPosition(this)||t.start.isEqual(this);let o;return n?(o=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(o=o._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?o=ge._createAt(e.deletionPosition):o=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),o}_getTransformedByDeletion(e,t){const n=ge._createAt(this);if(this.root!=e.root)return n;if((0,T.Rt)(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;n.offset-=t}}else if((0,T.Rt)(e.getParentPath(),this.getParentPath())=="prefix"){const o=e.path.length-1;if(e.offset<=this.path[o]){if(e.offset+t>this.path[o])return null;n.path[o]-=t}}return n}_getTransformedByInsertion(e,t){const n=ge._createAt(this);if(this.root!=e.root)return n;if((0,T.Rt)(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(n.offset+=t);else if((0,T.Rt)(e.getParentPath(),this.getParentPath())=="prefix"){const o=e.path.length-1;e.offset<=this.path[o]&&(n.path[o]+=t)}return n}_getTransformedByMove(e,t,n){if(t=t._getTransformedByDeletion(e,n),e.isEqual(t))return ge._createAt(this);const o=this._getTransformedByDeletion(e,n);return o===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(n).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,t):o._getTransformedByInsertion(t,n)}_getCombined(e,t){const n=e.path.length-1,o=ge._createAt(t);return o.stickiness=this.stickiness,o.offset=o.offset+this.path[n]-e.offset,o.path=[...o.path,...this.path.slice(n+1)],o}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,n="toNone"){if(e instanceof ge)return new ge(e.root,e.path,e.stickiness);{const o=e;if(t=="end")t=o.maxOffset;else{if(t=="before")return this._createBefore(o,n);if(t=="after")return this._createAfter(o,n);if(t!==0&&!t)throw new T.Bb("model-createpositionat-offset-required",[this,e])}if(!o.is("element")&&!o.is("documentFragment"))throw new T.Bb("model-position-parent-incorrect",[this,e]);const i=o.getPath();return i.push(t),new this(o.root,i,n)}}static _createAfter(e,t){if(!e.parent)throw new T.Bb("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new T.Bb("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if(e.root==="$graveyard"){const n=new ge(t.graveyard,e.path);return n.stickiness=e.stickiness,n}if(!t.getRoot(e.root))throw new T.Bb("model-position-fromjson-no-root",t,{rootName:e.root});return new ge(t.getRoot(e.root),e.path,e.stickiness)}}ge.prototype.is=function(r){return r==="position"||r==="model:position"};function si(r,e){const t=e.getChild(e.offsetToIndex(r.offset));return t&&t.is("$text")&&t.startOffset<r.offset?t:null}function gs(r,e,t){return t!==null?null:e.getChild(e.offsetToIndex(r.offset))}function Io(r,e,t){return t!==null?null:e.getChild(e.offsetToIndex(r.offset)-1)}function Li(r,e,t){return!(t+1===r.path.length||!bi(e.path,t+1)||!Ns(r,t+1))}function bi(r,e){for(;e<r.length;){if(r[e]!==0)return!1;e++}return!0}function Ns(r,e){let t=r.parent,n=r.path.length-1,o=0;for(;n>=e;){if(r.path[n]+o!==t.maxOffset)return!1;o=1,n--,t=t.parent}return!0}class ie extends Zr{constructor(e,t){super(),this.start=ge._createAt(e),this.end=t?ge._createAt(t):ge._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new wo({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),t=this.end.getParentPath();return(0,T.Rt)(e,t)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),o=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&o}containsItem(e){const t=ge._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new ie(this.start,e.start)),this.containsPosition(e.end)&&t.push(new ie(e.end,this.end))):t.push(new ie(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,n=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(n=e.end),new ie(t,n)}return null}getJoined(e,t=!1){let n=this.isIntersecting(e);if(n||(this.start.isBefore(e.start)?n=t?this.end.isTouching(e.start):this.end.isEqual(e.start):n=t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!n)return null;let o=this.start,i=this.end;return e.start.isBefore(o)&&(o=e.start),e.end.isAfter(i)&&(i=e.end),new ie(o,i)}getMinimalFlatRanges(){const e=[],t=this.start.getCommonPath(this.end).length,n=ge._createAt(this.start);let o=n.parent;for(;n.path.length>t+1;){const i=o.maxOffset-n.offset;i!==0&&e.push(new ie(n,n.getShiftedBy(i))),n.path=n.path.slice(0,-1),n.offset++,o=o.parent}for(;n.path.length<=this.end.path.length;){const i=this.end.path[n.path.length-1],a=i-n.offset;a!==0&&e.push(new ie(n,n.getShiftedBy(a))),n.offset=i,n.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new wo(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new wo(e);for(const n of t)yield n.item}*getPositions(e={}){e.boundaries=this;const t=new wo(e);yield t.position;for(const n of t)yield n.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new ie(this.start,this.end)]}getTransformedByOperations(e){const t=[new ie(this.start,this.end)];for(const n of e)for(let o=0;o<t.length;o++){const i=t[o].getTransformedByOperation(n);t.splice(o,1,...i),o+=i.length-1}for(let n=0;n<t.length;n++){const o=t[n];for(let i=n+1;i<t.length;i++){const a=t[i];(o.containsRange(a)||a.containsRange(o)||o.isEqual(a))&&t.splice(i,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){const n=e.sourcePosition,o=e.howMany,i=e.targetPosition;return this._getTransformedByMove(n,i,o,t)}_getTransformedBySplitOperation(e){const t=this.start._getTransformedBySplitOperation(e);let n=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(n=this.end.getShiftedBy(1)),t.root!=n.root&&(n=this.end.getShiftedBy(-1)),new ie(t,n)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new ie(this.start);let t=this.start._getTransformedByMergeOperation(e),n=this.end._getTransformedByMergeOperation(e);return t.root!=n.root&&(n=this.end.getShiftedBy(-1)),t.isAfter(n)?(e.sourcePosition.isBefore(e.targetPosition)?(t=ge._createAt(n),t.offset=0):(e.deletionPosition.isEqual(t)||(n=e.deletionPosition),t=e.targetPosition),new ie(t,n)):new ie(t,n)}_getTransformedByInsertion(e,t,n=!1){if(n&&this.containsPosition(e))return[new ie(this.start,e),new ie(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{const o=new ie(this.start,this.end);return o.start=o.start._getTransformedByInsertion(e,t),o.end=o.end._getTransformedByInsertion(e,t),[o]}}_getTransformedByMove(e,t,n,o=!1){if(this.isCollapsed){const se=this.start._getTransformedByMove(e,t,n);return[new ie(se)]}const i=ie._createFromPositionAndShift(e,n),a=t._getTransformedByDeletion(e,n);if(this.containsPosition(t)&&!o&&(i.containsPosition(this.start)||i.containsPosition(this.end))){const se=this.start._getTransformedByMove(e,t,n),Se=this.end._getTransformedByMove(e,t,n);return[new ie(se,Se)]}let _;const S=this.getDifference(i);let H=null;const X=this.getIntersection(i);if(S.length==1?H=new ie(S[0].start._getTransformedByDeletion(e,n),S[0].end._getTransformedByDeletion(e,n)):S.length==2&&(H=new ie(this.start,this.end._getTransformedByDeletion(e,n))),H?_=H._getTransformedByInsertion(a,n,X!==null||o):_=[],X){const se=new ie(X.start._getCombined(i.start,a),X.end._getCombined(i.start,a));_.length==2?_.splice(1,0,se):_.push(se)}return _}_getTransformedByDeletion(e,t){let n=this.start._getTransformedByDeletion(e,t),o=this.end._getTransformedByDeletion(e,t);return n==null&&o==null?null:(n==null&&(n=e),o==null&&(o=e),new ie(n,o))}static _createFromPositionAndShift(e,t){const n=e,o=e.getShiftedBy(t);return t>0?new this(n,o):new this(o,n)}static _createIn(e){return new this(ge._createAt(e,0),ge._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(ge._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new T.Bb("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const t=e[0];e.sort((i,a)=>i.start.isAfter(a.start)?1:-1);const n=e.indexOf(t),o=new this(t.start,t.end);if(n>0)for(let i=n-1;e[i].end.isEqual(o.start);i++)o.start=ge._createAt(e[i].start);for(let i=n+1;i<e.length&&e[i].start.isEqual(o.end);i++)o.end=ge._createAt(e[i].end);return o}static fromJSON(e,t){return new this(ge.fromJSON(e.start,t),ge.fromJSON(e.end,t))}}ie.prototype.is=function(r){return r==="range"||r==="model:range"};class Xo extends(0,T.ln)(){constructor(){super(),this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._deferredBindingRemovals=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(e,t)=>{if(t.viewPosition)return;const n=this._modelToViewMapping.get(t.modelPosition.parent);if(!n)throw new T.Bb("mapping-model-position-view-parent-not-found",this,{modelPosition:t.modelPosition});t.viewPosition=this.findPositionIn(n,t.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{if(t.modelPosition)return;const n=this.findMappedViewAncestor(t.viewPosition),o=this._viewToModelMapping.get(n),i=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,n);t.modelPosition=ge._createAt(o,i)},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e,t={}){const n=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const o of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(o);t.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e),this._modelToViewMapping.get(n)==e&&this._modelToViewMapping.delete(n))}unbindModelElement(e){const t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){const n=this._markerNameToElements.get(t)||new Set;n.add(e);const o=this._elementToMarkerNames.get(e)||new Set;o.add(t),this._markerNameToElements.set(t,n),this._elementToMarkerNames.set(e,o)}unbindElementFromMarkerName(e,t){const n=this._markerNameToElements.get(t);n&&(n.delete(e),n.size==0&&this._markerNameToElements.delete(t));const o=this._elementToMarkerNames.get(e);o&&(o.delete(t),o.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,t]of this._deferredBindingRemovals)e.root==t&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new ie(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new $e(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={}){const n={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition}markerNameToElements(e){const t=this._markerNameToElements.get(e);if(!t)return null;const n=new Set;for(const o of t)if(o.is("attributeElement"))for(const i of o.getElementsWithSameId())n.add(i);else n.add(o);return n}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,n){if(n!=e){const i=this._toModelOffset(e.parent,e.index,n),a=this._toModelOffset(e,t,e);return i+a}if(e.is("$text"))return t;let o=0;for(let i=0;i<t;i++)o+=this.getModelLength(e.getChild(i));return o}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let t=0;for(const n of e.getChildren())t+=this.getModelLength(n);return t}}findPositionIn(e,t){let n,o=0,i=0,a=0;if(e.is("$text"))return new we(e,t);for(;i<t;)n=e.getChild(a),o=this.getModelLength(n),i+=o,a++;return i==t?this._moveViewPositionToTextNode(new we(e,a)):this.findPositionIn(n,t-(i-o))}_moveViewPositionToTextNode(e){const t=e.nodeBefore,n=e.nodeAfter;return t instanceof je?new we(t,t.data.length):n instanceof je?new we(n,0):e}}class Ko{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(e,t){t=wi(t),e instanceof qn&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=wi(t),e instanceof qn&&(e=this._getSymbolForTextProxy(e)),this.test(e,t)?(this._consumable.get(e).set(t,!1),!0):!1}test(e,t){t=wi(t),e instanceof qn&&(e=this._getSymbolForTextProxy(e));const n=this._consumable.get(e);if(n===void 0)return null;const o=n.get(t);return o===void 0?null:o}revert(e,t){t=wi(t),e instanceof qn&&(e=this._getSymbolForTextProxy(e));const n=this.test(e,t);return n===!1?(this._consumable.get(e).set(t,!0),!0):n===!0?!1:null}verifyAllConsumed(e){const t=[];for(const[n,o]of this._consumable)for(const[i,a]of o){const _=i.split(":")[0];a&&e==_&&t.push({event:i,item:n.name||n.description})}if(t.length)throw new T.Bb("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null;const n=this._textProxyRegistry.get(e.startOffset);if(n){const o=n.get(e.endOffset);o&&(t=o.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){const t=e.startOffset,n=e.endOffset,o=e.parent,i=Symbol("$textProxy:"+e.data);let a,_;return a=this._textProxyRegistry.get(t),a||(a=new Map,this._textProxyRegistry.set(t,a)),_=a.get(n),_||(_=new Map,a.set(n,_)),_.set(o,i),i}}function wi(r){const e=r.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?r:e.length>1?e[0]+":"+e[1]:e[0]}class _s extends(0,T.ln)(){constructor(e){super(),this._conversionApi=Ge({dispatcher:this},e),this._firedEventsMap=new WeakMap}convertChanges(e,t,n){const o=this._createConversionApi(n,e.getRefreshedItems());for(const a of e.getMarkersToRemove())this._convertMarkerRemove(a.name,a.range,o);const i=this._reduceChanges(e.getChanges());for(const a of i)a.type==="insert"?this._convertInsert(ie._createFromPositionAndShift(a.position,a.length),o):a.type==="reinsert"?this._convertReinsert(ie._createFromPositionAndShift(a.position,a.length),o):a.type==="remove"?this._convertRemove(a.position,a.length,a.name,o):this._convertAttribute(a.range,a.attributeKey,a.attributeOldValue,a.attributeNewValue,o);for(const a of o.mapper.flushUnboundMarkerNames()){const _=t.get(a).getRange();this._convertMarkerRemove(a,_,o),this._convertMarkerAdd(a,_,o)}for(const a of e.getMarkersToAdd())this._convertMarkerAdd(a.name,a.range,o);o.mapper.flushDeferredBindings(),o.consumable.verifyAllConsumed("insert")}convert(e,t,n,o={}){const i=this._createConversionApi(n,void 0,o);this._convertInsert(e,i);for(const[a,_]of t)this._convertMarkerAdd(a,_,i);i.consumable.verifyAllConsumed("insert")}convertSelection(e,t,n){const o=this._createConversionApi(n);this.fire("cleanSelection",{selection:e},o);const i=e.getFirstPosition().root;if(!o.mapper.toViewElement(i))return;const a=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(o.consumable,e,a),this.fire("selection",{selection:e},o),!!e.isCollapsed){for(const _ of a)if(o.consumable.test(e,"addMarker:"+_.name)){const S=_.getRange();if(!Fi(e.getFirstPosition(),_,o.mapper))continue;const H={item:e,markerName:_.name,markerRange:S};this.fire(`addMarker:${_.name}`,H,o)}for(const _ of e.getAttributeKeys())if(o.consumable.test(e,"attribute:"+_)){const S={item:e,range:e.getFirstRange(),attributeKey:_,attributeOldValue:null,attributeNewValue:e.getAttribute(_)};this.fire(`attribute:${_}:$text`,S,o)}}}_convertInsert(e,t,n={}){n.doNotAddConsumables||this._addConsumablesForInsert(t.consumable,Array.from(e));for(const o of Array.from(e.getWalker({shallow:!0})).map(zi))this._testAndFire("insert",o,t)}_convertRemove(e,t,n,o){this.fire(`remove:${n}`,{position:e,length:t},o)}_convertAttribute(e,t,n,o,i){this._addConsumablesForRange(i.consumable,e,`attribute:${t}`);for(const a of e){const _={item:a.item,range:ie._createFromPositionAndShift(a.previousPosition,a.length),attributeKey:t,attributeOldValue:n,attributeNewValue:o};this._testAndFire(`attribute:${t}`,_,i)}}_convertReinsert(e,t){const n=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(t.consumable,n);for(const o of n.map(zi))this._testAndFire("insert",Hr(Ge({},o),{reconversion:!0}),t)}_convertMarkerAdd(e,t,n){if(t.root.rootName=="$graveyard")return;const o=`addMarker:${e}`;if(n.consumable.add(t,o),this.fire(o,{markerName:e,markerRange:t},n),!!n.consumable.consume(t,o)){this._addConsumablesForRange(n.consumable,t,o);for(const i of t.getItems()){if(!n.consumable.test(i,o))continue;const a={item:i,range:ie._createOn(i),markerName:e,markerRange:t};this.fire(o,a,n)}}}_convertMarkerRemove(e,t,n){t.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:t},n)}_reduceChanges(e){const t={changes:e};return this.fire("reduceChanges",t),t.changes}_addConsumablesForInsert(e,t){for(const n of t){const o=n.item;if(e.test(o,"insert")===null){e.add(o,"insert");for(const i of o.getAttributeKeys())e.add(o,"attribute:"+i)}}return e}_addConsumablesForRange(e,t,n){for(const o of t.getItems())e.add(o,n);return e}_addConsumablesForSelection(e,t,n){e.add(t,"selection");for(const o of n)e.add(t,"addMarker:"+o.name);for(const o of t.getAttributeKeys())e.add(t,"attribute:"+o);return e}_testAndFire(e,t,n){const o=Ls(e,t),i=t.item.is("$textProxy")?n.consumable._getSymbolForTextProxy(t.item):t.item,a=this._firedEventsMap.get(n),_=a.get(i);if(!_)a.set(i,new Set([o]));else if(!_.has(o))_.add(o);else return;this.fire(o,t,n)}_testAndFireAddAttributes(e,t){const n={item:e,range:ie._createOn(e)};for(const o of n.item.getAttributeKeys())n.attributeKey=o,n.attributeOldValue=null,n.attributeNewValue=n.item.getAttribute(o),this._testAndFire(`attribute:${o}`,n,t)}_createConversionApi(e,t=new Set,n={}){const o=Hr(Ge({},this._conversionApi),{consumable:new Ko,writer:e,options:n,convertItem:i=>this._convertInsert(ie._createOn(i),o),convertChildren:i=>this._convertInsert(ie._createIn(i),o,{doNotAddConsumables:!0}),convertAttributes:i=>this._testAndFireAddAttributes(i,o),canReuseView:i=>!t.has(o.mapper.toModelElement(i))});return this._firedEventsMap.set(o,new Map),o}}function Fi(r,e,t){const n=e.getRange(),o=Array.from(r.getAncestors());return o.shift(),o.reverse(),!o.some(a=>{if(n.containsItem(a))return!!t.toViewElement(a).getCustomProperty("addHighlight")})}function Ls(r,e){const t=e.item.is("element")?e.item.name:"$text";return`${r}:${t}`}function zi(r){const e=r.item,t=ie._createFromPositionAndShift(r.previousPosition,r.length);return{item:e,range:t}}class dr extends(0,T.ln)(Zr){constructor(...e){super(),this._lastRangeBackward=!1,this._attrs=new Map,this._ranges=[],e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let n=!1;for(const o of e._ranges)if(t.isEqual(o)){n=!0;break}if(!n)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new ie(e.start,e.end)}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?new ie(e.start,e.end):null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?new ie(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[t,n,o]=e;if(typeof n=="object"&&(o=n,n=void 0),t===null)this._setRanges([]);else if(t instanceof dr)this._setRanges(t.getRanges(),t.isBackward);else if(t&&typeof t.getRanges=="function")this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof ie)this._setRanges([t],!!o&&!!o.backward);else if(t instanceof ge)this._setRanges([new ie(t)]);else if(t instanceof Pr){const i=!!o&&!!o.backward;let a;if(n=="in")a=ie._createIn(t);else if(n=="on")a=ie._createOn(t);else if(n!==void 0)a=new ie(ge._createAt(t,n));else throw new T.Bb("model-selection-setto-required-second-parameter",[this,t]);this._setRanges([a],i)}else if((0,T.TW)(t))this._setRanges(t,o&&!!o.backward);else throw new T.Bb("model-selection-setto-not-selectable",[this,t])}_setRanges(e,t=!1){const n=Array.from(e),o=n.some(i=>{if(!(i instanceof ie))throw new T.Bb("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(a=>!a.isEqual(i))});n.length===this._ranges.length&&!o||(this._replaceAllRanges(n),this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0}))}setFocus(e,t){if(this.anchor===null)throw new T.Bb("model-selection-setfocus-no-ranges",[this,e]);const n=ge._createAt(e,t);if(n.compareWith(this.focus)=="same")return;const o=this.anchor;this._ranges.length&&this._popRange(),n.compareWith(o)=="before"?(this._pushRange(new ie(n,o)),this._lastRangeBackward=!0):(this._pushRange(new ie(o,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const t of this.getRanges()){const n=f(t.start,e);c(n,t)&&(yield n);for(const i of t.getWalker()){const a=i.item;i.type=="elementEnd"&&Fs(a,e,t)&&(yield a)}const o=f(t.end,e);p(o,t)&&(yield o)}}containsEntireContent(e=this.anchor.root){const t=ge._createAt(e,0),n=ge._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new ie(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new T.Bb("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_replaceAllRanges(e){this._removeAllRanges();for(const t of e)this._pushRange(t)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}dr.prototype.is=function(r){return r==="selection"||r==="model:selection"};function ps(r,e){return e.has(r)?!1:(e.add(r),r.root.document.model.schema.isBlock(r)&&!!r.parent)}function Fs(r,e,t){return ps(r,e)&&s(r,t)}function f(r,e){const n=r.parent.root.document.model.schema,o=r.parent.getAncestors({parentFirst:!0,includeSelf:!0});let i=!1;const a=o.find(_=>i?!1:(i=n.isLimit(_),!i&&ps(_,e)));return o.forEach(_=>e.add(_)),a}function s(r,e){const t=P(r);return t?!e.containsRange(ie._createOn(t),!0):!0}function c(r,e){return r?e.isCollapsed||r.isEmpty?!0:e.start.isTouching(ge._createAt(r,r.maxOffset))?!1:s(r,e):!1}function p(r,e){return r?e.isCollapsed||r.isEmpty?!0:e.end.isTouching(ge._createAt(r,0))?!1:s(r,e):!1}function P(r){const e=r.root.document.model.schema;let t=r.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}class Z extends(0,T.ln)(ie){constructor(e,t){super(e,t),Q.call(this)}detach(){this.stopListening()}toRange(){return new ie(this.start,this.end)}static fromRange(e){return new Z(e.start,e.end)}}Z.prototype.is=function(r){return r==="liveRange"||r==="model:liveRange"||r=="range"||r==="model:range"};function Q(){this.listenTo(this.root.document.model,"applyOperation",(r,e)=>{const t=e[0];t.isDocumentOperation&&$.call(this,t)},{priority:"low"})}function $(r){const e=this.getTransformedByOperation(r),t=ie._createFromRanges(e),n=!t.isEqual(this),o=ae(this,r);let i=null;if(n){t.root.rootName=="$graveyard"&&(r.type=="remove"?i=r.sourcePosition:i=r.deletionPosition);const a=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",a,{deletionPosition:i})}else o&&this.fire("change:content",this.toRange(),{deletionPosition:i})}function ae(r,e){switch(e.type){case"insert":return r.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return r.containsPosition(e.sourcePosition)||r.start.isEqual(e.sourcePosition)||r.containsPosition(e.targetPosition);case"split":return r.containsPosition(e.splitPosition)||r.containsPosition(e.insertionPosition)}return!1}const ft="selection:";class wt extends(0,T.ln)(Zr){constructor(e){super(),this._selection=new to(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return ft+e}static _isStoreAttributeKey(e){return e.startsWith(ft)}}wt.prototype.is=function(r){return r==="selection"||r=="model:selection"||r=="documentSelection"||r=="model:documentSelection"};class to extends dr{constructor(e){super(),this.markers=new T.FE({idProperty:"name"}),this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(t,n)=>{const o=n[0];!o.isDocumentOperation||o.type=="marker"||o.type=="rename"||o.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,n,o,i)=>{this._updateMarker(n,i)}),this.listenTo(this._document,"change",(t,n)=>{Wi(this._model,n)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){const n=[e];this.fire("change:attribute",{attributeKeys:n,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){const e=(0,T.hQ)();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new T.Bb("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const t=this._prepareRange(e);t&&this._ranges.push(t)}_validateSelectionRanges(e){for(const t of e)if(!this._document._validateSelectionRange(t))throw new T.Bb("document-selection-wrong-position",this,{range:t})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const t=Z.fromRange(e);return t.on("change:range",(n,o,i)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=i.deletionPosition;const a=this._ranges.indexOf(t);this._ranges.splice(a,1),t.detach()}}),t}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let t=!1;for(const o of this._model.markers){const i=o.name.split(":",1)[0];if(!this._observedMarkers.has(i))continue;const a=o.getRange();for(const _ of this.getRanges())a.containsRange(_,!_.isCollapsed)&&e.push(o)}const n=Array.from(this.markers);for(const o of e)this.markers.has(o)||(this.markers.add(o),t=!0);for(const o of Array.from(this.markers))e.includes(o)||(this.markers.remove(o),t=!0);t&&this.fire("change:marker",{oldMarkers:n,directChange:!1})}_updateMarker(e,t){const n=e.name.split(":",1)[0];if(!this._observedMarkers.has(n))return;let o=!1;const i=Array.from(this.markers),a=this.markers.has(e);if(!t)a&&(this.markers.remove(e),o=!0);else{let _=!1;for(const S of this.getRanges())if(t.containsRange(S,!S.isCollapsed)){_=!0;break}_&&!a?(this.markers.add(e),o=!0):!_&&a&&(this.markers.remove(e),o=!0)}o&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateAttributes(e){const t=(0,T.qL)(this._getSurroundingAttributes()),n=(0,T.qL)(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[i,a]of this._attributePriority)a=="low"&&(this._attrs.delete(i),this._attributePriority.delete(i));this._setAttributesTo(t);const o=[];for(const[i,a]of this.getAttributes())(!n.has(i)||n.get(i)!==a)&&o.push(i);for(const[i]of n)this.hasAttribute(i)||o.push(i);o.length>0&&this.fire("change:attribute",{attributeKeys:o,directChange:!1})}_setAttribute(e,t,n=!0){const o=n?"normal":"low";return o=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===t?!1:(this._attrs.set(e,t),this._attributePriority.set(e,o),!0)}_removeAttribute(e,t=!0){const n=t?"normal":"low";return n=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,n),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const t=new Set;for(const[n,o]of this.getAttributes())e.get(n)!==o&&this._removeAttribute(n,!1);for(const[n,o]of e)this._setAttribute(n,o,!1)&&t.add(n);return t}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())t.startsWith(ft)&&(yield[t.substr(ft.length),e.getAttribute(t)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),t=this._model.schema;if(e.root.rootName=="$graveyard")return null;let n=null;if(this.isCollapsed){const o=e.textNode?e.textNode:e.nodeBefore,i=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(n=ur(o,t)),n||(n=ur(i,t)),!this.isGravityOverridden&&!n){let a=o;for(;a&&!n;)a=a.previousSibling,n=ur(a,t)}if(!n){let a=i;for(;a&&!n;)a=a.nextSibling,n=ur(a,t)}n||(n=this.getStoredAttributes())}else{const o=this.getFirstRange();for(const i of o){if(i.item.is("element")&&t.isObject(i.item)){n=ur(i.item,t);break}if(i.type=="text"){n=i.item.getAttributes();break}}}return n}_fixGraveyardSelection(e){const t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}function ur(r,e){if(!r)return null;if(r instanceof qn||r instanceof It)return r.getAttributes();if(!e.isInline(r))return null;if(!e.isObject(r))return[];const t=[];for(const[n,o]of r.getAttributes())e.checkAttribute("$text",n)&&e.getAttributeProperties(n).copyFromObject!==!1&&t.push([n,o]);return t}function Wi(r,e){const t=r.document.differ;for(const n of t.getChanges()){if(n.type!="insert")continue;const o=n.position.parent;n.length===o.maxOffset&&r.enqueueChange(e,a=>{const _=Array.from(o.getAttributeKeys()).filter(S=>S.startsWith(ft));for(const S of _)a.removeAttribute(S,o)})}}class zs{constructor(e){this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}class Va extends zs{elementToElement(e){return this.add(ec(e))}elementToStructure(e){return this.add(tc(e))}attributeToElement(e){return this.add(nc(e))}attributeToAttribute(e){return this.add(rc(e))}markerToElement(e){return this.add(oc(e))}markerToHighlight(e){return this.add(sc(e))}markerToData(e){return this.add(ic(e))}}function Ws(){return(r,e,t)=>{if(!t.consumable.consume(e.item,r.name))return;const n=t.writer,o=t.mapper.toViewPosition(e.range.start),i=n.createText(e.item.data);n.insert(o,i)}}function js(){return(r,e,t)=>{t.convertAttributes(e.item),!e.reconversion&&e.item.is("element")&&!e.item.isEmpty&&t.convertChildren(e.item)}}function Na(){return(r,e,t)=>{const n=t.mapper.toViewPosition(e.position),o=e.position.getShiftedBy(e.length),i=t.mapper.toViewPosition(o,{isPhantom:!0}),a=t.writer.createRange(n,i),_=t.writer.remove(a.getTrimmed());for(const S of t.writer.createRangeIn(_).getItems())t.mapper.unbindViewElement(S,{defer:!0})}}function Zs(r,e){const t=r.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function La(){return(r,e,t)=>{const n=e.selection;if(n.isCollapsed||!t.consumable.consume(n,"selection"))return;const o=[];for(const i of n.getRanges())o.push(t.mapper.toViewRange(i));t.writer.setSelection(o,{backward:n.isBackward})}}function Fa(){return(r,e,t)=>{const n=e.selection;if(!n.isCollapsed||!t.consumable.consume(n,"selection"))return;const o=t.writer,i=n.getFirstPosition(),a=t.mapper.toViewPosition(i),_=o.breakAttributes(a);o.setSelection(_)}}function za(){return(r,e,t)=>{const n=t.writer,o=n.document.selection;for(const i of o.getRanges())i.isCollapsed&&i.end.parent.isAttached()&&t.writer.mergeAttributes(i.start);n.setSelection(null)}}function Wa(r){return(e,t,n)=>{if(!n.consumable.test(t.item,e.name))return;const o=r(t.attributeOldValue,n,t),i=r(t.attributeNewValue,n,t);if(!o&&!i)return;n.consumable.consume(t.item,e.name);const a=n.writer,_=a.document.selection;if(t.item instanceof dr||t.item instanceof wt)a.wrap(_.getFirstRange(),i);else{let S=n.mapper.toViewRange(t.range);t.attributeOldValue!==null&&o&&(S=a.unwrap(S,o)),t.attributeNewValue!==null&&i&&a.wrap(S,i)}}}function ja(r,e=fc){return(t,n,o)=>{if(!e(n.item,o.consumable,{preflight:!0}))return;const i=r(n.item,o,n);if(!i)return;e(n.item,o.consumable);const a=o.mapper.toViewPosition(n.range.start);o.mapper.bindElements(n.item,i),o.writer.insert(a,i),o.convertAttributes(n.item),Xs(i,n.item.getChildren(),o,{reconversion:n.reconversion})}}function Za(r,e){return(t,n,o)=>{if(!e(n.item,o.consumable,{preflight:!0}))return;const i=new Map;o.writer._registerSlotFactory(lc(n.item,i,o));const a=r(n.item,o,n);if(o.writer._clearSlotFactory(),!a)return;dc(n.item,i,o),e(n.item,o.consumable);const _=o.mapper.toViewPosition(n.range.start);o.mapper.bindElements(n.item,a),o.writer.insert(_,a),o.convertAttributes(n.item),uc(a,i,o,{reconversion:n.reconversion})}}function Ua(r){return(e,t,n)=>{t.isOpening=!0;const o=r(t,n);t.isOpening=!1;const i=r(t,n);if(!o||!i)return;const a=t.markerRange;if(a.isCollapsed&&!n.consumable.consume(a,e.name))return;for(const H of a)if(!n.consumable.consume(H.item,e.name))return;const _=n.mapper,S=n.writer;S.insert(_.toViewPosition(a.start),o),n.mapper.bindElementToMarker(o,t.markerName),a.isCollapsed||(S.insert(_.toViewPosition(a.end),i),n.mapper.bindElementToMarker(i,t.markerName)),e.stop()}}function Ha(){return(r,e,t)=>{const n=t.mapper.markerNameToElements(e.markerName);if(n){for(const o of n)t.mapper.unbindElementFromMarkerName(o,e.markerName),t.writer.clear(t.writer.createRangeOn(o),o);t.writer.clearClonedElementsGroup(e.markerName),r.stop()}}}function Ka(r){return(e,t,n)=>{const o=r(t.markerName,n);if(!o)return;const i=t.markerRange;n.consumable.consume(i,e.name)&&(Us(i,!1,n,t,o),Us(i,!0,n,t,o),e.stop())}}function Us(r,e,t,n,o){const i=e?r.start:r.end,a=i.nodeAfter&&i.nodeAfter.is("element")?i.nodeAfter:null,_=i.nodeBefore&&i.nodeBefore.is("element")?i.nodeBefore:null;if(a||_){let H,X;e&&a||!e&&!_?(H=a,X=!0):(H=_,X=!1);const se=t.mapper.toViewElement(H);if(se){$a(se,e,X,t,n,o);return}}const S=t.mapper.toViewPosition(i);Ga(S,e,t,n,o)}function $a(r,e,t,n,o,i){const a=`data-${i.group}-${e?"start":"end"}-${t?"before":"after"}`,_=r.hasAttribute(a)?r.getAttribute(a).split(","):[];_.unshift(i.name),n.writer.setAttribute(a,_.join(","),r),n.mapper.bindElementToMarker(r,o.markerName)}function Ga(r,e,t,n,o){const i=`${o.group}-${e?"start":"end"}`,a=o.name?{name:o.name}:null,_=t.writer.createUIElement(i,a);t.writer.insert(r,_),t.mapper.bindElementToMarker(_,n.markerName)}function Ja(r){return(e,t,n)=>{const o=r(t.markerName,n);if(!o)return;const i=n.mapper.markerNameToElements(t.markerName);if(!i)return;for(const _ of i)n.mapper.unbindElementFromMarkerName(_,t.markerName),_.is("containerElement")?(a(`data-${o.group}-start-before`,_),a(`data-${o.group}-start-after`,_),a(`data-${o.group}-end-before`,_),a(`data-${o.group}-end-after`,_)):n.writer.clear(n.writer.createRangeOn(_),_);n.writer.clearClonedElementsGroup(t.markerName),e.stop();function a(_,S){if(S.hasAttribute(_)){const H=new Set(S.getAttribute(_).split(","));H.delete(o.name),H.size==0?n.writer.removeAttribute(_,S):n.writer.setAttribute(_,Array.from(H).join(","),S)}}}}function Xa(r){return(e,t,n)=>{if(!n.consumable.test(t.item,e.name))return;const o=r(t.attributeOldValue,n,t),i=r(t.attributeNewValue,n,t);if(!o&&!i)return;n.consumable.consume(t.item,e.name);const a=n.mapper.toViewElement(t.item),_=n.writer;if(!a)throw new T.Bb("conversion-attribute-to-attribute-on-text",n.dispatcher,t);if(t.attributeOldValue!==null&&o)if(o.key=="class"){const S=(0,T.qo)(o.value);for(const H of S)_.removeClass(H,a)}else if(o.key=="style"){const S=Object.keys(o.value);for(const H of S)_.removeStyle(H,a)}else _.removeAttribute(o.key,a);if(t.attributeNewValue!==null&&i)if(i.key=="class"){const S=(0,T.qo)(i.value);for(const H of S)_.addClass(H,a)}else if(i.key=="style"){const S=Object.keys(i.value);for(const H of S)_.setStyle(H,i.value[H],a)}else _.setAttribute(i.key,i.value,a)}}function Ya(r){return(e,t,n)=>{if(!t.item||!(t.item instanceof dr||t.item instanceof wt)&&!t.item.is("$textProxy"))return;const o=ms(r,t,n);if(!o||!n.consumable.consume(t.item,e.name))return;const i=n.writer,a=Zs(i,o),_=i.document.selection;if(t.item instanceof dr||t.item instanceof wt)i.wrap(_.getFirstRange(),a);else{const S=n.mapper.toViewRange(t.range),H=i.wrap(S,a);for(const X of H.getItems())if(X.is("attributeElement")&&X.isSimilar(a)){n.mapper.bindElementToMarker(X,t.markerName);break}}}}function Qa(r){return(e,t,n)=>{if(!t.item||!(t.item instanceof Bt))return;const o=ms(r,t,n);if(!o||!n.consumable.test(t.item,e.name))return;const i=n.mapper.toViewElement(t.item);if(i&&i.getCustomProperty("addHighlight")){n.consumable.consume(t.item,e.name);for(const _ of ie._createIn(t.item))n.consumable.consume(_.item,e.name);i.getCustomProperty("addHighlight")(i,o,n.writer),n.mapper.bindElementToMarker(i,t.markerName)}}}function qa(r){return(e,t,n)=>{if(t.markerRange.isCollapsed)return;const o=ms(r,t,n);if(!o)return;const i=Zs(n.writer,o),a=n.mapper.markerNameToElements(t.markerName);if(a){for(const _ of a)n.mapper.unbindElementFromMarkerName(_,t.markerName),_.is("attributeElement")?n.writer.unwrap(n.writer.createRangeOn(_),i):_.getCustomProperty("removeHighlight")(_,o.id,n.writer);n.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}function ec(r){const e=Hs(r.model),t=ki(r.view,"container");return e.attributes.length&&(e.children=!0),n=>{n.on(`insert:${e.name}`,ja(t,Js(e)),{priority:r.converterPriority||"normal"}),(e.children||e.attributes.length)&&n.on("reduceChanges",Gs(e),{priority:"low"})}}function tc(r){const e=Hs(r.model),t=ki(r.view,"container");return e.children=!0,n=>{if(n._conversionApi.schema.checkChild(e.name,"$text"))throw new T.Bb("conversion-element-to-structure-disallowed-text",n,{elementName:e.name});n.on(`insert:${e.name}`,Za(t,Js(e)),{priority:r.converterPriority||"normal"}),n.on("reduceChanges",Gs(e),{priority:"low"})}}function nc(r){r=Do(r);let e=r.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const o of e.values)r.view[o]=ki(r.view[o],"attribute");else r.view=ki(r.view,"attribute");const n=Ks(r);return o=>{o.on(t,Wa(n),{priority:r.converterPriority||"normal"})}}function rc(r){r=Do(r);let e=r.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const o of e.values)r.view[o]=$s(r.view[o]);else r.view=$s(r.view);const n=Ks(r);return o=>{o.on(t,Xa(n),{priority:r.converterPriority||"normal"})}}function oc(r){const e=ki(r.view,"ui");return t=>{t.on(`addMarker:${r.model}`,Ua(e),{priority:r.converterPriority||"normal"}),t.on(`removeMarker:${r.model}`,Ha(),{priority:r.converterPriority||"normal"})}}function ic(r){r=Do(r);const e=r.model;let t=r.view;return t||(t=n=>({group:e,name:n.substr(r.model.length+1)})),n=>{n.on(`addMarker:${e}`,Ka(t),{priority:r.converterPriority||"normal"}),n.on(`removeMarker:${e}`,Ja(t),{priority:r.converterPriority||"normal"})}}function sc(r){return e=>{e.on(`addMarker:${r.model}`,Ya(r.view),{priority:r.converterPriority||"normal"}),e.on(`addMarker:${r.model}`,Qa(r.view),{priority:r.converterPriority||"normal"}),e.on(`removeMarker:${r.model}`,qa(r.view),{priority:r.converterPriority||"normal"})}}function Hs(r){return typeof r=="string"&&(r={name:r}),r.attributes?Array.isArray(r.attributes)||(r.attributes=[r.attributes]):r.attributes=[],r.children=!!r.children,r}function ki(r,e){return typeof r=="function"?r:(t,n)=>ac(r,n,e)}function ac(r,e,t){typeof r=="string"&&(r={name:r});let n;const o=e.writer,i=Object.assign({},r.attributes);if(t=="container")n=o.createContainerElement(r.name,i);else if(t=="attribute"){const a={priority:r.priority||Jn.DEFAULT_PRIORITY};n=o.createAttributeElement(r.name,i,a)}else n=o.createUIElement(r.name,i);if(r.styles){const a=Object.keys(r.styles);for(const _ of a)o.setStyle(_,r.styles[_],n)}if(r.classes){const a=r.classes;if(typeof a=="string")o.addClass(a,n);else for(const _ of a)o.addClass(_,n)}return n}function Ks(r){return r.model.values?(e,t,n)=>{const o=r.view[e];return o?o(e,t,n):null}:r.view}function $s(r){return typeof r=="string"?e=>({key:r,value:e}):typeof r=="object"?r.value?()=>r:e=>({key:r.key,value:e}):r}function ms(r,e,t){const n=typeof r=="function"?r(e,t):r;return n?(n.priority||(n.priority=10),n.id||(n.id=e.markerName),n):null}function cc(r){return(e,t)=>{if(!e.is("element",r.name))return!1;if(t.type=="attribute"){if(r.attributes.includes(t.attributeKey))return!0}else{if(r.children)return!0}return!1}}function Gs(r){const e=cc(r);return(t,n)=>{const o=[];n.reconvertedElements||(n.reconvertedElements=new Set);for(const i of n.changes){const a=i.type=="attribute"?i.range.start.nodeAfter:i.position.parent;if(!a||!e(a,i)){o.push(i);continue}if(!n.reconvertedElements.has(a)){n.reconvertedElements.add(a);const _=ge._createBefore(a);let S=o.length;for(let H=o.length-1;H>=0;H--){const X=o[H],Se=(X.type=="attribute"?X.range.start:X.position).compareWith(_);if(Se=="before"||X.type=="remove"&&Se=="same")break;S=H}o.splice(S,0,{type:"remove",name:a.name,position:_,length:1},{type:"reinsert",name:a.name,position:_,length:1})}}n.changes=o}}function Js(r){return(e,t,n={})=>{const o=["insert"];for(const i of r.attributes)e.hasAttribute(i)&&o.push(`attribute:${i}`);return o.every(i=>t.test(e,i))?(n.preflight||o.forEach(i=>t.consume(e,i)),!0):!1}}function lc(r,e,t){return(n,o)=>{const i=n.createContainerElement("$slot");let a=null;if(o==="children")a=Array.from(r.getChildren());else if(typeof o=="function")a=Array.from(r.getChildren()).filter(_=>o(_));else throw new T.Bb("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:o});return e.set(i,a),i}}function dc(r,e,t){const n=Array.from(e.values()).flat(),o=new Set(n);if(o.size!=n.length)throw new T.Bb("conversion-slot-filter-overlap",t.dispatcher,{element:r});if(o.size!=r.childCount)throw new T.Bb("conversion-slot-filter-incomplete",t.dispatcher,{element:r})}function uc(r,e,t,n){t.mapper.on("modelToViewPosition",a,{priority:"highest"});let o=null,i=null;for([o,i]of e)Xs(r,i,t,n),t.writer.move(t.writer.createRangeIn(o),t.writer.createPositionBefore(o)),t.writer.remove(o);t.mapper.off("modelToViewPosition",a);function a(_,S){const H=S.modelPosition.nodeAfter,X=i.indexOf(H);X<0||(S.viewPosition=S.mapper.findPositionIn(o,X))}}function Xs(r,e,t,n){for(const o of e)hc(r.root,o,t,n)||t.convertItem(o)}function hc(r,e,t,n){const{writer:o,mapper:i}=t;if(!n.reconversion)return!1;const a=i.toViewElement(e);return!a||a.root==r||!t.canReuseView(a)?!1:(o.move(o.createRangeOn(a),i.toViewPosition(ge._createBefore(e))),!0)}function fc(r,e,{preflight:t}={}){return t?e.test(r,"insert"):e.consume(r,"insert")}function Ys(r){const{schema:e,document:t}=r.model;for(const n of t.getRoots())if(n.isEmpty&&!e.checkChild(n,"$text")&&e.checkChild(n,"paragraph"))return r.insertElement("paragraph",n),!0;return!1}function Qs(r,e,t){const n=t.createContext(r);return!(!t.checkChild(n,"paragraph")||!t.checkChild(n.push("paragraph"),e))}function qs(r,e){const t=e.createElement("paragraph");return e.insert(t,r),e.createPositionAt(t,0)}class gc extends zs{elementToElement(e){return this.add(ta(e))}elementToAttribute(e){return this.add(mc(e))}attributeToAttribute(e){return this.add(bc(e))}elementToMarker(e){return this.add(wc(e))}dataToMarker(e){return this.add(kc(e))}}function ea(){return(r,e,t)=>{if(!e.modelRange&&t.consumable.consume(e.viewItem,{name:!0})){const{modelRange:n,modelCursor:o}=t.convertChildren(e.viewItem,e.modelCursor);e.modelRange=n,e.modelCursor=o}}}function _c(){return(r,e,{schema:t,consumable:n,writer:o})=>{let i=e.modelCursor;if(!n.test(e.viewItem))return;if(!t.checkChild(i,"$text")){if(!Qs(i,"$text",t)||e.viewItem.data.trim().length==0)return;const _=i.nodeBefore;i=qs(i,o),_&&_.is("element","$marker")&&(o.move(o.createRangeOn(_),i),i=o.createPositionAfter(_))}n.consume(e.viewItem);const a=o.createText(e.viewItem.data);o.insert(a,i),e.modelRange=o.createRange(i,i.getShiftedBy(a.offsetSize)),e.modelCursor=e.modelRange.end}}function pc(r,e){return(t,n)=>{const o=n.newSelection,i=[];for(const _ of o.getRanges())i.push(e.toModelRange(_));const a=r.createSelection(i,{backward:o.isBackward});a.isEqual(r.document.selection)||r.change(_=>{_.setSelection(a)})}}function ta(r){r=Do(r);const e=ws(r),t=bs(r.view),n=t?`element:${t}`:"element";return o=>{o.on(n,e,{priority:r.converterPriority||"normal"})}}function mc(r){r=Do(r),na(r);const e=ra(r,!1),t=bs(r.view),n=t?`element:${t}`:"element";return o=>{o.on(n,e,{priority:r.converterPriority||"low"})}}function bc(r){r=Do(r);let e=null;(typeof r.view=="string"||r.view.key)&&(e=Ec(r)),na(r,e);const t=ra(r,!0);return n=>{n.on("element",t,{priority:r.converterPriority||"low"})}}function wc(r){const e=Cc(r.model);return ta(Hr(Ge({},r),{model:e}))}function kc(r){r=Do(r),r.model||(r.model=o=>o?r.view+":"+o:r.view);const e={view:r.view,model:r.model},t=ws(oa(e,"start")),n=ws(oa(e,"end"));return o=>{o.on(`element:${r.view}-start`,t,{priority:r.converterPriority||"normal"}),o.on(`element:${r.view}-end`,n,{priority:r.converterPriority||"normal"});const i=T.tA.low,a=T.tA.highest,_=T.tA.get(r.converterPriority)/a;o.on("element",vc(e),{priority:i+_})}}function vc(r){return(e,t,n)=>{const o=`data-${r.view}`;if(!n.consumable.test(t.viewItem,{attributes:o+"-end-after"})&&!n.consumable.test(t.viewItem,{attributes:o+"-start-after"})&&!n.consumable.test(t.viewItem,{attributes:o+"-end-before"})&&!n.consumable.test(t.viewItem,{attributes:o+"-start-before"}))return;t.modelRange||Object.assign(t,n.convertChildren(t.viewItem,t.modelCursor)),n.consumable.consume(t.viewItem,{attributes:o+"-end-after"})&&i(t.modelRange.end,t.viewItem.getAttribute(o+"-end-after").split(",")),n.consumable.consume(t.viewItem,{attributes:o+"-start-after"})&&i(t.modelRange.end,t.viewItem.getAttribute(o+"-start-after").split(",")),n.consumable.consume(t.viewItem,{attributes:o+"-end-before"})&&i(t.modelRange.start,t.viewItem.getAttribute(o+"-end-before").split(",")),n.consumable.consume(t.viewItem,{attributes:o+"-start-before"})&&i(t.modelRange.start,t.viewItem.getAttribute(o+"-start-before").split(","));function i(a,_){for(const S of _){const H=r.model(S,n),X=n.writer.createElement("$marker",{"data-name":H});n.writer.insert(X,a),t.modelCursor.isEqual(a)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(a,1),t.modelRange=t.modelRange._getTransformedByInsertion(a,1)[0]}}}}function bs(r){return typeof r=="string"?r:typeof r=="object"&&typeof r.name=="string"?r.name:null}function ws(r){const e=new Ht(r.view);return(t,n,o)=>{const i=e.match(n.viewItem);if(!i)return;const a=i.match;if(a.name=!0,!o.consumable.test(n.viewItem,a))return;const _=yc(r.model,n.viewItem,o);_&&o.safeInsert(_,n.modelCursor)&&(o.consumable.consume(n.viewItem,a),o.convertChildren(n.viewItem,_),o.updateConversionResult(_,n))}}function yc(r,e,t){return r instanceof Function?r(e,t):t.writer.createElement(r)}function Ec(r){typeof r.view=="string"&&(r.view={key:r.view});const e=r.view.key;let t;if(e=="class"||e=="style")t={[e=="class"?"classes":"styles"]:r.view.value};else{const n=typeof r.view.value=="undefined"?/[\s\S]*/:r.view.value;t={attributes:{[e]:n}}}return r.view.name&&(t.name=r.view.name),r.view=t,e}function na(r,e=null){const t=e===null?!0:i=>i.getAttribute(e),n=typeof r.model!="object"?r.model:r.model.key,o=typeof r.model!="object"||typeof r.model.value=="undefined"?t:r.model.value;r.model={key:n,value:o}}function ra(r,e){const t=new Ht(r.view);return(n,o,i)=>{if(!o.modelRange&&e)return;const a=t.match(o.viewItem);if(!a||(Tc(r.view,o.viewItem)?a.match.name=!0:delete a.match.name,!i.consumable.test(o.viewItem,a.match)))return;const _=r.model.key,S=typeof r.model.value=="function"?r.model.value(o.viewItem,i):r.model.value;if(S===null)return;o.modelRange||Object.assign(o,i.convertChildren(o.viewItem,o.modelCursor)),Pc(o.modelRange,{key:_,value:S},e,i)&&(i.consumable.test(o.viewItem,{name:!0})&&(a.match.name=!0),i.consumable.consume(o.viewItem,a.match))}}function Tc(r,e){const t=typeof r=="function"?r(e):r;return typeof t=="object"&&!bs(t)?!1:!t.classes&&!t.attributes&&!t.styles}function Pc(r,e,t,n){let o=!1;for(const i of Array.from(r.getItems({shallow:t})))n.schema.checkAttribute(i,e.key)&&(o=!0,!i.hasAttribute(e.key)&&n.writer.setAttribute(e.key,e.value,i));return o}function Cc(r){return(e,t)=>{const n=typeof r=="string"?r:r(e,t);return t.writer.createElement("$marker",{"data-name":n})}}function oa(r,e){const t=(n,o)=>{const i=n.getAttribute("name"),a=r.model(i,o);return o.writer.createElement("$marker",{"data-name":a})};return{view:`${r.view}-${e}`,model:t}}function xc(r){r.document.registerPostFixer(e=>Ac(e,r))}function Ac(r,e){const t=e.document.selection,n=e.schema,o=[];let i=!1;for(const a of t.getRanges()){const _=ia(a,n);_&&!_.isEqual(a)?(o.push(_),i=!0):o.push(a)}return i&&r.setSelection(Mc(o),{backward:t.isBackward}),!1}function ia(r,e){return r.isCollapsed?Sc(r,e):Oc(r,e)}function Sc(r,e){const t=r.start,n=e.getNearestSelectionRange(t);if(!n){const i=t.getAncestors().reverse().find(a=>e.isObject(a));return i?ie._createOn(i):null}if(!n.isCollapsed)return n;const o=n.start;return t.isEqual(o)?null:new ie(o)}function Oc(r,e){const{start:t,end:n}=r,o=e.checkChild(t,"$text"),i=e.checkChild(n,"$text"),a=e.getLimitElement(t),_=e.getLimitElement(n);if(a===_){if(o&&i)return null;if(Rc(t,n,e)){const se=t.nodeAfter&&e.isSelectable(t.nodeAfter)?null:e.getNearestSelectionRange(t,"forward"),Ze=n.nodeBefore&&e.isSelectable(n.nodeBefore)?null:e.getNearestSelectionRange(n,"backward"),at=se?se.start:t,Ut=Ze?Ze.end:n;return new ie(at,Ut)}}const S=a&&!a.is("rootElement"),H=_&&!_.is("rootElement");if(S||H){const X=t.nodeAfter&&n.nodeBefore&&t.nodeAfter.parent===n.nodeBefore.parent,se=S&&(!X||!aa(t.nodeAfter,e)),Se=H&&(!X||!aa(n.nodeBefore,e));let Ze=t,at=n;return se&&(Ze=ge._createBefore(sa(a,e))),Se&&(at=ge._createAfter(sa(_,e))),new ie(Ze,at)}return null}function sa(r,e){let t=r,n=t;for(;e.isLimit(n)&&n.parent;)t=n,n=n.parent;return t}function Rc(r,e,t){const n=r.nodeAfter&&!t.isLimit(r.nodeAfter)||t.checkChild(r,"$text"),o=e.nodeBefore&&!t.isLimit(e.nodeBefore)||t.checkChild(e,"$text");return n||o}function Mc(r){const e=[...r],t=new Set;let n=1;for(;n<e.length;){const i=e[n],a=e.slice(0,n);for(const[_,S]of a.entries())if(!t.has(_)){if(i.isEqual(S))t.add(_);else if(i.isIntersecting(S)){t.add(_),t.add(n);const H=i.getJoined(S);e.push(H)}}n++}return e.filter((i,a)=>!t.has(a))}function aa(r,e){return r&&e.isSelectable(r)}class Dc extends(0,T.Re)(){constructor(e,t){super(),this.model=e,this.view=new Vs(t),this.mapper=new Xo,this.downcastDispatcher=new _s({mapper:this.mapper,schema:e.schema});const n=this.model.document,o=n.selection,i=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(n,"change",()=>{this.view.change(a=>{this.downcastDispatcher.convertChanges(n.differ,i,a),this.downcastDispatcher.convertSelection(o,i,a)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",pc(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",Ic(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",Ws(),{priority:"lowest"}),this.downcastDispatcher.on("insert",js(),{priority:"lowest"}),this.downcastDispatcher.on("remove",Na(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",za()),this.downcastDispatcher.on("selection",La(),{priority:"low"}),this.downcastDispatcher.on("selection",Fa(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(a=>{if(a.rootName=="$graveyard")return null;const _=new fo(this.view.document,a.name);return _.rootName=a.rootName,this.mapper.bindElements(a,_),_})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const t=typeof e=="string"?e:e.name,n=this.model.markers.get(t);if(!n)throw new T.Bb("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:t});this.model.change(()=>{this.model.markers._refresh(n)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}function Ic(r,e,t){return(n,o)=>{if(!(t.document.isComposing&&!T.OB.isAndroid))for(let i=0;i<o.targetRanges.length;i++){const a=o.targetRanges[i],_=r.toModelRange(a),S=ia(_,e);!S||S.isEqual(_)||(o.targetRanges[i]=r.toViewRange(S))}}}class vi{constructor(){this._consumables=new Map}add(e,t){let n;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?n=this._consumables.get(e):(n=new Bc(e),this._consumables.set(e,n)),n.add(t)}test(e,t){const n=this._consumables.get(e);return n===void 0?null:e.is("$text")||e.is("documentFragment")?n:n.test(t)}consume(e,t){return this.test(e,t)?(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0):!1}revert(e,t){const n=this._consumables.get(e);n!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):n.revert(t))}static consumablesFromElement(e){const t={element:e,name:!0,attributes:[],classes:[],styles:[]},n=e.getAttributeKeys();for(const a of n)a=="style"||a=="class"||t.attributes.push(a);const o=e.getClassNames();for(const a of o)t.classes.push(a);const i=e.getStyleNames();for(const a of i)t.styles.push(a);return t}static createFrom(e,t){if(t||(t=new vi),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,vi.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(const n of e.getChildren())t=vi.createFrom(n,t);return t}}const ji=["attributes","classes","styles"];class Bc{constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const t of ji)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const t of ji)if(t in e){const n=this._test(t,e[t]);if(n!==!0)return n}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const t of ji)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(const t of ji)t in e&&this._revert(t,e[t])}_add(e,t){const n=(0,Ye.Z)(t)?t:[t],o=this._consumables[e];for(const i of n){if(e==="attributes"&&(i==="class"||i==="style"))throw new T.Bb("viewconsumable-invalid-attribute",this);if(o.set(i,!0),e==="styles")for(const a of this.element.document.stylesProcessor.getRelatedStyles(i))o.set(a,!0)}}_test(e,t){const n=(0,Ye.Z)(t)?t:[t],o=this._consumables[e];for(const i of n)if(e==="attributes"&&(i==="class"||i==="style")){const a=i=="class"?"classes":"styles",_=this._test(a,[...this._consumables[a].keys()]);if(_!==!0)return _}else{const a=o.get(i);if(a===void 0)return null;if(!a)return!1}return!0}_consume(e,t){const n=(0,Ye.Z)(t)?t:[t],o=this._consumables[e];for(const i of n)if(e==="attributes"&&(i==="class"||i==="style")){const a=i=="class"?"classes":"styles";this._consume(a,[...this._consumables[a].keys()])}else if(o.set(i,!1),e=="styles")for(const a of this.element.document.stylesProcessor.getRelatedStyles(i))o.set(a,!1)}_revert(e,t){const n=(0,Ye.Z)(t)?t:[t],o=this._consumables[e];for(const i of n)if(e==="attributes"&&(i==="class"||i==="style")){const a=i=="class"?"classes":"styles";this._revert(a,[...this._consumables[a].keys()])}else o.get(i)===!1&&o.set(i,!0)}}class Vc extends(0,T.Re)(){constructor(){super(),this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new Yo(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new Yo(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new T.Bb("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new T.Bb("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return typeof e=="string"?t=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?t="$text":t=e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const t=this.getDefinition(e);return!!(t&&t.isBlock)}isLimit(e){const t=this.getDefinition(e);return t?!!(t.isLimit||t.isObject):!1}isObject(e){const t=this.getDefinition(e);return t?!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent):!1}isInline(e){const t=this.getDefinition(e);return!!(t&&t.isInline)}isSelectable(e){const t=this.getDefinition(e);return t?!!(t.isSelectable||t.isObject):!1}isContent(e){const t=this.getDefinition(e);return t?!!(t.isContent||t.isObject):!1}checkChild(e,t){return t?this._checkContextMatch(t,e):!1}checkAttribute(e,t){const n=this.getDefinition(e.last);return n?n.allowAttributes.includes(t):!1}checkMerge(e,t){if(e instanceof ge){const n=e.nodeBefore,o=e.nodeAfter;if(!(n instanceof Bt))throw new T.Bb("schema-check-merge-no-element-before",this);if(!(o instanceof Bt))throw new T.Bb("schema-check-merge-no-element-after",this);return this.checkMerge(n,o)}for(const n of t.getChildren())if(!this.checkChild(e,n))return!1;return!0}addChildCheck(e){this.on("checkChild",(t,[n,o])=>{if(!o)return;const i=e(n,o);typeof i=="boolean"&&(t.stop(),t.return=i)},{priority:"high"})}addAttributeCheck(e){this.on("checkAttribute",(t,[n,o])=>{const i=e(n,o);typeof i=="boolean"&&(t.stop(),t.return=i)},{priority:"high"})}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||{}}getLimitElement(e){let t;for(e instanceof ge?t=e.parent:t=(e instanceof ie?[e]:Array.from(e.getRanges())).reduce((o,i)=>{const a=i.getCommonAncestor();return o?o.getCommonAncestor(a,{includeSelf:!0}):a},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){const o=[...e.getFirstPosition().getAncestors(),new It("",e.getAttributes())];return this.checkAttribute(o,t)}else{const n=e.getRanges();for(const o of n)for(const i of o)if(this.checkAttribute(i.item,t))return!0}return!1}*getValidRanges(e,t){e=Qc(e);for(const n of e)yield*this._getValidRangesForRange(n,t)}getNearestSelectionRange(e,t="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new ie(e);let n,o;const i=e.getAncestors().reverse().find(a=>this.isLimit(a))||e.root;(t=="both"||t=="backward")&&(n=new wo({boundaries:ie._createIn(i),startPosition:e,direction:"backward"})),(t=="both"||t=="forward")&&(o=new wo({boundaries:ie._createIn(i),startPosition:e}));for(const a of Yc(n,o)){const _=a.walker==n?"elementEnd":"elementStart",S=a.value;if(S.type==_&&this.isObject(S.item))return ie._createOn(S.item);if(this.checkChild(S.nextPosition,"$text"))return new ie(S.nextPosition)}return null}findAllowedParent(e,t){let n=e.parent;for(;n;){if(this.checkChild(n,t))return n;if(this.isLimit(n))return null;n=n.parent}return null}setAllowedAttributes(e,t,n){const o=n.model;for(const[i,a]of Object.entries(t))o.schema.checkAttribute(e,i)&&n.setAttribute(i,a,e)}removeDisallowedAttributes(e,t){for(const n of e)if(n.is("$text"))ca(this,n,t);else{const i=ie._createIn(n).getPositions();for(const a of i){const _=a.nodeBefore||a.parent;ca(this,_,t)}}}getAttributesWithProperty(e,t,n){const o={};for(const[i,a]of e.getAttributes()){const _=this.getAttributeProperties(i);_[t]!==void 0&&(n===void 0||n===_[t])&&(o[i]=a)}return o}createContext(e){return new Yo(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},t=this._sourceDefinitions,n=Object.keys(t);for(const o of n)e[o]=Nc(t[o],o);for(const o of n)Lc(e,o);for(const o of n)Fc(e,o);for(const o of n)zc(e,o);for(const o of n)Wc(e,o),jc(e,o);for(const o of n)Zc(e,o),Uc(e,o),Hc(e,o);this._compiledDefinitions=e}_checkContextMatch(e,t,n=t.length-1){const o=t.getItem(n);if(e.allowIn.includes(o.name)){if(n==0)return!0;{const i=this.getDefinition(o);return this._checkContextMatch(i,t,n-1)}}else return!1}*_getValidRangesForRange(e,t){let n=e.start,o=e.start;for(const i of e.getItems({shallow:!0}))i.is("element")&&(yield*this._getValidRangesForRange(ie._createIn(i),t)),this.checkAttribute(i,t)||(n.isEqual(o)||(yield new ie(n,o)),n=ge._createAfter(i)),o=ge._createAfter(i);n.isEqual(o)||(yield new ie(n,o))}}class Yo{constructor(e){if(e instanceof Yo)return e;let t;typeof e=="string"?t=[e]:Array.isArray(e)?t=e:t=e.getAncestors({includeSelf:!0}),this._items=t.map(Xc)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new Yo([e]);return t._items=[...this._items,...t._items],t}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function Nc(r,e){const t={name:e,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]};return Kc(r,t),Qo(r,t,"allowIn"),Qo(r,t,"allowContentOf"),Qo(r,t,"allowWhere"),Qo(r,t,"allowAttributes"),Qo(r,t,"allowAttributesOf"),Qo(r,t,"allowChildren"),Qo(r,t,"inheritTypesFrom"),$c(r,t),t}function Lc(r,e){const t=r[e];for(const n of t.allowChildren){const o=r[n];o&&o.allowIn.push(e)}t.allowChildren.length=0}function Fc(r,e){for(const t of r[e].allowContentOf)r[t]&&Gc(r,t).forEach(o=>{o.allowIn.push(e)});delete r[e].allowContentOf}function zc(r,e){for(const t of r[e].allowWhere){const n=r[t];if(n){const o=n.allowIn;r[e].allowIn.push(...o)}}delete r[e].allowWhere}function Wc(r,e){for(const t of r[e].allowAttributesOf){const n=r[t];if(n){const o=n.allowAttributes;r[e].allowAttributes.push(...o)}}delete r[e].allowAttributesOf}function jc(r,e){const t=r[e];for(const n of t.inheritTypesFrom){const o=r[n];if(o){const i=Object.keys(o).filter(a=>a.startsWith("is"));for(const a of i)a in t||(t[a]=o[a])}}delete t.inheritTypesFrom}function Zc(r,e){const t=r[e],n=t.allowIn.filter(o=>r[o]);t.allowIn=Array.from(new Set(n))}function Uc(r,e){const t=r[e];for(const n of t.allowIn)r[n].allowChildren.push(e)}function Hc(r,e){const t=r[e];t.allowAttributes=Array.from(new Set(t.allowAttributes))}function Kc(r,e){for(const t of r){const n=Object.keys(t).filter(o=>o.startsWith("is"));for(const o of n)e[o]=!!t[o]}}function Qo(r,e,t){for(const n of r){const o=n[t];typeof o=="string"?e[t].push(o):Array.isArray(o)&&e[t].push(...o)}}function $c(r,e){for(const t of r){const n=t.inheritAllFrom;n&&(e.allowContentOf.push(n),e.allowWhere.push(n),e.allowAttributesOf.push(n),e.inheritTypesFrom.push(n))}}function Gc(r,e){const t=r[e];return Jc(r).filter(n=>n.allowIn.includes(t.name))}function Jc(r){return Object.keys(r).map(e=>r[e])}function Xc(r){return typeof r=="string"||r.is("documentFragment")?{name:typeof r=="string"?r:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:r.is("element")?r.name:"$text",*getAttributeKeys(){yield*r.getAttributeKeys()},getAttribute(e){return r.getAttribute(e)}}}function*Yc(r,e){let t=!1;for(;!t;){if(t=!0,r){const n=r.next();n.done||(t=!1,yield{walker:r,value:n.value})}if(e){const n=e.next();n.done||(t=!1,yield{walker:e,value:n.value})}}}function*Qc(r){for(const e of r)yield*e.getMinimalFlatRanges()}function ca(r,e,t){for(const n of e.getAttributeKeys())r.checkAttribute(e,n)||t.removeAttribute(n,e)}class qc extends(0,T.ln)(){constructor(e){super(),this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this._emptyElementsToKeep=new Set,this.conversionApi=Hr(Ge({},e),{consumable:null,writer:null,store:null,convertItem:(t,n)=>this._convertItem(t,n),convertChildren:(t,n)=>this._convertChildren(t,n),safeInsert:(t,n)=>this._safeInsert(t,n),updateConversionResult:(t,n)=>this._updateConversionResult(t,n),splitToAllowedParent:(t,n)=>this._splitToAllowedParent(t,n),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)})}convert(e,t,n=["$root"]){this.fire("viewCleanup",e),this._modelCursor=tl(n,t),this.conversionApi.writer=t,this.conversionApi.consumable=vi.createFrom(e),this.conversionApi.store={};const{modelRange:o}=this._convertItem(e,this._modelCursor),i=t.createDocumentFragment();if(o){this._removeEmptyElements();for(const a of Array.from(this._modelCursor.parent.getChildren()))t.append(a,i);i.markers=el(i,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,i}_convertItem(e,t){const n={viewItem:e,modelCursor:t,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,n,this.conversionApi):e.is("$text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof ie))throw new T.Bb("view-conversion-dispatcher-incorrect-result",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor}}_convertChildren(e,t){let n=t.is("position")?t:ge._createAt(t,0);const o=new ie(n);for(const i of Array.from(e.getChildren())){const a=this._convertItem(i,n);a.modelRange instanceof ie&&(o.end=a.modelRange.end,n=a.modelCursor)}return{modelRange:o,modelCursor:n}}_safeInsert(e,t){const n=this._splitToAllowedParent(e,t);return n?(this.conversionApi.writer.insert(e,n.position),!0):!1}_updateConversionResult(e,t){const n=this._getSplitParts(e),o=this.conversionApi.writer;t.modelRange||(t.modelRange=o.createRange(o.createPositionBefore(e),o.createPositionAfter(n[n.length-1])));const i=this._cursorParents.get(e);i?t.modelCursor=o.createPositionAt(i,0):t.modelCursor=t.modelRange.end}_splitToAllowedParent(e,t){const{schema:n,writer:o}=this.conversionApi;let i=n.findAllowedParent(t,e);if(i){if(i===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(i)&&(i=null)}if(!i)return Qs(t,e,n)?{position:qs(t,o)}:null;const a=this.conversionApi.writer.split(t,i),_=[];for(const H of a.range.getWalker())if(H.type=="elementEnd")_.push(H.item);else{const X=_.pop(),se=H.item;this._registerSplitPair(X,se)}const S=a.range.end.parent;return this._cursorParents.set(e,S),{position:a.position,cursorParent:S}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);const n=this._splitParts.get(e);this._splitParts.set(t,n),n.push(t)}_getSplitParts(e){let t;return this._splitParts.has(e)?t=this._splitParts.get(e):t=[e],t}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){let e=!1;for(const t of this._splitParts.keys())t.isEmpty&&!this._emptyElementsToKeep.has(t)&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}}function el(r,e){const t=new Set,n=new Map,o=ie._createIn(r).getItems();for(const i of o)i.is("element","$marker")&&t.add(i);for(const i of t){const a=i.getAttribute("data-name"),_=e.createPositionBefore(i);n.has(a)?n.get(a).end=_.clone():n.set(a,new ie(_.clone())),e.remove(i)}return n}function tl(r,e){let t;for(const n of new Yo(r)){const o={};for(const a of n.getAttributeKeys())o[a]=n.getAttribute(a);const i=e.createElement(n.name,o);t&&e.insert(i,t),t=ge._createAt(i,0)}return t}class nl{getHtml(e){const n=document.implementation.createHTMLDocument("").createElement("div");return n.appendChild(e),n.innerHTML}}class rl{constructor(e){this.skipComments=!0,this.domParser=new DOMParser,this.domConverter=new uo(e,{renderingMode:"data"}),this.htmlWriter=new nl}toData(e){const t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){e.match(/<(?:html|body|head|meta)(?:\s[^>]*)?>/i)||(e=`<body>${e}</body>`);const t=this.domParser.parseFromString(e,"text/html"),n=t.createDocumentFragment(),o=t.body.childNodes;for(;o.length>0;)n.appendChild(o[0]);return n}}class ol extends(0,T.ln)(){constructor(e,t){super(),this.model=e,this.mapper=new Xo,this.downcastDispatcher=new _s({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",Ws(),{priority:"lowest"}),this.downcastDispatcher.on("insert",js(),{priority:"lowest"}),this.upcastDispatcher=new qc({schema:e.schema}),this.viewDocument=new sr(t),this.stylesProcessor=t,this.htmlProcessor=new rl(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new F(this.viewDocument),this.upcastDispatcher.on("text",_c(),{priority:"lowest"}),this.upcastDispatcher.on("element",ea(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",ea(),{priority:"lowest"}),(0,T.Re)().prototype.decorate.call(this,"init"),(0,T.Re)().prototype.decorate.call(this,"set"),(0,T.Re)().prototype.decorate.call(this,"get"),(0,T.Re)().prototype.decorate.call(this,"toView"),(0,T.Re)().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},Ys)},{priority:"lowest"})}get(e={}){const{rootName:t="main",trim:n="empty"}=e;if(!this._checkIfRootsExists([t]))throw new T.Bb("datacontroller-get-non-existent-root",this);const o=this.model.document.getRoot(t);return o.isAttached()||(0,T.KE)("datacontroller-get-detached-root",this),n==="empty"&&!this.model.hasContent(o,{ignoreWhitespaces:!0})?"":this.stringify(o,e)}stringify(e,t={}){const n=this.toView(e,t);return this.processor.toData(n)}toView(e,t={}){const n=this.viewDocument,o=this._viewWriter;this.mapper.clearBindings();const i=ie._createIn(e),a=new y(n);this.mapper.bindElements(e,a);const _=e.is("documentFragment")?e.markers:il(e);return this.downcastDispatcher.convert(i,_,o,t),a}init(e){if(this.model.document.version)throw new T.Bb("datacontroller-init-document-not-empty",this);let t={};if(typeof e=="string"?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new T.Bb("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},n=>{for(const o of Object.keys(t)){const i=this.model.document.getRoot(o);n.insert(this.parse(t[o],i),i,0)}}),Promise.resolve()}set(e,t={}){let n={};if(typeof e=="string"?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new T.Bb("datacontroller-set-non-existent-root",this);this.model.enqueueChange(t.batchType||{},o=>{o.setSelection(null),o.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const i of Object.keys(n)){const a=this.model.document.getRoot(i);o.remove(o.createRangeIn(a)),o.insert(this.parse(n[i],a),a,0)}})}parse(e,t="$root"){const n=this.processor.toView(e);return this.toModel(n,t)}toModel(e,t="$root"){return this.model.change(n=>this.upcastDispatcher.convert(e,n,t))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const t of e)if(!this.model.document.getRoot(t))return!1;return!0}}function il(r){const e=[],t=r.root.document;if(!t)return new Map;const n=ie._createIn(r);for(const o of t.model.markers){const i=o.getRange(),a=i.isCollapsed,_=i.start.isEqual(n.start)||i.end.isEqual(n.end);if(a&&_)e.push([o.name,i]);else{const S=n.getIntersection(i);S&&e.push([o.name,S])}}return e.sort(([o,i],[a,_])=>{if(i.end.compareWith(_.start)!=="after")return 1;if(i.start.compareWith(_.end)!=="before")return-1;switch(i.start.compareWith(_.start)){case"before":return 1;case"after":return-1;default:switch(i.end.compareWith(_.end)){case"before":return 1;case"after":return-1;default:return a.localeCompare(o)}}}),new Map(e)}class sl{constructor(e,t){this._helpers=new Map,this._downcast=(0,T.qo)(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=(0,T.qo)(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const n=this._downcast.includes(t);if(!this._upcast.includes(t)&&!n)throw new T.Bb("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:n})}for(e){if(!this._helpers.has(e))throw new T.Bb("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:n}of ks(e))this.for("upcast").elementToElement({model:t,view:n,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:n}of ks(e))this.for("upcast").elementToAttribute({view:n,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:n}of ks(e))this.for("upcast").attributeToAttribute({view:n,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:n}){if(this._helpers.has(e))throw new T.Bb("conversion-group-exists",this);const o=n?new Va(t):new gc(t);this._helpers.set(e,o)}}function*ks(r){if(r.model.values)for(const e of r.model.values){const t={key:r.model.key,value:e},n=r.view[e],o=r.upcastAlso?r.upcastAlso[e]:void 0;yield*la(t,n,o)}else yield*la(r.model,r.view,r.upcastAlso)}function*la(r,e,t){if(yield{model:r,view:e},t)for(const n of(0,T.qo)(t))yield{model:r,view:n}}class Ur{constructor(e){this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}}function vs(r,e){const t=ua(e),n=t.reduce((a,_)=>a+_.offsetSize,0),o=r.parent;Ti(r);const i=r.index;return o._insertChild(i,t),Ei(o,i+t.length),Ei(o,i),new ie(r,r.getShiftedBy(n))}function da(r){if(!r.isFlat)throw new T.Bb("operation-utils-remove-range-not-flat",this);const e=r.start.parent;Ti(r.start),Ti(r.end);const t=e._removeChildren(r.start.index,r.end.index-r.start.index);return Ei(e,r.start.index),t}function yi(r,e){if(!r.isFlat)throw new T.Bb("operation-utils-move-range-not-flat",this);const t=da(r);return e=e._getTransformedByDeletion(r.start,r.end.offset-r.start.offset),vs(e,t)}function al(r,e,t){Ti(r.start),Ti(r.end);for(const n of r.getItems({shallow:!0})){const o=n.is("$textProxy")?n.textNode:n;t!==null?o._setAttribute(e,t):o._removeAttribute(e),Ei(o.parent,o.index)}Ei(r.end.parent,r.end.index)}function ua(r){const e=[];function t(n){if(typeof n=="string")e.push(new It(n));else if(n instanceof qn)e.push(new It(n.data,n.getAttributes()));else if(n instanceof Pr)e.push(n);else if((0,T.TW)(n))for(const o of n)t(o)}t(r);for(let n=1;n<e.length;n++){const o=e[n],i=e[n-1];o instanceof It&&i instanceof It&&ha(o,i)&&(e.splice(n-1,2,new It(i.data+o.data,i.getAttributes())),n--)}return e}function Ei(r,e){const t=r.getChild(e-1),n=r.getChild(e);if(t&&n&&t.is("$text")&&n.is("$text")&&ha(t,n)){const o=new It(t.data+n.data,t.getAttributes());r._removeChildren(e-1,2),r._insertChild(e-1,o)}}function Ti(r){const e=r.textNode,t=r.parent;if(e){const n=r.offset-e.startOffset,o=e.index;t._removeChildren(o,1);const i=new It(e.data.substr(0,n),e.getAttributes()),a=new It(e.data.substr(n),e.getAttributes());t._insertChild(o,[i,a])}}function ha(r,e){const t=r.getAttributes(),n=e.getAttributes();for(const o of t){if(o[1]!==e.getAttribute(o[0]))return!1;n.next()}return n.next().done}class At extends Ur{constructor(e,t,n,o){super(o),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[ie._createFromPositionAndShift(this.sourcePosition,this.howMany),ie._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new At(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new At(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent,n=this.sourcePosition.offset,o=this.targetPosition.offset;if(n+this.howMany>e.maxOffset)throw new T.Bb("move-operation-nodes-do-not-exist",this);if(e===t&&n<o&&o<n+this.howMany)throw new T.Bb("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&(0,T.Rt)(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const i=this.sourcePosition.path.length-1;if(this.targetPosition.path[i]>=n&&this.targetPosition.path[i]<n+this.howMany)throw new T.Bb("move-operation-node-into-itself",this)}}_execute(){yi(ie._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){const n=ge.fromJSON(e.sourcePosition,t),o=ge.fromJSON(e.targetPosition,t);return new this(n,e.howMany,o,e.baseVersion)}}class Sn extends Ur{constructor(e,t,n){super(n),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new ii(ua(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new ii([...this.nodes].map(n=>n._clone(!0))),t=new Sn(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){const e=this.position.root.document.graveyard,t=new ge(e,[0]);return new At(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new T.Bb("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new ii([...e].map(t=>t._clone(!0))),vs(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){const n=[];for(const i of e.nodes)i.name?n.push(Bt.fromJSON(i)):n.push(It.fromJSON(i));const o=new Sn(ge.fromJSON(e.position,t),n,e.baseVersion);return o.shouldReceiveAttributes=e.shouldReceiveAttributes,o}}class zt extends Ur{constructor(e,t,n,o,i){super(i),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=n,this.graveyardPosition=o?o.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new ge(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new ie(this.splitPosition,e)}get affectedSelectable(){const e=[ie._createFromPositionAndShift(this.splitPosition,0),ie._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(ie._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new zt(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,t=new ge(e,[0]);return new Qt(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new T.Bb("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new T.Bb("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new T.Bb("split-operation-graveyard-position-invalid",this)}else throw new T.Bb("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)yi(ie._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const n=e._clone();vs(this.insertionPosition,n)}const t=new ie(ge._createAt(e,this.splitPosition.offset),ge._createAt(e,e.maxOffset));yi(t,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const t=e.path.slice(0,-1);return t[t.length-1]++,new ge(e.root,t,"toPrevious")}static fromJSON(e,t){const n=ge.fromJSON(e.splitPosition,t),o=ge.fromJSON(e.insertionPosition,t),i=e.graveyardPosition?ge.fromJSON(e.graveyardPosition,t):null;return new this(n,e.howMany,o,i,e.baseVersion)}}class Qt extends Ur{constructor(e,t,n,o,i){super(i),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=o.clone()}get type(){return"merge"}get deletionPosition(){return new ge(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new ie(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[ie._createOn(e),ie._createFromPositionAndShift(this.targetPosition,0),ie._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Qt(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),n=new ge(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new zt(e,this.howMany,n,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent;if(e.parent)if(t.parent){if(this.howMany!=e.maxOffset)throw new T.Bb("merge-operation-how-many-invalid",this)}else throw new T.Bb("merge-operation-target-position-invalid",this);else throw new T.Bb("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,t=ie._createIn(e);yi(t,this.targetPosition),yi(ie._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){const n=ge.fromJSON(e.sourcePosition,t),o=ge.fromJSON(e.targetPosition,t),i=ge.fromJSON(e.graveyardPosition,t);return new this(n,e.howMany,o,i,e.baseVersion)}}class Cr extends Ur{constructor(e,t,n,o,i,a){super(a),this.name=e,this.oldRange=t?t.clone():null,this.newRange=n?n.clone():null,this.affectsData=i,this._markers=o}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new Cr(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Cr(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new Cr(e.name,e.oldRange?ie.fromJSON(e.oldRange,t):null,e.newRange?ie.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}function cl(r,e){return Ni(r,e)}var fa=cl;class sn extends Ur{constructor(e,t,n,o,i){super(i),this.range=e.clone(),this.key=t,this.oldValue=n===void 0?null:n,this.newValue=o===void 0?null:o}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new sn(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new sn(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new T.Bb("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!fa(e.getAttribute(this.key),this.oldValue))throw new T.Bb("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new T.Bb("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){fa(this.oldValue,this.newValue)||al(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new sn(ie.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}class fn extends Ur{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new fn(this.baseVersion)}getReversed(){return new fn(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class xr extends Ur{constructor(e,t,n,o){super(o),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=n}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new xr(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new xr(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof Bt){if(e.name!==this.oldName)throw new T.Bb("rename-operation-wrong-name",this)}else throw new T.Bb("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new xr(ge.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}class Bo extends Ur{constructor(e,t,n,o,i){super(i),this.root=e,this.key=t,this.oldValue=n===void 0?null:n,this.newValue=o===void 0?null:o}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Bo(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Bo(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new T.Bb("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new T.Bb("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new T.Bb("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new T.Bb("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new Bo(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class ko extends Ur{constructor(e,t,n,o,i){if(super(i),this.rootName=e,this.elementName=t,this.isAdd=n,this._document=o,!this._document.getRoot(this.rootName)){const a=this._document.createRoot(this.elementName,this.rootName);a._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new ko(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new ko(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,t){return new ko(e.rootName,e.elementName,e.isAdd,t,e.baseVersion)}}const no={};no[sn.className]=sn,no[Sn.className]=Sn,no[Cr.className]=Cr,no[At.className]=At,no[fn.className]=fn,no[Ur.className]=Ur,no[xr.className]=xr,no[Bo.className]=Bo,no[ko.className]=ko,no[zt.className]=zt,no[Qt.className]=Qt;class ll{static fromJSON(e,t){return no[e.__className].fromJSON(e,t)}}const ys=new Map;function Pt(r,e,t){let n=ys.get(r);n||(n=new Map,ys.set(r,n)),n.set(e,t)}function dl(r,e){const t=ys.get(r);return t&&t.has(e)?t.get(e):ul}function ul(r){return[r]}function ga(r,e,t={}){const n=dl(r.constructor,e.constructor);try{return r=r.clone(),n(r,e,t)}catch(o){throw o}}function hl(r,e,t){r=r.slice(),e=e.slice();const n=new fl(t.document,t.useRelations,t.forceWeakRemove);n.setOriginalOperations(r),n.setOriginalOperations(e);const o=n.originalOperations;if(r.length==0||e.length==0)return{operationsA:r,operationsB:e,originalOperations:o};const i=new WeakMap;for(const S of r)i.set(S,0);const a={nextBaseVersionA:r[r.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:r.length,originalOperationsBCount:e.length};let _=0;for(;_<r.length;){const S=r[_],H=i.get(S);if(H==e.length){_++;continue}const X=e[H],se=ga(S,X,n.getContext(S,X,!0)),Se=ga(X,S,n.getContext(X,S,!1));n.updateRelation(S,X),n.setOriginalOperations(se,S),n.setOriginalOperations(Se,X);for(const Ze of se)i.set(Ze,H+Se.length);r.splice(_,1,...se),e.splice(H,1,...Se)}if(t.padWithNoOps){const S=r.length-a.originalOperationsACount,H=e.length-a.originalOperationsBCount;pa(r,H-S),pa(e,S-H)}return _a(r,a.nextBaseVersionB),_a(e,a.nextBaseVersionA),{operationsA:r,operationsB:e,originalOperations:o}}class fl{constructor(e,t,n=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!n,this._relations=new Map}setOriginalOperations(e,t=null){const n=t?this.originalOperations.get(t):null;for(const o of e)this.originalOperations.set(o,n||o)}updateRelation(e,t){if(e instanceof At)t instanceof Qt?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter"):t instanceof At&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof zt){if(t instanceof Qt)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof At)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const n=ie._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.splitPosition)){const o=n.end.offset-e.splitPosition.offset,i=e.splitPosition.offset-n.start.offset;this._setRelation(e,t,{howMany:o,offset:i})}}}else if(e instanceof Qt)t instanceof Qt?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof zt&&e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource");else if(e instanceof Cr){const n=e.newRange;if(!n)return;if(t instanceof At){const o=ie._createFromPositionAndShift(t.sourcePosition,t.howMany),i=o.containsPosition(n.start)||o.start.isEqual(n.start),a=o.containsPosition(n.end)||o.end.isEqual(n.end);(i||a)&&!o.containsRange(n)&&this._setRelation(e,t,{side:i?"left":"right",path:i?n.start.path.slice():n.end.path.slice()})}else if(t instanceof Qt){const o=n.start.isEqual(t.targetPosition),i=n.start.isEqual(t.deletionPosition),a=n.end.isEqual(t.deletionPosition),_=n.end.isEqual(t.sourcePosition);(o||i||a||_)&&this._setRelation(e,t,{wasInLeftElement:o,wasStartBeforeMergedElement:i,wasEndBeforeMergedElement:a,wasInRightElement:_})}}}getContext(e,t,n){return{aIsStrong:n,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){const n=this.originalOperations.get(t),o=this._history.getUndoneOperation(n);if(!o)return null;const i=this.originalOperations.get(e),a=this._relations.get(i);return a&&a.get(o)||null}_setRelation(e,t,n){const o=this.originalOperations.get(e),i=this.originalOperations.get(t);let a=this._relations.get(o);a||(a=new Map,this._relations.set(o,a)),a.set(i,n)}}function _a(r,e){for(const t of r)t.baseVersion=e++}function pa(r,e){for(let t=0;t<e;t++)r.push(new fn(0))}Pt(sn,sn,(r,e,t)=>{if(r.key===e.key&&r.range.start.hasSameParentAs(e.range.start)){const n=r.range.getDifference(e.range).map(i=>new sn(i,r.key,r.oldValue,r.newValue,0)),o=r.range.getIntersection(e.range);return o&&t.aIsStrong&&n.push(new sn(o,e.key,e.newValue,r.newValue,0)),n.length==0?[new fn(0)]:n}else return[r]}),Pt(sn,Sn,(r,e)=>{if(r.range.start.hasSameParentAs(e.position)&&r.range.containsPosition(e.position)){const n=r.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(o=>new sn(o,r.key,r.oldValue,r.newValue,r.baseVersion));if(e.shouldReceiveAttributes){const o=ma(e,r.key,r.oldValue);o&&n.unshift(o)}return n}return r.range=r.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[r]});function ma(r,e,t){const o=r.nodes.getNode(0).getAttribute(e);if(o==t)return null;const i=new ie(r.position,r.position.getShiftedBy(r.howMany));return new sn(i,e,o,t,0)}Pt(sn,Qt,(r,e)=>{const t=[];r.range.start.hasSameParentAs(e.deletionPosition)&&(r.range.containsPosition(e.deletionPosition)||r.range.start.isEqual(e.deletionPosition))&&t.push(ie._createFromPositionAndShift(e.graveyardPosition,1));const n=r.range._getTransformedByMergeOperation(e);return n.isCollapsed||t.push(n),t.map(o=>new sn(o,r.key,r.oldValue,r.newValue,r.baseVersion))}),Pt(sn,At,(r,e)=>gl(r.range,e).map(n=>new sn(n,r.key,r.oldValue,r.newValue,r.baseVersion)));function gl(r,e){const t=ie._createFromPositionAndShift(e.sourcePosition,e.howMany);let n=null,o=[];t.containsRange(r,!0)?n=r:r.start.hasSameParentAs(t.start)?(o=r.getDifference(t),n=r.getIntersection(t)):o=[r];const i=[];for(let a of o){a=a._getTransformedByDeletion(e.sourcePosition,e.howMany);const _=e.getMovedRangeStart(),S=a.start.hasSameParentAs(_),H=a._getTransformedByInsertion(_,e.howMany,S);i.push(...H)}return n&&i.push(n._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),i}Pt(sn,zt,(r,e)=>{if(r.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||r.range.end.offset++,[r];if(r.range.start.hasSameParentAs(e.splitPosition)&&r.range.containsPosition(e.splitPosition)){const t=r.clone();return t.range=new ie(e.moveTargetPosition.clone(),r.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),r.range.end=e.splitPosition.clone(),r.range.end.stickiness="toPrevious",[r,t]}return r.range=r.range._getTransformedBySplitOperation(e),[r]}),Pt(Sn,sn,(r,e)=>{const t=[r];if(r.shouldReceiveAttributes&&r.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(r.position)){const n=ma(r,e.key,e.newValue);n&&t.push(n)}return t}),Pt(Sn,Sn,(r,e,t)=>r.position.isEqual(e.position)&&t.aIsStrong?[r]:(r.position=r.position._getTransformedByInsertOperation(e),[r])),Pt(Sn,At,(r,e)=>(r.position=r.position._getTransformedByMoveOperation(e),[r])),Pt(Sn,zt,(r,e)=>(r.position=r.position._getTransformedBySplitOperation(e),[r])),Pt(Sn,Qt,(r,e)=>(r.position=r.position._getTransformedByMergeOperation(e),[r])),Pt(Cr,Sn,(r,e)=>(r.oldRange&&(r.oldRange=r.oldRange._getTransformedByInsertOperation(e)[0]),r.newRange&&(r.newRange=r.newRange._getTransformedByInsertOperation(e)[0]),[r])),Pt(Cr,Cr,(r,e,t)=>{if(r.name==e.name)if(t.aIsStrong)r.oldRange=e.newRange?e.newRange.clone():null;else return[new fn(0)];return[r]}),Pt(Cr,Qt,(r,e)=>(r.oldRange&&(r.oldRange=r.oldRange._getTransformedByMergeOperation(e)),r.newRange&&(r.newRange=r.newRange._getTransformedByMergeOperation(e)),[r])),Pt(Cr,At,(r,e,t)=>{if(r.oldRange&&(r.oldRange=ie._createFromRanges(r.oldRange._getTransformedByMoveOperation(e))),r.newRange){if(t.abRelation){const n=ie._createFromRanges(r.newRange._getTransformedByMoveOperation(e));if(t.abRelation.side=="left"&&e.targetPosition.isEqual(r.newRange.start))return r.newRange.end=n.end,r.newRange.start.path=t.abRelation.path,[r];if(t.abRelation.side=="right"&&e.targetPosition.isEqual(r.newRange.end))return r.newRange.start=n.start,r.newRange.end.path=t.abRelation.path,[r]}r.newRange=ie._createFromRanges(r.newRange._getTransformedByMoveOperation(e))}return[r]}),Pt(Cr,zt,(r,e,t)=>{if(r.oldRange&&(r.oldRange=r.oldRange._getTransformedBySplitOperation(e)),r.newRange){if(t.abRelation){const n=r.newRange._getTransformedBySplitOperation(e);return r.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?r.newRange.start=ge._createAt(e.insertionPosition):r.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement&&(r.newRange.start=ge._createAt(e.moveTargetPosition)),r.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?r.newRange.end=ge._createAt(e.moveTargetPosition):r.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?r.newRange.end=ge._createAt(e.insertionPosition):r.newRange.end=n.end,[r]}r.newRange=r.newRange._getTransformedBySplitOperation(e)}return[r]}),Pt(Qt,Sn,(r,e)=>(r.sourcePosition.hasSameParentAs(e.position)&&(r.howMany+=e.howMany),r.sourcePosition=r.sourcePosition._getTransformedByInsertOperation(e),r.targetPosition=r.targetPosition._getTransformedByInsertOperation(e),[r])),Pt(Qt,Qt,(r,e,t)=>{if(r.sourcePosition.isEqual(e.sourcePosition)&&r.targetPosition.isEqual(e.targetPosition))if(t.bWasUndone){const n=e.graveyardPosition.path.slice();return n.push(0),r.sourcePosition=new ge(e.graveyardPosition.root,n),r.howMany=0,[r]}else return[new fn(0)];if(r.sourcePosition.isEqual(e.sourcePosition)&&!r.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const n=r.targetPosition.root.rootName=="$graveyard",o=e.targetPosition.root.rootName=="$graveyard";if(o&&!n||!(n&&!o)&&t.aIsStrong){const S=e.targetPosition._getTransformedByMergeOperation(e),H=r.targetPosition._getTransformedByMergeOperation(e);return[new At(S,r.howMany,H,0)]}else return[new fn(0)]}return r.sourcePosition.hasSameParentAs(e.targetPosition)&&(r.howMany+=e.howMany),r.sourcePosition=r.sourcePosition._getTransformedByMergeOperation(e),r.targetPosition=r.targetPosition._getTransformedByMergeOperation(e),(!r.graveyardPosition.isEqual(e.graveyardPosition)||!t.aIsStrong)&&(r.graveyardPosition=r.graveyardPosition._getTransformedByMergeOperation(e)),[r]}),Pt(Qt,At,(r,e,t)=>{const n=ie._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&r.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(r.sourcePosition)?[new fn(0)]:(r.sourcePosition.hasSameParentAs(e.targetPosition)&&(r.howMany+=e.howMany),r.sourcePosition.hasSameParentAs(e.sourcePosition)&&(r.howMany-=e.howMany),r.sourcePosition=r.sourcePosition._getTransformedByMoveOperation(e),r.targetPosition=r.targetPosition._getTransformedByMoveOperation(e),r.graveyardPosition.isEqual(e.targetPosition)||(r.graveyardPosition=r.graveyardPosition._getTransformedByMoveOperation(e)),[r])}),Pt(Qt,zt,(r,e,t)=>{if(e.graveyardPosition&&(r.graveyardPosition=r.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),r.deletionPosition.isEqual(e.graveyardPosition)&&(r.howMany=e.howMany)),r.targetPosition.isEqual(e.splitPosition)){const n=e.howMany!=0,o=e.graveyardPosition&&r.deletionPosition.isEqual(e.graveyardPosition);if(n||o||t.abRelation=="mergeTargetNotMoved")return r.sourcePosition=r.sourcePosition._getTransformedBySplitOperation(e),[r]}if(r.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return r.howMany=0,r.targetPosition=r.targetPosition._getTransformedBySplitOperation(e),[r];if(t.abRelation=="mergeSameElement"||r.sourcePosition.offset>0)return r.sourcePosition=e.moveTargetPosition.clone(),r.targetPosition=r.targetPosition._getTransformedBySplitOperation(e),[r]}return r.sourcePosition.hasSameParentAs(e.splitPosition)&&(r.howMany=e.splitPosition.offset),r.sourcePosition=r.sourcePosition._getTransformedBySplitOperation(e),r.targetPosition=r.targetPosition._getTransformedBySplitOperation(e),[r]}),Pt(At,Sn,(r,e)=>{const n=ie._createFromPositionAndShift(r.sourcePosition,r.howMany)._getTransformedByInsertOperation(e,!1)[0];return r.sourcePosition=n.start,r.howMany=n.end.offset-n.start.offset,r.targetPosition.isEqual(e.position)||(r.targetPosition=r.targetPosition._getTransformedByInsertOperation(e)),[r]}),Pt(At,At,(r,e,t)=>{const n=ie._createFromPositionAndShift(r.sourcePosition,r.howMany),o=ie._createFromPositionAndShift(e.sourcePosition,e.howMany);let i=t.aIsStrong,a=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?a=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(a=!1);let _;if(r.targetPosition.isEqual(e.targetPosition)&&a?_=r.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):_=r.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),ba(r,e)&&ba(e,r))return[e.getReversed()];if(n.containsPosition(e.targetPosition)&&n.containsRange(o,!0))return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),ai([n],_);if(o.containsPosition(r.targetPosition)&&o.containsRange(n,!0))return n.start=n.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),n.end=n.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),ai([n],_);const X=(0,T.Rt)(r.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(X=="prefix"||X=="extension")return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),ai([n],_);r.type=="remove"&&e.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?i=!0:r.type!="remove"&&e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(i=!1);const se=[],Se=n.getDifference(o);for(const at of Se){at.start=at.start._getTransformedByDeletion(e.sourcePosition,e.howMany),at.end=at.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const Ut=(0,T.Rt)(at.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",er=at._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,Ut);se.push(...er)}const Ze=n.getIntersection(o);return Ze!==null&&i&&(Ze.start=Ze.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),Ze.end=Ze.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),se.length===0?se.push(Ze):se.length==1?o.start.isBefore(n.start)||o.start.isEqual(n.start)?se.unshift(Ze):se.push(Ze):se.splice(1,0,Ze)),se.length===0?[new fn(r.baseVersion)]:ai(se,_)}),Pt(At,zt,(r,e,t)=>{let n=r.targetPosition.clone();(!r.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||t.abRelation=="moveTargetAfter")&&(n=r.targetPosition._getTransformedBySplitOperation(e));const o=ie._createFromPositionAndShift(r.sourcePosition,r.howMany);if(o.end.isEqual(e.insertionPosition))return e.graveyardPosition||r.howMany++,r.targetPosition=n,[r];if(o.start.hasSameParentAs(e.splitPosition)&&o.containsPosition(e.splitPosition)){let _=new ie(e.splitPosition,o.end);_=_._getTransformedBySplitOperation(e);const S=[new ie(o.start,e.splitPosition),_];return ai(S,n)}r.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(n=e.moveTargetPosition),r.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(n=r.targetPosition);const a=[o._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const _=o.start.isEqual(e.graveyardPosition)||o.containsPosition(e.graveyardPosition);r.howMany>1&&_&&!t.aWasUndone&&a.push(ie._createFromPositionAndShift(e.insertionPosition,1))}return ai(a,n)}),Pt(At,Qt,(r,e,t)=>{const n=ie._createFromPositionAndShift(r.sourcePosition,r.howMany);if(e.deletionPosition.hasSameParentAs(r.sourcePosition)&&n.containsPosition(e.sourcePosition)){if(r.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){const a=[];let _=e.graveyardPosition.clone(),S=e.targetPosition._getTransformedByMergeOperation(e);r.howMany>1&&(a.push(new At(r.sourcePosition,r.howMany-1,r.targetPosition,0)),_=_._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany-1),S=S._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany-1));const H=e.deletionPosition._getCombined(r.sourcePosition,r.targetPosition),X=new At(_,1,H,0),se=X.getMovedRangeStart().path.slice();se.push(0);const Se=new ge(X.targetPosition.root,se);S=S._getTransformedByMove(_,H,1);const Ze=new At(S,e.howMany,Se,0);return a.push(X),a.push(Ze),a}}else if(r.howMany==1)return t.bWasUndone?(r.sourcePosition=e.graveyardPosition.clone(),r.targetPosition=r.targetPosition._getTransformedByMergeOperation(e),[r]):[new fn(0)]}const i=ie._createFromPositionAndShift(r.sourcePosition,r.howMany)._getTransformedByMergeOperation(e);return r.sourcePosition=i.start,r.howMany=i.end.offset-i.start.offset,r.targetPosition=r.targetPosition._getTransformedByMergeOperation(e),[r]}),Pt(xr,Sn,(r,e)=>(r.position=r.position._getTransformedByInsertOperation(e),[r])),Pt(xr,Qt,(r,e)=>r.position.isEqual(e.deletionPosition)?(r.position=e.graveyardPosition.clone(),r.position.stickiness="toNext",[r]):(r.position=r.position._getTransformedByMergeOperation(e),[r])),Pt(xr,At,(r,e)=>(r.position=r.position._getTransformedByMoveOperation(e),[r])),Pt(xr,xr,(r,e,t)=>{if(r.position.isEqual(e.position))if(t.aIsStrong)r.oldName=e.newName;else return[new fn(0)];return[r]}),Pt(xr,zt,(r,e)=>{const t=r.position.path,n=e.splitPosition.getParentPath();if((0,T.Rt)(t,n)=="same"&&!e.graveyardPosition){const o=new xr(r.position.getShiftedBy(1),r.oldName,r.newName,0);return[r,o]}return r.position=r.position._getTransformedBySplitOperation(e),[r]}),Pt(Bo,Bo,(r,e,t)=>{if(r.root===e.root&&r.key===e.key){if(!t.aIsStrong||r.newValue===e.newValue)return[new fn(0)];r.oldValue=e.newValue}return[r]}),Pt(ko,ko,(r,e)=>r.rootName===e.rootName&&r.isAdd===e.isAdd?[new fn(0)]:[r]),Pt(zt,Sn,(r,e)=>(r.splitPosition.hasSameParentAs(e.position)&&r.splitPosition.offset<e.position.offset&&(r.howMany+=e.howMany),r.splitPosition=r.splitPosition._getTransformedByInsertOperation(e),r.insertionPosition=r.insertionPosition._getTransformedByInsertOperation(e),[r])),Pt(zt,Qt,(r,e,t)=>{if(!r.graveyardPosition&&!t.bWasUndone&&r.splitPosition.hasSameParentAs(e.sourcePosition)){const n=e.graveyardPosition.path.slice();n.push(0);const o=new ge(e.graveyardPosition.root,n),i=zt.getInsertionPosition(new ge(e.graveyardPosition.root,n)),a=new zt(o,0,i,null,0);return r.splitPosition=r.splitPosition._getTransformedByMergeOperation(e),r.insertionPosition=zt.getInsertionPosition(r.splitPosition),r.graveyardPosition=a.insertionPosition.clone(),r.graveyardPosition.stickiness="toNext",[a,r]}return r.splitPosition.hasSameParentAs(e.deletionPosition)&&!r.splitPosition.isAfter(e.deletionPosition)&&r.howMany--,r.splitPosition.hasSameParentAs(e.targetPosition)&&(r.howMany+=e.howMany),r.splitPosition=r.splitPosition._getTransformedByMergeOperation(e),r.insertionPosition=zt.getInsertionPosition(r.splitPosition),r.graveyardPosition&&(r.graveyardPosition=r.graveyardPosition._getTransformedByMergeOperation(e)),[r]}),Pt(zt,At,(r,e,t)=>{const n=ie._createFromPositionAndShift(e.sourcePosition,e.howMany);if(r.graveyardPosition){const i=n.start.isEqual(r.graveyardPosition)||n.containsPosition(r.graveyardPosition);if(!t.bWasUndone&&i){const a=r.splitPosition._getTransformedByMoveOperation(e),_=r.graveyardPosition._getTransformedByMoveOperation(e),S=_.path.slice();S.push(0);const H=new ge(_.root,S);return[new At(a,r.howMany,H,0)]}r.graveyardPosition=r.graveyardPosition._getTransformedByMoveOperation(e)}const o=r.splitPosition.isEqual(e.targetPosition);if(o&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return r.howMany+=e.howMany,r.splitPosition=r.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),r.insertionPosition=zt.getInsertionPosition(r.splitPosition),[r];if(o&&t.abRelation&&t.abRelation.howMany){const{howMany:i,offset:a}=t.abRelation;return r.howMany+=i,r.splitPosition=r.splitPosition.getShiftedBy(a),[r]}if(r.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(r.splitPosition)){const i=e.howMany-(r.splitPosition.offset-e.sourcePosition.offset);return r.howMany-=i,r.splitPosition.hasSameParentAs(e.targetPosition)&&r.splitPosition.offset<e.targetPosition.offset&&(r.howMany+=e.howMany),r.splitPosition=e.sourcePosition.clone(),r.insertionPosition=zt.getInsertionPosition(r.splitPosition),[r]}return e.sourcePosition.isEqual(e.targetPosition)||(r.splitPosition.hasSameParentAs(e.sourcePosition)&&r.splitPosition.offset<=e.sourcePosition.offset&&(r.howMany-=e.howMany),r.splitPosition.hasSameParentAs(e.targetPosition)&&r.splitPosition.offset<e.targetPosition.offset&&(r.howMany+=e.howMany)),r.splitPosition.stickiness="toNone",r.splitPosition=r.splitPosition._getTransformedByMoveOperation(e),r.splitPosition.stickiness="toNext",r.graveyardPosition?r.insertionPosition=r.insertionPosition._getTransformedByMoveOperation(e):r.insertionPosition=zt.getInsertionPosition(r.splitPosition),[r]}),Pt(zt,zt,(r,e,t)=>{if(r.splitPosition.isEqual(e.splitPosition)){if(!r.graveyardPosition&&!e.graveyardPosition)return[new fn(0)];if(r.graveyardPosition&&e.graveyardPosition&&r.graveyardPosition.isEqual(e.graveyardPosition))return[new fn(0)];if(t.abRelation=="splitBefore")return r.howMany=0,r.graveyardPosition=r.graveyardPosition._getTransformedBySplitOperation(e),[r]}if(r.graveyardPosition&&e.graveyardPosition&&r.graveyardPosition.isEqual(e.graveyardPosition)){const n=r.splitPosition.root.rootName=="$graveyard",o=e.splitPosition.root.rootName=="$graveyard";if(o&&!n||!(n&&!o)&&t.aIsStrong){const S=[];return e.howMany&&S.push(new At(e.moveTargetPosition,e.howMany,e.splitPosition,0)),r.howMany&&S.push(new At(r.splitPosition,r.howMany,r.moveTargetPosition,0)),S}else return[new fn(0)]}if(r.graveyardPosition&&(r.graveyardPosition=r.graveyardPosition._getTransformedBySplitOperation(e)),r.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return r.howMany++,[r];if(e.splitPosition.isEqual(r.insertionPosition)&&t.baRelation=="splitBefore"){const n=e.insertionPosition.path.slice();n.push(0);const o=new ge(e.insertionPosition.root,n),i=new At(r.insertionPosition,1,o,0);return[r,i]}return r.splitPosition.hasSameParentAs(e.splitPosition)&&r.splitPosition.offset<e.splitPosition.offset&&(r.howMany-=e.howMany),r.splitPosition=r.splitPosition._getTransformedBySplitOperation(e),r.insertionPosition=zt.getInsertionPosition(r.splitPosition),[r]});function ba(r,e){return r.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function ai(r,e){const t=[];for(let n=0;n<r.length;n++){const o=r[n],i=new At(o.start,o.end.offset-o.start.offset,e,0);t.push(i);for(let a=n+1;a<r.length;a++)r[a]=r[a]._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany)[0];e=e._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany)}return t}class Ar extends(0,T.ln)(ge){constructor(e,t,n="toNone"){if(super(e,t,n),!this.root.is("rootElement"))throw new T.Bb("model-liveposition-root-not-rootelement",e);_l.call(this)}detach(){this.stopListening()}toPosition(){return new ge(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}Ar.prototype.is=function(r){return r==="livePosition"||r==="model:livePosition"||r=="position"||r==="model:position"};function _l(){this.listenTo(this.root.document.model,"applyOperation",(r,e)=>{const t=e[0];t.isDocumentOperation&&pl.call(this,t)},{priority:"low"})}function pl(r){const e=this.getTransformedByOperation(r);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}class ci{constructor(e={}){typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},(0,T.KE)("batch-constructor-deprecated-string-type"));const{isUndoable:t=!0,isLocal:n=!0,isUndo:o=!1,isTyping:i=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=n,this.isUndo=o,this.isTyping=i}get type(){return(0,T.KE)("batch-type-deprecated"),"default"}get baseVersion(){for(const e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}}class ml{constructor(e){this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changedRoots=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null,this._refreshedItems=new Set,this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){const t=e;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const n of t.range.getItems({shallow:!0}))this._isInInsertedElement(n.parent)||this._markAttribute(n);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const n=this._isInInsertedElement(t.sourcePosition.parent),o=this._isInInsertedElement(t.targetPosition.parent);n||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),o||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const n=ie._createFromPositionAndShift(t.position,1);for(const o of this._markerCollection.getMarkersIntersectingRange(n)){const i=o.getData();this.bufferMarkerChange(o.name,i,i)}break}case"split":{const n=t.splitPosition.parent;this._isInInsertedElement(n)||this._markRemove(n,t.splitPosition.offset,t.howMany),this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1);break}case"merge":{const n=t.sourcePosition.parent;this._isInInsertedElement(n.parent)||this._markRemove(n.parent,n.startOffset,1);const o=t.graveyardPosition.parent;this._markInsert(o,t.graveyardPosition.offset,1);const i=t.targetPosition.parent;this._isInInsertedElement(i)||this._markInsert(i,t.targetPosition.offset,n.maxOffset);break}case"detachRoot":case"addRoot":{const n=t.affectedSelectable;if(!n._isLoaded||n.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;const n=t.root.rootName;this._bufferRootAttributeChange(n,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,t,n){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),n.range&&n.range.root.is("rootElement")&&!n.range.root._isLoaded&&(n.range=null);let o=this._changedMarkers.get(e);o?o.newMarkerData=n:(o={newMarkerData:n,oldMarkerData:t},this._changedMarkers.set(e,o)),o.oldMarkerData.range==null&&n.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){const e=[];for(const[t,n]of this._changedMarkers)n.oldMarkerData.range!=null&&e.push({name:t,range:n.oldMarkerData.range});return e}getMarkersToAdd(){const e=[];for(const[t,n]of this._changedMarkers)n.newMarkerData.range!=null&&e.push({name:t,range:n.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this._changesInElement.size>0||this._changedRoots.size>0)return!0;for(const{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){const n=e.range&&!t.range,o=!e.range&&t.range,i=e.range&&t.range&&!e.range.isEqual(t.range);if(n||o||i)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const n of this._changesInElement.keys()){const o=this._changesInElement.get(n).sort((X,se)=>X.offset===se.offset?X.type!=se.type?X.type=="remove"?-1:1:0:X.offset<se.offset?-1:1),i=this._elementSnapshots.get(n),a=wa(n.getChildren()),_=bl(i.length,o);let S=0,H=0;for(const X of _)if(X==="i")t.push(this._getInsertDiff(n,S,a[S])),S++;else if(X==="r")t.push(this._getRemoveDiff(n,S,i[H])),H++;else if(X==="a"){const se=a[S].attributes,Se=i[H].attributes;let Ze;if(a[S].name=="$text")Ze=new ie(ge._createAt(n,S),ge._createAt(n,S+1));else{const at=n.offsetToIndex(S);Ze=new ie(ge._createAt(n,S),ge._createAt(n.getChild(at),0))}t.push(...this._getAttributesDiff(Ze,Se,se)),S++,H++}else S++,H++}t.sort((n,o)=>n.position.root!=o.position.root?n.position.root.rootName<o.position.root.rootName?-1:1:n.position.isEqual(o.position)?n.changeCount-o.changeCount:n.position.isBefore(o.position)?-1:1);for(let n=1,o=0;n<t.length;n++){const i=t[o],a=t[n],_=i.type=="remove"&&a.type=="remove"&&i.name=="$text"&&a.name=="$text"&&i.position.isEqual(a.position),S=i.type=="insert"&&a.type=="insert"&&i.name=="$text"&&a.name=="$text"&&i.position.parent==a.position.parent&&i.position.offset+i.length==a.position.offset,H=i.type=="attribute"&&a.type=="attribute"&&i.position.parent==a.position.parent&&i.range.isFlat&&a.range.isFlat&&i.position.offset+i.length==a.position.offset&&i.attributeKey==a.attributeKey&&i.attributeOldValue==a.attributeOldValue&&i.attributeNewValue==a.attributeNewValue;_||S||H?(i.length++,H&&(i.range.end=i.range.end.getShiftedBy(1)),t[n]=null):o=n}t=t.filter(n=>n);for(const n of t)delete n.changeCount,n.type=="attribute"&&(delete n.position,delete n.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(wl),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{const t=Ge({},e);return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems=new Set,this._cachedChanges=null}_bufferRootStateChange(e,t){if(!this._changedRoots.has(e)){this._changedRoots.set(e,{name:e,state:t?"attached":"detached"});return}const n=this._changedRoots.get(e);n.state!==void 0?(delete n.state,n.attributes===void 0&&this._changedRoots.delete(e)):n.state=t?"attached":"detached"}_bufferRootAttributeChange(e,t,n,o){const i=this._changedRoots.get(e)||{name:e},a=i.attributes||{};if(a[t]){const _=a[t];o===_.oldValue?delete a[t]:_.newValue=o}else a[t]={oldValue:n,newValue:o};Object.entries(a).length===0?(delete i.attributes,i.state===void 0&&this._changedRoots.delete(e)):(i.attributes=a,this._changedRoots.set(e,i))}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e);const t=ie._createOn(e);for(const n of this._markerCollection.getMarkersIntersectingRange(t)){const o=n.getData();this.bufferMarkerChange(n.name,o,o)}this._cachedChanges=null}_bufferRootLoad(e){if(e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(const t of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,t,null,e.getAttribute(t));for(const t of this._markerCollection)if(t.getRange().root==e){const n=t.getData();this.bufferMarkerChange(t.name,Hr(Ge({},n),{range:null}),n)}}}_markInsert(e,t,n){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const o={type:"insert",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,o)}_markRemove(e,t,n){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const o={type:"remove",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,o),this._removeAllNestedChanges(e,t,n)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshot(e);const n=this._getChangesForElement(e);this._handleChange(t,n),n.push(t);for(let o=0;o<n.length;o++)n[o].howMany<1&&(n.splice(o,1),o--)}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshot(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,wa(e.getChildren()))}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const n of t){const o=e.offset+e.howMany,i=n.offset+n.howMany;if(e.type=="insert"&&(n.type=="insert"&&(e.offset<=n.offset?n.offset+=e.howMany:e.offset<i&&(n.howMany+=e.nodesToHandle,e.nodesToHandle=0)),n.type=="remove"&&e.offset<n.offset&&(n.offset+=e.howMany),n.type=="attribute")){if(e.offset<=n.offset)n.offset+=e.howMany;else if(e.offset<i){const a=n.howMany;n.howMany=e.offset-n.offset,t.unshift({type:"attribute",offset:o,howMany:a-n.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(n.type=="insert"){if(o<=n.offset)n.offset-=e.howMany;else if(o<=i)if(e.offset<n.offset){const a=o-n.offset;n.offset=e.offset,n.howMany-=a,e.nodesToHandle-=a}else n.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=n.offset)e.nodesToHandle-=n.howMany,n.howMany=0;else if(e.offset<i){const a=i-e.offset;n.howMany-=a,e.nodesToHandle-=a}}if(n.type=="remove"&&(o<=n.offset?n.offset-=e.howMany:e.offset<n.offset&&(e.nodesToHandle+=n.howMany,n.howMany=0)),n.type=="attribute"){if(o<=n.offset)n.offset-=e.howMany;else if(e.offset<n.offset){const a=o-n.offset;n.offset=e.offset,n.howMany-=a}else if(e.offset<i)if(o<=i){const a=n.howMany;n.howMany=e.offset-n.offset;const _=a-n.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:_,count:this._changeCount++})}else n.howMany-=i-e.offset}}if(e.type=="attribute"){if(n.type=="insert")if(e.offset<n.offset&&o>n.offset){if(o>i){const a={type:"attribute",offset:i,howMany:o-i,count:this._changeCount++};this._handleChange(a,t),t.push(a)}e.nodesToHandle=n.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=n.offset&&e.offset<i&&(o>i?(e.nodesToHandle=o-i,e.offset=i):e.nodesToHandle=0);if(n.type=="remove"&&e.offset<n.offset&&o>n.offset){const a={type:"attribute",offset:n.offset,howMany:o-n.offset,count:this._changeCount++};this._handleChange(a,t),t.push(a),e.nodesToHandle=n.offset-e.offset,e.howMany=e.nodesToHandle}n.type=="attribute"&&(e.offset>=n.offset&&o<=i?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=n.offset&&o>=i&&(n.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,n){return{type:"insert",position:ge._createAt(e,t),name:n.name,attributes:new Map(n.attributes),length:1,changeCount:this._changeCount++}}_getRemoveDiff(e,t,n){return{type:"remove",position:ge._createAt(e,t),name:n.name,attributes:new Map(n.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,n){const o=[];n=new Map(n);for(const[i,a]of t){const _=n.has(i)?n.get(i):null;_!==a&&o.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:i,attributeOldValue:a,attributeNewValue:_,changeCount:this._changeCount++}),n.delete(i)}for(const[i,a]of n)o.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:i,attributeOldValue:null,attributeNewValue:a,changeCount:this._changeCount++});return o}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const n=this._changesInElement.get(t),o=e.startOffset;if(n){for(const i of n)if(i.type=="insert"&&o>=i.offset&&o<i.offset+i.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,n){const o=new ie(ge._createAt(e,t),ge._createAt(e,t+n));for(const i of o.getItems({shallow:!0}))i.is("element")&&(this._elementSnapshots.delete(i),this._changesInElement.delete(i),this._removeAllNestedChanges(i,0,i.maxOffset))}}function wa(r){const e=[];for(const t of r)if(t.is("$text"))for(let n=0;n<t.data.length;n++)e.push({name:"$text",attributes:new Map(t.getAttributes())});else e.push({name:t.name,attributes:new Map(t.getAttributes())});return e}function bl(r,e){const t=[];let n=0,o=0;for(const i of e){if(i.offset>n){for(let a=0;a<i.offset-n;a++)t.push("e");o+=i.offset-n}if(i.type=="insert"){for(let a=0;a<i.howMany;a++)t.push("i");n=i.offset+i.howMany}else if(i.type=="remove"){for(let a=0;a<i.howMany;a++)t.push("r");n=i.offset,o+=i.howMany}else t.push(..."a".repeat(i.howMany).split("")),n=i.offset+i.howMany,o+=i.howMany}if(o<r)for(let i=0;i<r-o-n;i++)t.push("e");return t}function wl(r){const e="position"in r&&r.position.root.rootName=="$graveyard",t="range"in r&&r.range.root.rootName=="$graveyard";return!e&&!t}class kl{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set,this._baseVersionToOperationIndex=new Map,this._version=0,this._gaps=new Map}get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new T.Bb("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];const n=this._operations[0];e===void 0&&(e=n.baseVersion);let o=t-1;for(const[_,S]of this._gaps)e>_&&e<S&&(e=S),o>_&&o<S&&(o=_-1);if(o<n.baseVersion||e>this.lastOperation.baseVersion)return[];let i=this._baseVersionToOperationIndex.get(e);i===void 0&&(i=0);let a=this._baseVersionToOperationIndex.get(o);return a===void 0&&(a=this._operations.length-1),this._operations.slice(i,a+1)}getOperation(e){const t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class Zi extends Bt{constructor(e,t,n="main"){super(t),this._isAttached=!0,this._isLoaded=!0,this._document=e,this.rootName=n}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}Zi.prototype.is=function(r,e){return e?e===this.name&&(r==="rootElement"||r==="model:rootElement"||r==="element"||r==="model:element"):r==="rootElement"||r==="model:rootElement"||r==="element"||r==="model:element"||r==="node"||r==="model:node"};const ka="$graveyard";class vl extends(0,T.ln)(){constructor(e){super(),this.model=e,this.history=new kl,this.selection=new wt(this),this.roots=new T.FE({idProperty:"rootName"}),this.differ=new ml(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",ka),this.listenTo(e,"applyOperation",(t,n)=>{const o=n[0];o.isDocumentOperation&&this.differ.bufferOperation(o)},{priority:"high"}),this.listenTo(e,"applyOperation",(t,n)=>{const o=n[0];o.isDocumentOperation&&this.history.addOperation(o)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(t,n,o,i,a)=>{const _=Hr(Ge({},n.getData()),{range:i});this.differ.bufferMarkerChange(n.name,a,_),o===null&&n.on("change",(S,H)=>{const X=n.getData();this.differ.bufferMarkerChange(n.name,Hr(Ge({},X),{range:H}),X)})}),this.registerPostFixer(t=>{let n=!1;for(const o of this.roots)!o.isAttached()&&!o.isEmpty&&(t.remove(t.createRangeIn(o)),n=!0);for(const o of this.model.markers)o.getRange().root.isAttached()||(t.removeMarker(o),n=!0);return n})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(ka)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new T.Bb("model-document-createroot-name-exists",this,{name:t});const n=new Zi(this,e,t);return this.roots.add(n),n}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(t=>t.rootName)}getRoots(e=!1){return Array.from(this.roots).filter(t=>t!=this.graveyard&&(e||t.isAttached())&&t._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=it(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),t=this.model,n=t.schema,o=t.createPositionFromPath(e,[0]);return n.getNearestSelectionRange(o)||t.createRange(o)}_validateSelectionRange(e){return va(e.start)&&va(e.end)}_callPostFixers(e){let t=!1;do for(const n of this._postFixers)if(this.selection.refresh(),t=n(e),t)break;while(t)}}function va(r){const e=r.textNode;if(e){const t=e.data,n=r.offset-e.startOffset;return!(0,T.to)(t,n)&&!(0,T.pp)(t,n)}return!0}class yl extends(0,T.ln)(){constructor(){super(...arguments),this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(e){const t=e instanceof li?e.name:e;return this._markers.has(t)}get(e){return this._markers.get(e)||null}_set(e,t,n=!1,o=!1){const i=e instanceof li?e.name:e;if(i.includes(","))throw new T.Bb("markercollection-incorrect-marker-name",this);const a=this._markers.get(i);if(a){const H=a.getData(),X=a.getRange();let se=!1;return X.isEqual(t)||(a._attachLiveRange(Z.fromRange(t)),se=!0),n!=a.managedUsingOperations&&(a._managedUsingOperations=n,se=!0),typeof o=="boolean"&&o!=a.affectsData&&(a._affectsData=o,se=!0),se&&this.fire(`update:${i}`,a,X,t,H),a}const _=Z.fromRange(t),S=new li(i,_,n,o);return this._markers.set(i,S),this.fire(`update:${i}`,S,null,t,Hr(Ge({},S.getData()),{range:null})),S}_remove(e){const t=e instanceof li?e.name:e,n=this._markers.get(t);return n?(this._markers.delete(t),this.fire(`update:${t}`,n,n.getRange(),null,n.getData()),this._destroyMarker(n),!0):!1}_refresh(e){const t=e instanceof li?e.name:e,n=this._markers.get(t);if(!n)throw new T.Bb("markercollection-refresh-marker-not-exists",this);const o=n.getRange();this.fire(`update:${t}`,n,o,o,n.getData())}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)t.getRange().getIntersection(e)!==null&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class li extends(0,T.ln)(Zr){constructor(e,t,n,o){super(),this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=n,this._affectsData=o}get managedUsingOperations(){if(!this._liveRange)throw new T.Bb("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new T.Bb("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new T.Bb("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new T.Bb("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new T.Bb("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}li.prototype.is=function(r){return r==="marker"||r==="model:marker"};class El extends Ur{constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new T.Bb("detach-operation-on-document-node",this)}_execute(){da(ie._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class Vo extends Zr{constructor(e){super(),this.markers=new Map,this._children=new ii,e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const n of e)t=t.getChild(t.offsetToIndex(n));return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){const t=[];for(const n of e)n.name?t.push(Bt.fromJSON(n)):t.push(It.fromJSON(n));return new Vo(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const n=Tl(t);for(const o of n)o.parent!==null&&o._remove(),o.parent=this;this._children._insertNodes(e,n)}_removeChildren(e,t=1){const n=this._children._removeNodes(e,t);for(const o of n)o.parent=null;return n}}Vo.prototype.is=function(r){return r==="documentFragment"||r==="model:documentFragment"};function Tl(r){return typeof r=="string"?[new It(r)]:((0,T.TW)(r)||(r=[r]),Array.from(r).map(e=>typeof e=="string"?new It(e):e instanceof qn?new It(e.data,e.getAttributes()):e))}class Pl{constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new It(e,t)}createElement(e,t){return new Bt(e,t)}createDocumentFragment(){return new Vo}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,n=0){if(this._assertWriterUsedCorrectly(),e instanceof It&&e.data=="")return;const o=ge._createAt(t,n);if(e.parent)if(Ta(e.root,o.root)){this.move(ie._createOn(e),o);return}else{if(e.root.document)throw new T.Bb("model-writer-insert-forbidden-move",this);this.remove(e)}const i=o.root.document?o.root.document.version:null,a=new Sn(o,e,i);if(e instanceof It&&(a.shouldReceiveAttributes=!0),this.batch.addOperation(a),this.model.applyOperation(a),e instanceof Vo)for(const[_,S]of e.markers){const H=ge._createAt(S.root,0),se={range:new ie(S.start._getCombined(H,o),S.end._getCombined(H,o)),usingOperation:!0,affectsData:!0};this.model.markers.has(_)?this.updateMarker(_,se):this.addMarker(_,se)}}insertText(e,t,n,o){t instanceof Vo||t instanceof Bt||t instanceof ge?this.insert(this.createText(e),t,n):this.insert(this.createText(e,t),n,o)}insertElement(e,t,n,o){t instanceof Vo||t instanceof Bt||t instanceof ge?this.insert(this.createElement(e),t,n):this.insert(this.createElement(e,t),n,o)}append(e,t){this.insert(e,t,"end")}appendText(e,t,n){t instanceof Vo||t instanceof Bt?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),n,"end")}appendElement(e,t,n){t instanceof Vo||t instanceof Bt?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),n,"end")}setAttribute(e,t,n){if(this._assertWriterUsedCorrectly(),n instanceof ie){const o=n.getMinimalFlatRanges();for(const i of o)ya(this,e,t,i)}else Ea(this,e,t,n)}setAttributes(e,t){for(const[n,o]of(0,T.qL)(e))this.setAttribute(n,o,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof ie){const n=t.getMinimalFlatRanges();for(const o of n)ya(this,e,null,o)}else Ea(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=n=>{for(const o of n.getAttributeKeys())this.removeAttribute(o,n)};if(!(e instanceof ie))t(e);else for(const n of e.getItems())t(n)}move(e,t,n){if(this._assertWriterUsedCorrectly(),!(e instanceof ie))throw new T.Bb("writer-move-invalid-range",this);if(!e.isFlat)throw new T.Bb("writer-move-range-not-flat",this);const o=ge._createAt(t,n);if(o.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!Ta(e.root,o.root))throw new T.Bb("writer-move-different-document",this);const i=e.root.document?e.root.document.version:null,a=new At(e.start,e.end.offset-e.start.offset,o,i);this.batch.addOperation(a),this.model.applyOperation(a)}remove(e){this._assertWriterUsedCorrectly();const n=(e instanceof ie?e:ie._createOn(e)).getMinimalFlatRanges().reverse();for(const o of n)this._addOperationForAffectedMarkers("move",o),Cl(o.start,o.end.offset-o.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,n=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof Bt))throw new T.Bb("writer-merge-no-element-before",this);if(!(n instanceof Bt))throw new T.Bb("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,n){return this.model.createPositionFromPath(e,t,n)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){const t=e.nodeBefore,n=e.nodeAfter;this.move(ie._createIn(n),ge._createAt(t,"end")),this.remove(n)}_merge(e){const t=ge._createAt(e.nodeBefore,"end"),n=ge._createAt(e.nodeAfter,0),o=e.root.document.graveyard,i=new ge(o,[0]),a=e.root.document.version,_=new Qt(n,e.nodeAfter.maxOffset,t,i,a);this.batch.addOperation(_),this.model.applyOperation(_)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof Bt))throw new T.Bb("writer-rename-not-element-instance",this);const n=e.root.document?e.root.document.version:null,o=new xr(ge._createBefore(e),e.name,t,n);this.batch.addOperation(o),this.model.applyOperation(o)}split(e,t){this._assertWriterUsedCorrectly();let n=e.parent;if(!n.parent)throw new T.Bb("writer-split-element-no-parent",this);if(t||(t=n.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new T.Bb("writer-split-invalid-limit-element",this);let o,i;do{const a=n.root.document?n.root.document.version:null,_=n.maxOffset-e.offset,S=zt.getInsertionPosition(e),H=new zt(e,_,S,null,a);this.batch.addOperation(H),this.model.applyOperation(H),!o&&!i&&(o=n,i=e.parent.nextSibling),e=this.createPositionAfter(e.parent),n=e.parent}while(n!==t);return{position:e,range:new ie(ge._createAt(o,"end"),ge._createAt(i,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new T.Bb("writer-wrap-range-not-flat",this);const n=t instanceof Bt?t:new Bt(t);if(n.childCount>0)throw new T.Bb("writer-wrap-element-not-empty",this);if(n.parent!==null)throw new T.Bb("writer-wrap-element-attached",this);this.insert(n,e.start);const o=new ie(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(o,ge._createAt(n,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new T.Bb("writer-unwrap-element-no-parent",this);this.move(ie._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new T.Bb("writer-addmarker-no-usingoperation",this);const n=t.usingOperation,o=t.range,i=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(e))throw new T.Bb("writer-addmarker-marker-exists",this);if(!o)throw new T.Bb("writer-addmarker-no-range",this);return n?(Pi(this,e,null,o,i),this.model.markers.get(e)):this.model.markers._set(e,o,n,i)}updateMarker(e,t){this._assertWriterUsedCorrectly();const n=typeof e=="string"?e:e.name,o=this.model.markers.get(n);if(!o)throw new T.Bb("writer-updatemarker-marker-not-exists",this);if(!t){(0,T.KE)("writer-updatemarker-reconvert-using-editingcontroller",{markerName:n}),this.model.markers._refresh(o);return}const i=typeof t.usingOperation=="boolean",a=typeof t.affectsData=="boolean",_=a?t.affectsData:o.affectsData;if(!i&&!t.range&&!a)throw new T.Bb("writer-updatemarker-wrong-options",this);const S=o.getRange(),H=t.range?t.range:S;if(i&&t.usingOperation!==o.managedUsingOperations){t.usingOperation?Pi(this,n,null,H,_):(Pi(this,n,S,null,_),this.model.markers._set(n,H,void 0,_));return}o.managedUsingOperations?Pi(this,n,S,H,_):this.model.markers._set(n,H,void 0,_)}removeMarker(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new T.Bb("writer-removemarker-no-marker",this);const n=this.model.markers.get(t);if(!n.managedUsingOperations){this.model.markers._remove(t);return}const o=n.getRange();Pi(this,t,o,null,n.affectsData)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();const n=this.model.document.getRoot(e);if(n&&n.isAttached())throw new T.Bb("writer-addroot-root-exists",this);const o=this.model.document,i=new ko(e,t,!0,o,o.version);return this.batch.addOperation(i),this.model.applyOperation(i),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new T.Bb("writer-detachroot-no-root",this);for(const i of this.model.markers)i.getRange().root===t&&this.removeMarker(i);for(const i of t.getAttributeKeys())this.removeAttribute(i,t);this.remove(this.createRangeIn(t));const n=this.model.document,o=new ko(t.rootName,t.name,!1,n,n.version);this.batch.addOperation(o),this.model.applyOperation(o)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(const[n,o]of(0,T.qL)(e))this._setSelectionAttribute(n,o)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const o=wt._getStoreAttributeKey(e);this.setAttribute(o,t,n.anchor.parent)}n._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const n=wt._getStoreAttributeKey(e);this.removeAttribute(n,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new T.Bb("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const n of this.model.markers){if(!n.managedUsingOperations)continue;const o=n.getRange();let i=!1;if(e==="move"){const a=t;i=a.containsPosition(o.start)||a.start.isEqual(o.start)||a.containsPosition(o.end)||a.end.isEqual(o.end)}else{const a=t,_=a.nodeBefore,S=a.nodeAfter,H=o.start.parent==_&&o.start.isAtEnd,X=o.end.parent==S&&o.end.offset==0,se=o.end.nodeAfter==S,Se=o.start.nodeAfter==S;i=H||X||se||Se}i&&this.updateMarker(n.name,{range:o})}}}function ya(r,e,t,n){const o=r.model,i=o.document;let a=n.start,_,S,H;for(const se of n.getWalker({shallow:!0}))H=se.item.getAttribute(e),_&&S!=H&&(S!=t&&X(),a=_),_=se.nextPosition,S=H;_ instanceof ge&&_!=a&&S!=t&&X();function X(){const se=new ie(a,_),Se=se.root.document?i.version:null,Ze=new sn(se,e,S,t,Se);r.batch.addOperation(Ze),o.applyOperation(Ze)}}function Ea(r,e,t,n){const o=r.model,i=o.document,a=n.getAttribute(e);let _,S;if(a!=t){if(n.root===n){const X=n.document?i.version:null;S=new Bo(n,e,a,t,X)}else{_=new ie(ge._createBefore(n),r.createPositionAfter(n));const X=_.root.document?i.version:null;S=new sn(_,e,a,t,X)}r.batch.addOperation(S),o.applyOperation(S)}}function Pi(r,e,t,n,o){const i=r.model,a=i.document,_=new Cr(e,t,n,i.markers,!!o,a.version);r.batch.addOperation(_),i.applyOperation(_)}function Cl(r,e,t,n){let o;if(r.root.document){const i=n.document,a=new ge(i.graveyard,[0]);o=new At(r,e,a,i.version)}else o=new El(r,e);t.addOperation(o),n.applyOperation(o)}function Ta(r,e){return r===e||r instanceof Zi&&e instanceof Zi}function xl(r,e,t={}){if(e.isCollapsed)return;const n=e.getFirstRange();if(n.root.rootName=="$graveyard")return;const o=r.schema;r.change(i=>{if(!t.doNotResetEntireContent&&Vl(o,e)){Bl(i,e);return}const a={};if(!t.doNotAutoparagraph){const H=e.getSelectedElement();H&&Object.assign(a,o.getAttributesWithProperty(H,"copyOnReplace",!0))}const[_,S]=Al(n);_.isTouching(S)||i.remove(i.createRange(_,S)),t.leaveUnmerged||(Ol(i,_,S),o.removeDisallowedAttributes(_.parent.getChildren(),i)),Aa(i,e,_),!t.doNotAutoparagraph&&Dl(o,_)&&xa(i,_,e,a),_.detach(),S.detach()})}function Al(r){const e=r.root.document.model,t=r.start;let n=r.end;if(e.hasContent(r,{ignoreMarkers:!0})){const o=Sl(n);if(o&&n.isTouching(e.createPositionAt(o,0))){const i=e.createSelection(r);e.modifySelection(i,{direction:"backward"});const a=i.getLastPosition(),_=e.createRange(a,n);e.hasContent(_,{ignoreMarkers:!0})||(n=a)}}return[Ar.fromPosition(t,"toPrevious"),Ar.fromPosition(n,"toNext")]}function Sl(r){const e=r.parent,t=e.root.document.model.schema,n=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const o of n){if(t.isLimit(o))return null;if(t.isBlock(o))return o}}function Ol(r,e,t){const n=r.model;if(!Es(r.model.schema,e,t))return;const[o,i]=Ml(e,t);!o||!i||(!n.hasContent(o,{ignoreMarkers:!0})&&n.hasContent(i,{ignoreMarkers:!0})?Ca(r,e,t,o.parent):Pa(r,e,t,o.parent))}function Pa(r,e,t,n){const o=e.parent,i=t.parent;if(!(o==n||i==n)){for(e=r.createPositionAfter(o),t=r.createPositionBefore(i),t.isEqual(e)||r.insert(i,e),r.merge(e);t.parent.isEmpty;){const a=t.parent;t=r.createPositionBefore(a),r.remove(a)}Es(r.model.schema,e,t)&&Pa(r,e,t,n)}}function Ca(r,e,t,n){const o=e.parent,i=t.parent;if(!(o==n||i==n)){for(e=r.createPositionAfter(o),t=r.createPositionBefore(i),t.isEqual(e)||r.insert(o,t);e.parent.isEmpty;){const a=e.parent;e=r.createPositionBefore(a),r.remove(a)}t=r.createPositionBefore(i),Rl(r,t),Es(r.model.schema,e,t)&&Ca(r,e,t,n)}}function Rl(r,e){const t=e.nodeBefore,n=e.nodeAfter;t.name!=n.name&&r.rename(t,n.name),r.clearAttributes(t),r.setAttributes(Object.fromEntries(n.getAttributes()),t),r.merge(e)}function Es(r,e,t){const n=e.parent,o=t.parent;return n==o||r.isLimit(n)||r.isLimit(o)?!1:Il(e,t,r)}function Ml(r,e){const t=r.getAncestors(),n=e.getAncestors();let o=0;for(;t[o]&&t[o]==n[o];)o++;return[t[o],n[o]]}function Dl(r,e){const t=r.checkChild(e,"$text"),n=r.checkChild(e,"paragraph");return!t&&n}function Il(r,e,t){const n=new ie(r,e);for(const o of n.getWalker())if(t.isLimit(o.item))return!1;return!0}function xa(r,e,t,n={}){const o=r.createElement("paragraph");r.model.schema.setAllowedAttributes(o,n,r),r.insert(o,e),Aa(r,t,r.createPositionAt(o,0))}function Bl(r,e){const t=r.model.schema.getLimitElement(e);r.remove(r.createRangeIn(t)),xa(r,r.createPositionAt(t,0),e)}function Vl(r,e){const t=r.getLimitElement(e);if(!e.containsEntireContent(t))return!1;const n=e.getFirstRange();return n.start.parent==n.end.parent?!1:r.checkChild(t,"paragraph")}function Aa(r,e,t){e instanceof wt?r.setSelection(t):e.setTo(t)}function Nl(r,e){return r.change(t=>{const n=t.createDocumentFragment(),o=e.getFirstRange();if(!o||o.isCollapsed)return n;const i=o.start.root,a=o.start.getCommonPath(o.end),_=i.getNodeByPath(a);let S;o.start.parent==o.end.parent?S=o:S=t.createRange(t.createPositionAt(_,o.start.path[a.length]),t.createPositionAt(_,o.end.path[a.length]+1));const H=S.end.offset-S.start.offset;for(const X of S.getItems({shallow:!0}))X.is("$textProxy")?t.appendText(X.data,X.getAttributes(),n):t.append(t.cloneElement(X,!0),n);if(S!=o){const X=o._getTransformedByMove(S.start,t.createPositionAt(n,0),H)[0],se=t.createRange(t.createPositionAt(n,0),X.start),Se=t.createRange(X.end,t.createPositionAt(n,"end"));Sa(Se,t),Sa(se,t)}return n})}function Sa(r,e){const t=[];Array.from(r.getItems({direction:"backward"})).map(n=>e.createRangeOn(n)).filter(n=>(n.start.isAfter(r.start)||n.start.isEqual(r.start))&&(n.end.isBefore(r.end)||n.end.isEqual(r.end))).forEach(n=>{t.push(n.start.parent),e.remove(n)}),t.forEach(n=>{let o=n;for(;o.parent&&o.isEmpty;){const i=e.createRangeOn(o);o=o.parent,e.remove(i)}})}function Ll(r,e,t){return r.change(n=>{const o=t||r.document.selection;o.isCollapsed||r.deleteContent(o,{doNotAutoparagraph:!0});const i=new Fl(r,n,o.anchor),a=[];let _;if(e.is("documentFragment")){if(e.markers.size){const X=[];for(const[se,Se]of e.markers){const{start:Ze,end:at}=Se,Ut=Ze.isEqual(at);X.push({position:Ze,name:se,isCollapsed:Ut},{position:at,name:se,isCollapsed:Ut})}X.sort(({position:se},{position:Se})=>se.isBefore(Se)?1:-1);for(const{position:se,name:Se,isCollapsed:Ze}of X){let at=null,Ut=null;const er=se.parent===e&&se.isAtStart,tr=se.parent===e&&se.isAtEnd;!er&&!tr?(at=n.createElement("$marker"),n.insert(at,se)):Ze&&(Ut=er?"start":"end"),a.push({name:Se,element:at,collapsed:Ut})}}_=e.getChildren()}else _=[e];i.handleNodes(_);let S=i.getSelectionRange();if(e.is("documentFragment")&&a.length){const X=S?Z.fromRange(S):null,se={};for(let Se=a.length-1;Se>=0;Se--){const{name:Ze,element:at,collapsed:Ut}=a[Se],er=!se[Ze];if(er&&(se[Ze]=[]),at){const tr=n.createPositionAt(at,"before");se[Ze].push(tr),n.remove(at)}else{const tr=i.getAffectedRange();if(!tr){Ut&&se[Ze].push(i.position);continue}Ut?se[Ze].push(tr[Ut]):se[Ze].push(er?tr.start:tr.end)}}for(const[Se,[Ze,at]]of Object.entries(se))Ze&&at&&Ze.root===at.root&&n.addMarker(Se,{usingOperation:!0,affectsData:!0,range:new ie(Ze,at)});X&&(S=X.toRange(),X.detach())}S&&(o instanceof wt?n.setSelection(S):o.setTo(S));const H=i.getAffectedRange()||r.createRange(o.anchor);return i.destroy(),H})}class Fl{constructor(e,t,n){this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null,this._nodeToSelect=null,this.model=e,this.writer=t,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(e);if(n.isAfter(t)){this._lastNode=e;if(this.position.parent!=e||!this.position.isAtEnd)throw new T.Bb("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?ie._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new ie(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(this.schema.isObject(e)){this._handleObject(e);return}let t=this._checkAndAutoParagraphToAllowedPosition(e);if(!t&&(t=this._checkAndSplitToAllowedPosition(e),!t)){this._handleDisallowedNode(e);return}this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=Ar.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleObject(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e)}_handleDisallowedNode(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e)}_appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new T.Bb("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=Ar.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Ar.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof Bt)||!this._canMergeLeft(e))return;const t=Ar._createBefore(e);t.stickiness="toNext";const n=Ar.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=Ar._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Ar._createAt(t.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof Bt)||!this._canMergeRight(e))return;const t=Ar._createAfter(e);t.stickiness="toNext";if(!this.position.isEqual(t))throw new T.Bb("insertcontent-invalid-insertion-position",this);this.position=ge._createAt(t.nodeBefore,"end");const n=Ar.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=Ar._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Ar._createAt(t.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof Bt&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof Bt&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_tryAutoparagraphing(e){const t=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,t)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t))}_checkAndAutoParagraphToAllowedPosition(e){if(this.schema.checkChild(this.position.parent,e))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();const t=this.writer.createElement("paragraph");return this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0),!0}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const n=this.position.parent;this.position=this.writer.createPositionBefore(n),n.isEmpty&&n.parent===t&&this.writer.remove(n)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const n=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=n,this.canMergeWith.add(this.position.nodeAfter)}return!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}function zl(r,e,t="auto"){const n=r.getSelectedElement();if(n&&e.schema.isObject(n)&&!e.schema.isInline(n))return t=="before"||t=="after"?e.createRange(e.createPositionAt(n,t)):e.createRangeOn(n);const o=(0,T.Ps)(r.getSelectedBlocks());if(!o)return e.createRange(r.focus);if(o.isEmpty)return e.createRange(e.createPositionAt(o,0));const i=e.createPositionAfter(o);return r.focus.isTouching(i)?e.createRange(i):e.createRange(e.createPositionBefore(o))}function Wl(r,e,t,n={}){if(!r.schema.isObject(e))throw new T.Bb("insertobject-element-not-an-object",r,{object:e});const o=t||r.document.selection;let i=o;n.findOptimalPosition&&r.schema.isBlock(e)&&(i=r.createSelection(zl(o,r,n.findOptimalPosition)));const a=(0,T.Ps)(o.getSelectedBlocks()),_={};return a&&Object.assign(_,r.schema.getAttributesWithProperty(a,"copyOnReplace",!0)),r.change(S=>{i.isCollapsed||r.deleteContent(i,{doNotAutoparagraph:!0});let H=e;const X=i.anchor.parent;!r.schema.checkChild(X,e)&&r.schema.checkChild(X,"paragraph")&&r.schema.checkChild("paragraph",e)&&(H=S.createElement("paragraph"),S.insert(e,H)),r.schema.setAllowedAttributes(H,_,S);const se=r.insertContent(H,i);return se.isCollapsed||n.setSelection&&jl(S,e,n.setSelection,_),se})}function jl(r,e,t,n){const o=r.model;if(t=="on"){r.setSelection(e,"on");return}if(t!="after")throw new T.Bb("insertobject-invalid-place-parameter-value",o);let i=e.nextSibling;if(o.schema.isInline(e)){r.setSelection(e,"after");return}!(i&&o.schema.checkChild(i,"$text"))&&o.schema.checkChild(e.parent,"paragraph")&&(i=r.createElement("paragraph"),o.schema.setAllowedAttributes(i,n,r),o.insertContent(i,r.createPositionAfter(e))),i&&r.setSelection(i,0)}const Zl=' ,.?!:;"-()';function Ul(r,e,t={}){const n=r.schema,o=t.direction!="backward",i=t.unit?t.unit:"character",a=!!t.treatEmojiAsSingleUnit,_=e.focus,S=new wo({boundaries:Gl(_,o),singleCharacters:!0,direction:o?"forward":"backward"}),H={walker:S,schema:n,isForward:o,unit:i,treatEmojiAsSingleUnit:a};let X;for(;X=S.next();){if(X.done)return;const se=Hl(H,X.value);if(se){e instanceof wt?r.change(Se=>{Se.setSelectionFocus(se)}):e.setFocus(se);return}}}function Hl(r,e){const{isForward:t,walker:n,unit:o,schema:i,treatEmojiAsSingleUnit:a}=r,{type:_,item:S,nextPosition:H}=e;if(_=="text")return r.unit==="word"?$l(n,t):Kl(n,o,a);if(_==(t?"elementStart":"elementEnd")){if(i.isSelectable(S))return ge._createAt(S,t?"after":"before");if(i.checkChild(H,"$text"))return H}else{if(i.isLimit(S)){n.skip(()=>!0);return}if(i.checkChild(H,"$text"))return H}}function Kl(r,e,t){const n=r.position.textNode;if(n){const o=n.data;let i=r.position.offset-n.startOffset;for(;(0,T.to)(o,i)||e=="character"&&(0,T.pp)(o,i)||t&&(0,T.YK)(o,i);)r.next(),i=r.position.offset-n.startOffset}return r.position}function $l(r,e){let t=r.position.textNode;for(t||(t=e?r.position.nodeAfter:r.position.nodeBefore);t&&t.is("$text");){const n=r.position.offset-t.startOffset;if(Xl(t,n,e))t=e?r.position.nodeAfter:r.position.nodeBefore;else{if(Jl(t.data,n,e))break;r.next()}}return r.position}function Gl(r,e){const t=r.root,n=ge._createAt(t,e?"end":0);return e?new ie(r,n):new ie(n,r)}function Jl(r,e,t){const n=e+(t?0:-1);return Zl.includes(r.charAt(n))}function Xl(r,e,t){return e===(t?r.offsetSize:0)}class Yl extends(0,T.Re)(){constructor(){super(),this.markers=new yl,this.document=new vl(this),this.schema=new Vc,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck((e,t)=>{if(t.name==="$marker")return!0}),xc(this),this.document.registerPostFixer(Ys),this.on("insertContent",(e,[t,n])=>{e.return=Ll(this,t,n)}),this.on("insertObject",(e,[t,n,o])=>{e.return=Wl(this,t,n,o)}),this.on("canEditAt",e=>{const t=!this.document.isReadOnly;e.return=t,t||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new ci,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(t){T.Bb.rethrowUnexpectedError(t,this)}}enqueueChange(e,t){try{e?typeof e=="function"?(t=e,e=new ci):e instanceof ci||(e=new ci(e)):e=new ci,this._pendingChanges.push({batch:e,callback:t}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(n){T.Bb.rethrowUnexpectedError(n,this)}}applyOperation(e){e._execute()}insertContent(e,t,n,...o){const i=Ts(t,n);return this.fire("insertContent",[e,i,n,...o])}insertObject(e,t,n,o,...i){const a=Ts(t,n);return this.fire("insertObject",[e,a,o,o,...i])}deleteContent(e,t){xl(this,e,t)}modifySelection(e,t){Ul(this,e,t)}getSelectedContent(e){return Nl(this,e)}hasContent(e,t={}){const n=e instanceof ie?e:ie._createIn(e);if(n.isCollapsed)return!1;const{ignoreWhitespaces:o=!1,ignoreMarkers:i=!1}=t;if(!i){for(const a of this.markers.getMarkersIntersectingRange(n))if(a.affectsData)return!0}for(const a of n.getItems())if(this.schema.isContent(a))if(a.is("$textProxy"))if(o){if(a.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){const t=Ts(e);return this.fire("canEditAt",[t])}createPositionFromPath(e,t,n){return new ge(e,t,n)}createPositionAt(e,t){return ge._createAt(e,t)}createPositionAfter(e){return ge._createAfter(e)}createPositionBefore(e){return ge._createBefore(e)}createRange(e,t){return new ie(e,t)}createRangeIn(e){return ie._createIn(e)}createRangeOn(e){return ie._createOn(e)}createSelection(...e){return new dr(...e)}createBatch(e){return new ci(e)}createOperationFromJSON(e){return ll.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const t=this._pendingChanges[0].batch;this._currentWriter=new Pl(this,t);const n=this._pendingChanges[0].callback(this._currentWriter);e.push(n),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}}function Ts(r,e){if(r)return r instanceof dr||r instanceof wt?r:r instanceof Pr?e||e===0?new dr(r,e):r.is("rootElement")?new dr(r,"in"):new dr(r,"on"):new dr(r)}class Pd extends null{constructor(){super(...arguments),this.domEventType="click"}onDomEvent(e){this.fire(e.type,e)}}class Ql extends rt{constructor(){super(...arguments),this.domEventType=["mousedown","mouseup","mouseover","mouseout"]}onDomEvent(e){this.fire(e.type,e)}}class Cd{constructor(e){this.document=e}createDocumentFragment(e){return new DocumentFragment(this.document,e)}createElement(e,t,n){return new Element(this.document,e,t,n)}createText(e){return new Text(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,n){return n._insertChild(e,t)}removeChildren(e,t,n){return n._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const n=e.parent;if(n){const o=n.getChildIndex(e);return this.removeChildren(o,1,n),this.insertChild(o,t,n),!0}return!1}unwrapElement(e){const t=e.parent;if(t){const n=t.getChildIndex(e);this.remove(e),this.insertChild(n,e.getChildren(),t)}}rename(e,t){const n=new Element(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,n)?n:null}setAttribute(e,t,n){n._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,n){isPlainObject(e)&&n===void 0?t._setStyle(e):n._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,n){n._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return Position._createAt(e,t)}createPositionAfter(e){return Position._createAfter(e)}createPositionBefore(e){return Position._createBefore(e)}createRange(e,t){return new Range(e,t)}createRangeOn(e){return Range._createOn(e)}createRangeIn(e){return Range._createIn(e)}createSelection(...e){return new Selection(...e)}}const ql=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,ed=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,td=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,nd=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,rd=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,od=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,id=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function xd(r){return r.startsWith("#")?ql.test(r):r.startsWith("rgb")?ed.test(r)||td.test(r):r.startsWith("hsl")?nd.test(r)||rd.test(r):id.has(r.toLowerCase())}const sd=null;function Ad(r){return sd.includes(r)}const ad=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function Sd(r){return ad.test(r)}const cd=/^[+-]?[0-9]*([.][0-9]+)?%$/;function Od(r){return cd.test(r)}const ld=null;function Rd(r){return ld.includes(r)}const dd=null;function Md(r){return dd.includes(r)}const ud=null;function Dd(r){return ud.includes(r)}const hd=/^url\(/;function Id(r){return hd.test(r)}function fd(r=""){if(r==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const e=_d(r),t=e[0],n=e[2]||t,o=e[1]||t,i=e[3]||o;return{top:t,bottom:n,right:o,left:i}}function Bd(r){return e=>{const{top:t,right:n,bottom:o,left:i}=e,a=[];return[t,n,i,o].every(_=>!!_)?a.push([r,gd(e)]):(t&&a.push([r+"-top",t]),n&&a.push([r+"-right",n]),o&&a.push([r+"-bottom",o]),i&&a.push([r+"-left",i])),a}}function gd({top:r,right:e,bottom:t,left:n}){const o=[];return n!==e?o.push(r,e,t,n):t!==r?o.push(r,e,t):e!==r?o.push(r,e):o.push(r),o.join(" ")}function Vd(r){return e=>({path:r,value:fd(e)})}function _d(r){const e=r.matchAll(od);return Array.from(e).map(t=>t[0])}function Nd(r){r.setNormalizer("background",pd()),r.setNormalizer("background-color",md()),r.setReducer("background",bd()),r.setStyleRelation("background",["background-color"])}function pd(){return r=>{const e={},t=getShorthandValues(r);for(const n of t)isRepeat(n)?(e.repeat=e.repeat||[],e.repeat.push(n)):isPosition(n)?(e.position=e.position||[],e.position.push(n)):isAttachment(n)?e.attachment=n:isColor(n)?e.color=n:isURL(n)&&(e.image=n);return{path:"background",value:e}}}function md(){return r=>({path:"background.color",value:r})}function bd(){return r=>{const e=[];return e.push(["background-color",r.color]),e}}function Ld(r){r.setNormalizer("border",wd()),r.setNormalizer("border-top",Ui("top")),r.setNormalizer("border-right",Ui("right")),r.setNormalizer("border-bottom",Ui("bottom")),r.setNormalizer("border-left",Ui("left")),r.setNormalizer("border-color",Ps("color")),r.setNormalizer("border-width",Ps("width")),r.setNormalizer("border-style",Ps("style")),r.setNormalizer("border-top-color",ro("color","top")),r.setNormalizer("border-top-style",ro("style","top")),r.setNormalizer("border-top-width",ro("width","top")),r.setNormalizer("border-right-color",ro("color","right")),r.setNormalizer("border-right-style",ro("style","right")),r.setNormalizer("border-right-width",ro("width","right")),r.setNormalizer("border-bottom-color",ro("color","bottom")),r.setNormalizer("border-bottom-style",ro("style","bottom")),r.setNormalizer("border-bottom-width",ro("width","bottom")),r.setNormalizer("border-left-color",ro("color","left")),r.setNormalizer("border-left-style",ro("style","left")),r.setNormalizer("border-left-width",ro("width","left")),r.setExtractor("border-top",Hi("top")),r.setExtractor("border-right",Hi("right")),r.setExtractor("border-bottom",Hi("bottom")),r.setExtractor("border-left",Hi("left")),r.setExtractor("border-top-color","border.color.top"),r.setExtractor("border-right-color","border.color.right"),r.setExtractor("border-bottom-color","border.color.bottom"),r.setExtractor("border-left-color","border.color.left"),r.setExtractor("border-top-width","border.width.top"),r.setExtractor("border-right-width","border.width.right"),r.setExtractor("border-bottom-width","border.width.bottom"),r.setExtractor("border-left-width","border.width.left"),r.setExtractor("border-top-style","border.style.top"),r.setExtractor("border-right-style","border.style.right"),r.setExtractor("border-bottom-style","border.style.bottom"),r.setExtractor("border-left-style","border.style.left"),r.setReducer("border-color",getBoxSidesValueReducer("border-color")),r.setReducer("border-style",getBoxSidesValueReducer("border-style")),r.setReducer("border-width",getBoxSidesValueReducer("border-width")),r.setReducer("border-top",Ki("top")),r.setReducer("border-right",Ki("right")),r.setReducer("border-bottom",Ki("bottom")),r.setReducer("border-left",Ki("left")),r.setReducer("border",vd()),r.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),r.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),r.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),r.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),r.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),r.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),r.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),r.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function wd(){return r=>{const{color:e,style:t,width:n}=Oa(r);return{path:"border",value:{color:getBoxSidesValues(e),style:getBoxSidesValues(t),width:getBoxSidesValues(n)}}}}function Ui(r){return e=>{const{color:t,style:n,width:o}=Oa(e),i={};return t!==void 0&&(i.color={[r]:t}),n!==void 0&&(i.style={[r]:n}),o!==void 0&&(i.width={[r]:o}),{path:"border",value:i}}}function Ps(r){return e=>({path:"border",value:kd(e,r)})}function kd(r,e){return{[e]:getBoxSidesValues(r)}}function ro(r,e){return t=>({path:"border",value:{[r]:{[e]:t}}})}function Hi(r){return(e,t)=>{if(t.border)return Ci(t.border,r)}}function Ci(r,e){const t={};return r.width&&r.width[e]&&(t.width=r.width[e]),r.style&&r.style[e]&&(t.style=r.style[e]),r.color&&r.color[e]&&(t.color=r.color[e]),t}function Oa(r){const e={},t=getShorthandValues(r);for(const n of t)isLength(n)||/thin|medium|thick/.test(n)?e.width=n:isLineStyle(n)?e.style=n:e.color=n;return e}function vd(){return e=>{const t=Ci(e,"top"),n=Ci(e,"right"),o=Ci(e,"bottom"),i=Ci(e,"left"),a=[t,n,o,i],_={width:r(a,"width"),style:r(a,"style"),color:r(a,"color")},S=di(_,"all");return S.length?S:[...Object.entries(_).reduce((X,[se,Se])=>(Se&&(X.push([`border-${se}`,Se]),a.forEach(Ze=>delete Ze[se])),X),[]),...di(t,"top"),...di(n,"right"),...di(o,"bottom"),...di(i,"left")]};function r(e,t){return e.map(n=>n[t]).reduce((n,o)=>n==o?n:null)}}function Ki(r){return e=>di(e,r)}function di(r,e){const t=[];if(r&&r.width&&t.push("width"),r&&r.style&&t.push("style"),r&&r.color&&t.push("color"),t.length==3){const n=t.map(o=>r[o]).join(" ");return[e=="all"?["border",n]:[`border-${e}`,n]]}return e=="all"?[]:t.map(n=>[`border-${e}-${n}`,r[n]])}function Fd(r){r.setNormalizer("margin",getPositionShorthandNormalizer("margin")),r.setNormalizer("margin-top",e=>({path:"margin.top",value:e})),r.setNormalizer("margin-right",e=>({path:"margin.right",value:e})),r.setNormalizer("margin-bottom",e=>({path:"margin.bottom",value:e})),r.setNormalizer("margin-left",e=>({path:"margin.left",value:e})),r.setReducer("margin",getBoxSidesValueReducer("margin")),r.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}function zd(r){r.setNormalizer("padding",getPositionShorthandNormalizer("padding")),r.setNormalizer("padding-top",e=>({path:"padding.top",value:e})),r.setNormalizer("padding-right",e=>({path:"padding.right",value:e})),r.setNormalizer("padding-bottom",e=>({path:"padding.bottom",value:e})),r.setNormalizer("padding-left",e=>({path:"padding.left",value:e})),r.setReducer("padding",getBoxSidesValueReducer("padding")),r.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}},50003:function(J,j,u){"use strict";u.d(j,{Z:function(){return lo}});var v=u(99973),V=u(95770),C=u(5820),L=u(21494);class m extends L.qZ{constructor(l){super(l),this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];const d=this.document;this.listenTo(d,"paste",g("clipboardInput"),{priority:"low"}),this.listenTo(d,"drop",g("clipboardInput"),{priority:"low"}),this.listenTo(d,"dragover",g("dragging"),{priority:"low"});function g(w){return(k,I)=>{I.preventDefault();const N=I.dropRange?[I.dropRange]:null,K=new C.M3(d,w);d.fire(K,{dataTransfer:I.dataTransfer,method:k.name,targetRanges:N,target:I.target,domEvent:I.domEvent}),K.stop.called&&I.stopPropagation()}}}onDomEvent(l){const d="clipboardData"in l?l.clipboardData:l.dataTransfer,g=l.type=="drop"||l.type=="paste",w={dataTransfer:new L.tn(d,{cacheFiles:g})};(l.type=="drop"||l.type=="dragover")&&(w.dropRange=B(this.view,l)),this.fire(l.type,l,w)}}function B(A,l){const d=l.target.ownerDocument,g=l.clientX,w=l.clientY;let k;return d.caretRangeFromPoint&&d.caretRangeFromPoint(g,w)?k=d.caretRangeFromPoint(g,w):l.rangeParent&&(k=d.createRange(),k.setStart(l.rangeParent,l.rangeOffset),k.collapse(!0)),k?A.domConverter.domRangeToView(k):null}function M(A){return A=A.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(A.includes("</p><p>")||A.includes("<br>"))&&(A=`<p>${A}</p>`),A}function D(A){return A.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(l,d)=>d.length==1?" ":d).replace(/<!--[\s\S]*?-->/g,"")}const O=["figcaption","li"];function W(A){let l="";if(A.is("$text")||A.is("$textProxy"))l=A.data;else if(A.is("element","img")&&A.hasAttribute("alt"))l=A.getAttribute("alt");else if(A.is("element","br"))l=`
`;else{let d=null;for(const g of A.getChildren()){const w=W(g);d&&(d.is("containerElement")||g.is("containerElement"))&&(O.includes(d.name)||O.includes(g.name)?l+=`
`:l+=`

`),l+=w,d=g}}return l}class z extends V.Sy{static get pluginName(){return"ClipboardPipeline"}init(){this.editor.editing.view.addObserver(m),this._setupPasteDrop(),this._setupCopyCut()}_setupPasteDrop(){const l=this.editor,d=l.model,g=l.editing.view,w=g.document;this.listenTo(w,"clipboardInput",(k,I)=>{I.method=="paste"&&!l.model.canEditAt(l.model.document.selection)&&k.stop()},{priority:"highest"}),this.listenTo(w,"clipboardInput",(k,I)=>{const N=I.dataTransfer;let K;if(I.content)K=I.content;else{let me="";N.getData("text/html")?me=D(N.getData("text/html")):N.getData("text/plain")&&(me=M(N.getData("text/plain"))),K=this.editor.data.htmlProcessor.toView(me)}const ee=new C.M3(this,"inputTransformation");this.fire(ee,{content:K,dataTransfer:N,targetRanges:I.targetRanges,method:I.method}),ee.stop.called&&k.stop(),g.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(k,I)=>{if(I.content.isEmpty)return;const K=this.editor.data.toModel(I.content,"$clipboardHolder");K.childCount!=0&&(k.stop(),d.change(()=>{this.fire("contentInsertion",{content:K,method:I.method,dataTransfer:I.dataTransfer,targetRanges:I.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(k,I)=>{I.resultRange=d.insertContent(I.content)},{priority:"low"})}_setupCopyCut(){const l=this.editor,d=l.model.document,w=l.editing.view.document,k=(I,N)=>{const K=N.dataTransfer;N.preventDefault();const ee=l.data.toView(l.model.getSelectedContent(d.selection));w.fire("clipboardOutput",{dataTransfer:K,content:ee,method:I.name})};this.listenTo(w,"copy",k,{priority:"low"}),this.listenTo(w,"cut",(I,N)=>{l.model.canEditAt(l.model.document.selection)?k(I,N):N.preventDefault()},{priority:"low"}),this.listenTo(w,"clipboardOutput",(I,N)=>{N.content.isEmpty||(N.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(N.content)),N.dataTransfer.setData("text/plain",W(N.content))),N.method=="cut"&&l.model.deleteContent(d.selection)},{priority:"low"})}}class q{constructor(l,d=20){this._batch=null,this.model=l,this._size=0,this.limit=d,this._isLocked=!1,this._changeCallback=(g,w)=>{w.isLocal&&w.isUndoable&&w!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(l){this._size+=l,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(l=!1){(!this.isLocked||l)&&(this._batch=null,this._size=0)}}class te extends V.mY{constructor(l,d){super(l),this._buffer=new q(l.model,d),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(l={}){const d=this.editor.model,g=d.document,w=l.text||"",k=w.length;let I=g.selection;if(l.selection?I=l.selection:l.range&&(I=d.createSelection(l.range)),!d.canEditAt(I))return;const N=l.resultRange;d.enqueueChange(this._buffer.batch,K=>{this._buffer.lock(),d.deleteContent(I),w&&d.insertContent(K.createText(w,g.selection.getAttributes()),I),N?K.setSelection(N):I.is("documentSelection")||K.setSelection(I),this._buffer.unlock(),this._buffer.input(k)})}}const de=["insertText","insertReplacementText"];class he extends L.Qj{constructor(l){super(l),this.focusObserver=l.getObserver(L.DX),C.OB.isAndroid&&de.push("insertCompositionText");const d=l.document;d.on("beforeinput",(g,w)=>{if(!this.isEnabled)return;const{data:k,targetRanges:I,inputType:N,domEvent:K}=w;if(!de.includes(N))return;this.focusObserver.flush();const ee=new C.M3(d,"insertText");d.fire(ee,new L.dK(l,K,{text:k,selection:l.createSelection(I)})),ee.stop.called&&g.stop()}),d.on("compositionend",(g,{data:w,domEvent:k})=>{!this.isEnabled||C.OB.isAndroid||w&&d.fire("insertText",new L.dK(l,k,{text:w,selection:d.selection}))},{priority:"lowest"})}observe(){}stopObserving(){}}class Ie extends V.Sy{static get pluginName(){return"Input"}init(){const l=this.editor,d=l.model,g=l.editing.view,w=d.document.selection;g.addObserver(he);const k=new te(l,l.config.get("typing.undoStep")||20);l.commands.add("insertText",k),l.commands.add("input",k),this.listenTo(g.document,"insertText",(I,N)=>{g.document.isComposing||N.preventDefault();const{text:K,selection:ee,resultRange:me}=N,ve=Array.from(ee.getRanges()).map(_t=>l.editing.mapper.toModelRange(_t));let Ve=K;if(C.OB.isAndroid){const _t=Array.from(ve[0].getItems()).reduce((rn,An)=>rn+(An.is("$textProxy")?An.data:""),"");_t&&(_t.length<=Ve.length?Ve.startsWith(_t)&&(Ve=Ve.substring(_t.length),ve[0].start=ve[0].start.getShiftedBy(_t.length)):_t.startsWith(Ve)&&(ve[0].start=ve[0].start.getShiftedBy(Ve.length),Ve=""))}const ot={text:Ve,selection:d.createSelection(ve)};me&&(ot.resultRange=l.editing.mapper.toModelRange(me)),l.execute("insertText",ot),g.scrollToTheSelection()}),C.OB.isAndroid?this.listenTo(g.document,"keydown",(I,N)=>{w.isCollapsed||N.keyCode!=229||!g.document.isComposing||T(d,k)}):this.listenTo(g.document,"compositionstart",()=>{w.isCollapsed||T(d,k)})}}function T(A,l){if(!l.isEnabled)return;const d=l.buffer;d.lock(),A.enqueueChange(d.batch,()=>{A.deleteContent(A.document.selection)}),d.unlock()}class Te extends V.mY{constructor(l,d){super(l),this.direction=d,this._buffer=new q(l.model,l.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(l={}){const d=this.editor.model,g=d.document;d.enqueueChange(this._buffer.batch,w=>{this._buffer.lock();const k=w.createSelection(l.selection||g.selection);if(!d.canEditAt(k))return;const I=l.sequence||1,N=k.isCollapsed;if(k.isCollapsed&&d.modifySelection(k,{direction:this.direction,unit:l.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(I)){this._replaceEntireContentWithParagraph(w);return}if(this._shouldReplaceFirstBlockWithParagraph(k,I)){this.editor.execute("paragraph",{selection:k});return}if(k.isCollapsed)return;let K=0;k.getFirstRange().getMinimalFlatRanges().forEach(ee=>{K+=(0,C.QX)(ee.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),d.deleteContent(k,{doNotResetEntireContent:N,direction:this.direction}),this._buffer.input(K),w.setSelection(k),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(l){if(l>1)return!1;const d=this.editor.model,w=d.document.selection,k=d.schema.getLimitElement(w);if(!(w.isCollapsed&&w.containsEntireContent(k))||!d.schema.checkChild(k,"paragraph"))return!1;const N=k.getChild(0);return!(N&&N.is("element","paragraph"))}_replaceEntireContentWithParagraph(l){const d=this.editor.model,w=d.document.selection,k=d.schema.getLimitElement(w),I=l.createElement("paragraph");l.remove(l.createRangeIn(k)),l.insert(I,k),l.setSelection(I,0)}_shouldReplaceFirstBlockWithParagraph(l,d){const g=this.editor.model;if(d>1||this.direction!="backward"||!l.isCollapsed)return!1;const w=l.getFirstPosition(),k=g.schema.getLimitElement(w),I=k.getChild(0);return!(w.parent!=I||!l.containsEntireContent(I)||!g.schema.checkChild(k,"paragraph")||I.name=="paragraph")}}const Le="character",Pe="word",Qe="codePoint",ct="selection",Fe="backward",Ee="forward",Ke={deleteContent:{unit:ct,direction:Fe},deleteContentBackward:{unit:Qe,direction:Fe},deleteWordBackward:{unit:Pe,direction:Fe},deleteHardLineBackward:{unit:ct,direction:Fe},deleteSoftLineBackward:{unit:ct,direction:Fe},deleteContentForward:{unit:Le,direction:Ee},deleteWordForward:{unit:Pe,direction:Ee},deleteHardLineForward:{unit:ct,direction:Ee},deleteSoftLineForward:{unit:ct,direction:Ee}};class mt extends L.Qj{constructor(l){super(l);const d=l.document;let g=0;d.on("keydown",()=>{g++}),d.on("keyup",()=>{g=0}),d.on("beforeinput",(w,k)=>{if(!this.isEnabled)return;const{targetRanges:I,domEvent:N,inputType:K}=k,ee=Ke[K];if(!ee)return;const me={direction:ee.direction,unit:ee.unit,sequence:g};me.unit==ct&&(me.selectionToRemove=l.createSelection(I[0])),K==="deleteContentBackward"&&(C.OB.isAndroid&&(me.sequence=1),We(I)&&(me.unit=ct,me.selectionToRemove=l.createSelection(I)));const ve=new L.r7(d,"delete",I[0]);d.fire(ve,new L.dK(l,N,me)),ve.stop.called&&w.stop()}),C.OB.isBlink&&St(this)}observe(){}stopObserving(){}}function St(A){const l=A.view,d=l.document;let g=null,w=!1;d.on("keydown",(N,{keyCode:K})=>{g=K,w=!1}),d.on("keyup",(N,{keyCode:K,domEvent:ee})=>{const me=d.selection,ve=A.isEnabled&&K==g&&k(K)&&!me.isCollapsed&&!w;if(g=null,ve){const Ve=me.getFirstRange(),ot=new L.r7(d,"delete",Ve),_t={unit:ct,direction:I(K),selectionToRemove:me};d.fire(ot,new L.dK(l,ee,_t))}}),d.on("beforeinput",(N,{inputType:K})=>{const ee=Ke[K];k(g)&&ee&&ee.direction==I(g)&&(w=!0)},{priority:"high"}),d.on("beforeinput",(N,{inputType:K,data:ee})=>{g==C.Do.delete&&K=="insertText"&&ee=="\x7F"&&N.stop()},{priority:"high"});function k(N){return N==C.Do.backspace||N==C.Do.delete}function I(N){return N==C.Do.backspace?Fe:Ee}}function We(A){if(A.length!=1||A[0].isCollapsed)return!1;const l=A[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let d=0;for(const{nextPosition:g}of l){if(!g.parent.is("$text"))d++;else{const w=g.parent.data,k=g.offset;if((0,C.to)(w,k)||(0,C.pp)(w,k)||(0,C.YK)(w,k))continue;d++}if(d>1)return!0}return!1}class Re extends V.Sy{static get pluginName(){return"Delete"}init(){const l=this.editor,d=l.editing.view,g=d.document,w=l.model.document;d.addObserver(mt),this._undoOnBackspace=!1;const k=new Te(l,"forward");l.commands.add("deleteForward",k),l.commands.add("forwardDelete",k),l.commands.add("delete",new Te(l,"backward")),this.listenTo(g,"delete",(I,N)=>{g.isComposing||N.preventDefault();const{direction:K,sequence:ee,selectionToRemove:me,unit:ve}=N,Ve=K==="forward"?"deleteForward":"delete",ot={sequence:ee};if(ve=="selection"){const _t=Array.from(me.getRanges()).map(rn=>l.editing.mapper.toModelRange(rn));ot.selection=l.model.createSelection(_t)}else ot.unit=ve;l.execute(Ve,ot),d.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(g,"delete",(I,N)=>{this._undoOnBackspace&&N.direction=="backward"&&N.sequence==1&&N.unit=="codePoint"&&(this._undoOnBackspace=!1,l.execute("undo"),N.preventDefault(),I.stop())},{context:"$capture"}),this.listenTo(w,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class Ne extends V.Sy{static get requires(){return[Ie,Re]}static get pluginName(){return"Typing"}}function Oe(A,l){let d=A.start;return{text:Array.from(A.getWalker({ignoreElementEnd:!1})).reduce((w,{item:k})=>k.is("$text")||k.is("$textProxy")?w+k.data:(d=l.createPositionAfter(k),""),""),range:l.createRange(d,A.end)}}class Be extends(0,C.Re)(){constructor(l,d){super(),this.model=l,this.testCallback=d,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(l.document.selection),this.stopListening(l.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const d=this.model.document;this.listenTo(d.selection,"change:range",(g,{directChange:w})=>{if(w){if(!d.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(d,"change:data",(g,w)=>{w.isUndo||!w.isLocal||this._evaluateTextBeforeSelection("data",{batch:w})})}_evaluateTextBeforeSelection(l,d={}){const g=this.model,k=g.document.selection,I=g.createRange(g.createPositionAt(k.focus.parent,0),k.focus),{text:N,range:K}=Oe(I,g),ee=this.testCallback(N);if(!ee&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!ee,ee){const me=Object.assign(d,{text:N,range:K});typeof ee=="object"&&Object.assign(me,ee),this.fire(`matched:${l}`,me)}}}class it extends null{static get pluginName(){return"TwoStepCaretMovement"}constructor(l){super(l),this.attributes=new Set,this._overrideUid=null}init(){const l=this.editor,d=l.model,g=l.editing.view,w=l.locale,k=d.document.selection;this.listenTo(g.document,"arrowKey",(I,N)=>{if(!k.isCollapsed||N.shiftKey||N.altKey||N.ctrlKey)return;const K=N.keyCode==keyCodes.arrowright,ee=N.keyCode==keyCodes.arrowleft;if(!K&&!ee)return;const me=w.contentLanguageDirection;let ve=!1;me==="ltr"&&K||me==="rtl"&&ee?ve=this._handleForwardMovement(N):ve=this._handleBackwardMovement(N),ve===!0&&I.stop()},{context:"$text",priority:"highest"}),this._isNextGravityRestorationSkipped=!1,this.listenTo(k,"change:range",(I,N)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!N.directChange&&kt(k.getFirstPosition(),this.attributes)||this._restoreGravity())})}registerAttribute(l){this.attributes.add(l)}_handleForwardMovement(l){const d=this.attributes,w=this.editor.model.document.selection,k=w.getFirstPosition();return this._isGravityOverridden||k.isAtStart&&ze(w,d)?!1:kt(k,d)?(je(l),this._overrideGravity(),!0):!1}_handleBackwardMovement(l){const d=this.attributes,g=this.editor.model,w=g.document.selection,k=w.getFirstPosition();return this._isGravityOverridden?(je(l),this._restoreGravity(),dt(g,d,k),!0):k.isAtStart?ze(w,d)?(je(l),dt(g,d,k),!0):!1:pt(k,d)?k.isAtEnd&&!ze(w,d)&&kt(k,d)?(je(l),dt(g,d,k),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(l=>l.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(l=>{l.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function ze(A,l){for(const d of l)if(A.hasAttribute(d))return!0;return!1}function dt(A,l,d){const g=d.nodeBefore;A.change(w=>{if(g){const k=[],I=A.schema.isObject(g)&&A.schema.isInline(g);for(const[N,K]of g.getAttributes())A.schema.checkAttribute("$text",N)&&(!I||A.schema.getAttributeProperties(N).copyFromObject!==!1)&&k.push([N,K]);w.setSelectionAttribute(k)}else w.removeSelectionAttribute(l)})}function je(A){A.preventDefault()}function pt(A,l){const d=A.getShiftedBy(-1);return kt(d,l)}function kt(A,l){const{nodeBefore:d,nodeAfter:g}=A;for(const w of l){const k=d?d.getAttribute(w):void 0;if((g?g.getAttribute(w):void 0)!==k)return!0}return!1}const Ht={copyright:{from:"(c)",to:"\xA9"},registeredTrademark:{from:"(r)",to:"\xAE"},trademark:{from:"(tm)",to:"\u2122"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"\xBD",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"\u2153",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"\u2154",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"\xBC",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"\xBE",null]},lessThanOrEqual:{from:"<=",to:"\u2264"},greaterThanOrEqual:{from:">=",to:"\u2265"},notEqual:{from:"!=",to:"\u2260"},arrowLeft:{from:"<-",to:"\u2190"},arrowRight:{from:"->",to:"\u2192"},horizontalEllipsis:{from:"...",to:"\u2026"},enDash:{from:/(^| )(--)( )$/,to:[null,"\u2013",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"\u2014",null]},quotesPrimary:{from:_e('"'),to:[null,"\u201C",null,"\u201D"]},quotesSecondary:{from:_e("'"),to:[null,"\u2018",null,"\u2019"]},quotesPrimaryEnGb:{from:_e("'"),to:[null,"\u2018",null,"\u2019"]},quotesSecondaryEnGb:{from:_e('"'),to:[null,"\u201C",null,"\u201D"]},quotesPrimaryPl:{from:_e('"'),to:[null,"\u201E",null,"\u201D"]},quotesSecondaryPl:{from:_e("'"),to:[null,"\u201A",null,"\u2019"]}},Me={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},pe=null;class G extends null{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}constructor(l){super(l),l.config.define("typing",{transformations:{include:pe}})}init(){const d=this.editor.model.document.selection;d.on("change:range",()=>{this.isEnabled=!d.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const l=this.editor,d=l.model,g=l.plugins.get("Delete"),w=xe(l.config.get("typing.transformations")),k=N=>{for(const K of w)if(K.from.test(N))return{normalizedTransformation:K}},I=new TextWatcher(l.model,k);I.on("matched:data",(N,K)=>{if(!K.batch.isTyping)return;const{from:ee,to:me}=K.normalizedTransformation,ve=ee.exec(K.text),Ve=me(ve.slice(1)),ot=K.range;let _t=ve.index;d.enqueueChange(rn=>{for(let An=1;An<ve.length;An++){const Xn=ve[An],Er=Ve[An-1];if(Er==null){_t+=Xn.length;continue}const cr=ot.start.getShiftedBy(_t),Yn=d.createRange(cr,cr.getShiftedBy(Xn.length)),Tr=ke(cr);d.insertContent(rn.createText(Er,Tr),Yn),_t+=Er.length}d.enqueueChange(()=>{g.requestUndoOnBackspace()})})}),I.bind("isEnabled").to(this)}}function ce(A){return typeof A=="string"?new RegExp(`(${escapeRegExp(A)})$`):A}function fe(A){return typeof A=="string"?()=>[A]:A instanceof Array?()=>A:A}function ke(A){return(A.textNode?A.textNode:A.nodeAfter).getAttributes()}function _e(A){return new RegExp(`(^|\\s)(${A})([^${A}]*)(${A})$`)}function xe(A){const l=A.extra||[],d=A.remove||[],g=k=>!d.includes(k),w=A.include.concat(l).filter(g);return He(w).filter(g).map(k=>typeof k=="string"&&Ht[k]?Ht[k]:k).filter(k=>typeof k=="object").map(k=>({from:ce(k.from),to:fe(k.to)}))}function He(A){const l=new Set;for(const d of A)if(typeof d=="string"&&Me[d])for(const g of Me[d])l.add(g);else l.add(d);return Array.from(l)}var ut=u(58522);function*Ye(A,l){for(const d of l)d&&A.getAttributeProperties(d[0]).copyOnEnter&&(yield d)}class Yt extends V.mY{execute(){this.editor.model.change(l=>{this.enterBlock(l),this.fire("afterExecute",{writer:l})})}enterBlock(l){const d=this.editor.model,g=d.document.selection,w=d.schema,k=g.isCollapsed,I=g.getFirstRange(),N=I.start.parent,K=I.end.parent;if(w.isLimit(N)||w.isLimit(K))return!k&&N==K&&d.deleteContent(g),!1;if(k){const ee=Ye(l.model.schema,g.getAttributes());return cn(l,I.start),l.setSelectionAttribute(ee),!0}else{const ee=!(I.start.isAtStart&&I.end.isAtEnd),me=N==K;if(d.deleteContent(g,{leaveUnmerged:ee}),ee){if(me)return cn(l,g.focus),!0;l.setSelection(K,0)}}return!1}}function cn(A,l){A.split(l),A.setSelection(l.parent.nextSibling,0)}const Vt={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class qt extends L.Qj{constructor(l){super(l);const d=this.document;let g=!1;d.on("keydown",(w,k)=>{g=k.shiftKey}),d.on("beforeinput",(w,k)=>{if(!this.isEnabled)return;let I=k.inputType;C.OB.isSafari&&g&&I=="insertParagraph"&&(I="insertLineBreak");const N=k.domEvent,K=Vt[I];if(!K)return;const ee=new L.r7(d,"enter",k.targetRanges[0]);d.fire(ee,new L.dK(l,N,{isSoft:K.isSoft})),ee.stop.called&&w.stop()})}observe(){}stopObserving(){}}class Sr extends V.Sy{static get pluginName(){return"Enter"}init(){const l=this.editor,d=l.editing.view,g=d.document;d.addObserver(qt),l.commands.add("enter",new Yt(l)),this.listenTo(g,"enter",(w,k)=>{g.isComposing||k.preventDefault(),!k.isSoft&&(l.execute("enter"),d.scrollToTheSelection())},{priority:"low"})}}class Xe extends V.mY{execute(){const l=this.editor.model,d=l.document;l.change(g=>{be(l,g,d.selection),this.fire("afterExecute",{writer:g})})}refresh(){const l=this.editor.model,d=l.document;this.isEnabled=oe(l.schema,d.selection)}}function oe(A,l){if(l.rangeCount>1)return!1;const d=l.anchor;if(!d||!A.checkChild(d,"softBreak"))return!1;const g=l.getFirstRange(),w=g.start.parent,k=g.end.parent;return!((nt(w,A)||nt(k,A))&&w!==k)}function be(A,l,d){const g=d.isCollapsed,w=d.getFirstRange(),k=w.start.parent,I=w.end.parent,N=k==I;if(g){const K=Ye(A.schema,d.getAttributes());De(A,l,w.end),l.removeSelectionAttribute(d.getAttributeKeys()),l.setSelectionAttribute(K)}else{const K=!(w.start.isAtStart&&w.end.isAtEnd);A.deleteContent(d,{leaveUnmerged:K}),N?De(A,l,d.focus):K&&l.setSelection(I,0)}}function De(A,l,d){const g=l.createElement("softBreak");A.insertContent(g,d),l.setSelection(g,"after")}function nt(A,l){return A.is("rootElement")?!1:l.isLimit(A)||nt(A.parent,l)}class vt extends V.Sy{static get pluginName(){return"ShiftEnter"}init(){const l=this.editor,d=l.model.schema,g=l.conversion,w=l.editing.view,k=w.document;d.register("softBreak",{allowWhere:"$text",isInline:!0}),g.for("upcast").elementToElement({model:"softBreak",view:"br"}),g.for("downcast").elementToElement({model:"softBreak",view:(I,{writer:N})=>N.createEmptyElement("br")}),w.addObserver(qt),l.commands.add("shiftEnter",new Xe(l)),this.listenTo(k,"enter",(I,N)=>{k.isComposing||N.preventDefault(),N.isSoft&&(l.execute("shiftEnter"),w.scrollToTheSelection())},{priority:"low"})}}class yn extends(0,C.ln)(){constructor(){super(...arguments),this._stack=[]}add(l,d){const g=this._stack,w=g[0];this._insertDescriptor(l);const k=g[0];w!==k&&!en(w,k)&&this.fire("change:top",{oldDescriptor:w,newDescriptor:k,writer:d})}remove(l,d){const g=this._stack,w=g[0];this._removeDescriptor(l);const k=g[0];w!==k&&!en(w,k)&&this.fire("change:top",{oldDescriptor:w,newDescriptor:k,writer:d})}_insertDescriptor(l){const d=this._stack,g=d.findIndex(k=>k.id===l.id);if(en(l,d[g]))return;g>-1&&d.splice(g,1);let w=0;for(;d[w]&&ln(d[w],l);)w++;d.splice(w,0,l)}_removeDescriptor(l){const d=this._stack,g=d.findIndex(w=>w.id===l);g>-1&&d.splice(g,1)}}function en(A,l){return A&&l&&A.priority==l.priority&&dn(A.classes)==dn(l.classes)}function ln(A,l){return A.priority>l.priority?!0:A.priority<l.priority?!1:dn(A.classes)>dn(l.classes)}function dn(A){return Array.isArray(A)?A.sort().join(","):A}var Or='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';const gn="ck-widget",_n="ck-widget_selected";function yt(A){return A.is("element")?!!A.getCustomProperty("widget"):!1}function pn(A,l,d={}){if(!A.is("containerElement"))throw new CKEditorError("widget-to-widget-wrong-element-type",null,{element:A});return l.setAttribute("contenteditable","false",A),l.addClass(gn,A),l.setCustomProperty("widget",!0,A),A.getFillerOffset=ht,l.setCustomProperty("widgetLabel",[],A),d.label&&On(A,d.label),d.hasSelectionHandle&&Ue(A,l),tn(A,l),A}function hr(A,l,d){if(l.classes&&d.addClass(toArray(l.classes),A),l.attributes)for(const g in l.attributes)d.setAttribute(g,l.attributes[g],A)}function Rr(A,l,d){if(l.classes&&d.removeClass(toArray(l.classes),A),l.attributes)for(const g in l.attributes)d.removeAttribute(g,A)}function tn(A,l,d=hr,g=Rr){const w=new HighlightStack;w.on("change:top",(N,K)=>{K.oldDescriptor&&g(A,K.oldDescriptor,K.writer),K.newDescriptor&&d(A,K.newDescriptor,K.writer)});const k=(N,K,ee)=>w.add(K,ee),I=(N,K,ee)=>w.remove(K,ee);l.setCustomProperty("addHighlight",k,A),l.setCustomProperty("removeHighlight",I,A)}function On(A,l){A.getCustomProperty("widgetLabel").push(l)}function Kt(A){return A.getCustomProperty("widgetLabel").reduce((d,g)=>typeof g=="function"?d?d+". "+g():g():d?d+". "+g:g,"")}function nr(A,l,d={}){return l.addClass(["ck-editor__editable","ck-editor__nested-editable"],A),l.setAttribute("role","textbox",A),d.label&&l.setAttribute("aria-label",d.label,A),l.setAttribute("contenteditable",A.isReadOnly?"false":"true",A),A.on("change:isReadOnly",(g,w,k)=>{l.setAttribute("contenteditable",k?"false":"true",A)}),A.on("change:isFocused",(g,w,k)=>{k?l.addClass("ck-editor__nested-editable_focused",A):l.removeClass("ck-editor__nested-editable_focused",A)}),tn(A,l),A}function oo(A,l){const d=A.getSelectedElement();if(d){const g=getTypeAroundFakeCaretPosition(A);if(g)return l.createRange(l.createPositionAt(d,g))}return engineFindOptimalInsertionRange(A,l)}function et(A,l){return(d,g)=>{const{mapper:w,viewPosition:k}=g,I=w.findMappedViewAncestor(k);if(!l(I))return;const N=w.toModelElement(I);g.modelPosition=A.createPositionAt(N,k.isAtStart?"before":"after")}}function ht(){return null}function Ue(A,l){const d=l.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(g){const w=this.toDomElement(g),k=new IconView;return k.set("content",dragHandleIcon),k.render(),w.appendChild(k.element),w});l.insert(l.createPositionAt(A,0),d),l.addClass(["ck-widget_with-selection-handle"],A)}const gt="widget-type-around";function Rt(A,l,d){return!!A&&yt(A)&&!d.isInline(l)}function $t(A){return A.closest(".ck-widget__type-around__button")}function mn(A){return A.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function Rn(A,l){const d=A.closest(".ck-widget");return l.mapDomToView(d)}function Nn(A){return A.getAttribute(gt)}var fr='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',Mr=u(1062),Et=u.n(Mr),En=u(60552),Dr=u.n(En),Tn=u(33566),gr=u.n(Tn),Mn=u(84107),Nt=u.n(Mn),Ct=u(24911),Ln=u.n(Ct),_r=u(63227),Fn=u.n(_r),zn=u(68153),Wn={};Wn.styleTagTransform=Fn(),Wn.setAttributes=Nt(),Wn.insert=gr().bind(null,"head"),Wn.domAPI=Dr(),Wn.insertStyleElement=Ln();var Ir=Et()(zn.Z,Wn),Br=zn.Z&&zn.Z.locals?zn.Z.locals:void 0;const Pn=["before","after"],Tt=new DOMParser().parseFromString(fr,"image/svg+xml").firstChild,io="ck-widget__type-around_disabled";class jn extends V.Sy{constructor(){super(...arguments),this._currentFakeCaretModelElement=null}static get pluginName(){return"WidgetTypeAround"}static get requires(){return[Sr,Re]}init(){const l=this.editor,d=l.editing.view;this.on("change:isEnabled",(g,w,k)=>{d.change(I=>{for(const N of d.document.roots)k?I.removeClass(io,N):I.addClass(io,N)}),k||l.model.change(I=>{I.removeSelectionAttribute(gt)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(l,d){const g=this.editor,w=g.editing.view,k=g.model.schema.getAttributesWithProperty(l,"copyOnReplace",!0);g.execute("insertParagraph",{position:g.model.createPositionAt(l,d),attributes:k}),w.focus(),w.scrollToTheSelection()}_listenToIfEnabled(l,d,g,w){this.listenTo(l,d,(...k)=>{this.isEnabled&&g(...k)},w)}_insertParagraphAccordingToFakeCaretPosition(){const g=this.editor.model.document.selection,w=Nn(g);if(!w)return!1;const k=g.getSelectedElement();return this._insertParagraph(k,w),!0}_enableTypeAroundUIInjection(){const l=this.editor,d=l.model.schema,g=l.locale.t,w={before:g("Insert paragraph before block"),after:g("Insert paragraph after block")};l.editing.downcastDispatcher.on("insert",(k,I,N)=>{const K=N.mapper.toViewElement(I.item);K&&Rt(K,I.item,d)&&(Kr(N.writer,w,K),K.getCustomProperty("widgetLabel").push(()=>this.isEnabled?g("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const l=this.editor,d=l.model,g=d.document.selection,w=d.schema,k=l.editing.view;this._listenToIfEnabled(k.document,"arrowKey",(N,K)=>{this._handleArrowKeyPress(N,K)},{context:[yt,"$text"],priority:"high"}),this._listenToIfEnabled(g,"change:range",(N,K)=>{K.directChange&&l.model.change(ee=>{ee.removeSelectionAttribute(gt)})}),this._listenToIfEnabled(d.document,"change:data",()=>{const N=g.getSelectedElement();if(N){const K=l.editing.mapper.toViewElement(N);if(Rt(K,N,w))return}l.model.change(K=>{K.removeSelectionAttribute(gt)})}),this._listenToIfEnabled(l.editing.downcastDispatcher,"selection",(N,K,ee)=>{const me=ee.writer;if(this._currentFakeCaretModelElement){const _t=ee.mapper.toViewElement(this._currentFakeCaretModelElement);_t&&(me.removeClass(Pn.map(I),_t),this._currentFakeCaretModelElement=null)}const ve=K.selection.getSelectedElement();if(!ve)return;const Ve=ee.mapper.toViewElement(ve);if(!Rt(Ve,ve,w))return;const ot=Nn(K.selection);ot&&(me.addClass(I(ot),Ve),this._currentFakeCaretModelElement=ve)}),this._listenToIfEnabled(l.ui.focusTracker,"change:isFocused",(N,K,ee)=>{ee||l.model.change(me=>{me.removeSelectionAttribute(gt)})});function I(N){return`ck-widget_type-around_show-fake-caret_${N}`}}_handleArrowKeyPress(l,d){const g=this.editor,w=g.model,k=w.document.selection,I=w.schema,N=g.editing.view,K=d.keyCode,ee=(0,C.Zt)(K,g.locale.contentLanguageDirection),me=N.document.selection.getSelectedElement(),ve=g.editing.mapper.toModelElement(me);let Ve;Rt(me,ve,I)?Ve=this._handleArrowKeyPressOnSelectedWidget(ee):k.isCollapsed?Ve=this._handleArrowKeyPressWhenSelectionNextToAWidget(ee):d.shiftKey||(Ve=this._handleArrowKeyPressWhenNonCollapsedSelection(ee)),Ve&&(d.preventDefault(),l.stop())}_handleArrowKeyPressOnSelectedWidget(l){const g=this.editor.model,w=g.document.selection,k=Nn(w);return g.change(I=>{if(k){if(!(k===(l?"after":"before")))return I.removeSelectionAttribute(gt),!0}else return I.setSelectionAttribute(gt,l?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(l){const d=this.editor,g=d.model,w=g.schema,k=d.plugins.get("Widget"),I=k._getObjectElementNextToSelection(l),N=d.editing.mapper.toViewElement(I);return Rt(N,I,w)?(g.change(K=>{k._setSelectionOverElement(I),K.setSelectionAttribute(gt,l?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(l){const d=this.editor,g=d.model,w=g.schema,k=d.editing.mapper,I=g.document.selection,N=l?I.getLastPosition().nodeBefore:I.getFirstPosition().nodeAfter,K=k.toViewElement(N);return Rt(K,N,w)?(g.change(ee=>{ee.setSelection(N,"on"),ee.setSelectionAttribute(gt,l?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const l=this.editor,d=l.editing.view;this._listenToIfEnabled(d.document,"mousedown",(g,w)=>{const k=$t(w.domTarget);if(!k)return;const I=mn(k),N=Rn(k,d.domConverter),K=l.editing.mapper.toModelElement(N);this._insertParagraph(K,I),w.preventDefault(),g.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const l=this.editor,d=l.model.document.selection,g=l.editing.view;this._listenToIfEnabled(g.document,"enter",(w,k)=>{if(w.eventPhase!="atTarget")return;const I=d.getSelectedElement(),N=l.editing.mapper.toViewElement(I),K=l.model.schema;let ee;this._insertParagraphAccordingToFakeCaretPosition()?ee=!0:Rt(N,I,K)&&(this._insertParagraph(I,k.isSoft?"before":"after"),ee=!0),ee&&(k.preventDefault(),w.stop())},{context:yt})}_enableInsertingParagraphsOnTypingKeystroke(){const d=this.editor.editing.view.document;this._listenToIfEnabled(d,"insertText",(g,w)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(w.selection=d.selection)},{priority:"high"}),C.OB.isAndroid?this._listenToIfEnabled(d,"keydown",(g,w)=>{w.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(d,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const l=this.editor,d=l.editing.view,g=l.model,w=g.schema;this._listenToIfEnabled(d.document,"delete",(k,I)=>{if(k.eventPhase!="atTarget")return;const N=Nn(g.document.selection);if(!N)return;const K=I.direction,ee=g.document.selection.getSelectedElement(),me=N==="before",ve=K=="forward";if(me===ve)l.execute("delete",{selection:g.createSelection(ee,"on")});else{const ot=w.getNearestSelectionRange(g.createPositionAt(ee,N),K);if(ot)if(!ot.isCollapsed)g.change(_t=>{_t.setSelection(ot),l.execute(ve?"deleteForward":"delete")});else{const _t=g.createSelection(ot.start);if(g.modifySelection(_t,{direction:K}),!_t.focus.isEqual(ot.start))g.change(rn=>{rn.setSelection(ot),l.execute(ve?"deleteForward":"delete")});else{const rn=Zn(w,ot.start.parent);g.deleteContent(g.createSelection(rn,"on"),{doNotAutoparagraph:!0})}}}I.preventDefault(),k.stop()},{context:yt})}_enableInsertContentIntegration(){const l=this.editor,d=this.editor.model,g=d.document.selection;this._listenToIfEnabled(l.model,"insertContent",(w,[k,I])=>{if(I&&!I.is("documentSelection"))return;const N=Nn(g);if(N)return w.stop(),d.change(K=>{const ee=g.getSelectedElement(),me=d.createPositionAt(ee,N),ve=K.createSelection(me),Ve=d.insertContent(k,ve);return K.setSelection(ve),Ve})},{priority:"high"})}_enableInsertObjectIntegration(){const l=this.editor,g=this.editor.model.document.selection;this._listenToIfEnabled(l.model,"insertObject",(w,k)=>{const[,I,N={}]=k;if(I&&!I.is("documentSelection"))return;const K=Nn(g);K&&(N.findOptimalPosition=K,k[3]=N)},{priority:"high"})}_enableDeleteContentIntegration(){const l=this.editor,g=this.editor.model.document.selection;this._listenToIfEnabled(l.model,"deleteContent",(w,[k])=>{if(k&&!k.is("documentSelection"))return;Nn(g)&&w.stop()},{priority:"high"})}}function Kr(A,l,d){const g=A.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(w){const k=this.toDomElement(w);return pr(k,l),so(k),k});A.insert(A.createPositionAt(d,"end"),g)}function pr(A,l){for(const d of Pn){const g=new ut.YS({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${d}`],title:l[d],"aria-hidden":"true"},children:[A.ownerDocument.importNode(Tt,!0)]});A.appendChild(g.render())}}function so(A){const l=new ut.YS({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});A.appendChild(l.render())}function Zn(A,l){let d=l;for(const g of l.getAncestors({parentFirst:!0})){if(g.childCount>1||A.isLimit(g))break;d=g}return d}function Vr(A){const l=A.model;return(d,g)=>{const w=g.keyCode==C.Do.arrowup,k=g.keyCode==C.Do.arrowdown,I=g.shiftKey,N=l.document.selection;if(!w&&!k)return;const K=k;if(I&&rr(N,K))return;const ee=$r(A,N,K);if(ee){if(ee.isCollapsed){if(N.isCollapsed)return;if(I)return}(ee.isCollapsed||Gt(A,ee,K))&&(l.change(me=>{const ve=K?ee.end:ee.start;if(I){const Ve=l.createSelection(N.anchor);Ve.setFocus(ve),me.setSelection(Ve)}else me.setSelection(ve)}),d.stop(),g.preventDefault(),g.stopPropagation())}}}function $r(A,l,d){const g=A.model;if(d){const w=l.isCollapsed?l.focus:l.getLastPosition(),k=Un(g,w,"forward");if(!k)return null;const I=g.createRange(w,k),N=bt(g.schema,I,"backward");return N?g.createRange(w,N):null}else{const w=l.isCollapsed?l.focus:l.getFirstPosition(),k=Un(g,w,"backward");if(!k)return null;const I=g.createRange(k,w),N=bt(g.schema,I,"forward");return N?g.createRange(N,w):null}}function Un(A,l,d){const g=A.schema,w=A.createRangeIn(l.root),k=d=="forward"?"elementStart":"elementEnd";for(const{previousPosition:I,item:N,type:K}of w.getWalker({startPosition:l,direction:d})){if(g.isLimit(N)&&!g.isInline(N))return I;if(K==k&&g.isBlock(N))return null}return null}function bt(A,l,d){const g=d=="backward"?l.end:l.start;if(A.checkChild(g,"$text"))return g;for(const{nextPosition:w}of l.getWalker({direction:d}))if(A.checkChild(w,"$text"))return w;return null}function Gt(A,l,d){const g=A.model,w=A.view.domConverter;if(d){const ee=g.createSelection(l.start);g.modifySelection(ee),!ee.focus.isAtEnd&&!l.start.isEqual(ee.focus)&&(l=g.createRange(ee.focus,l.end))}const k=A.mapper.toViewRange(l),I=w.viewRangeToDom(k),N=C.UL.getDomRangeRects(I);let K;for(const ee of N){if(K===void 0){K=Math.round(ee.bottom);continue}if(Math.round(ee.top)>=K)return!1;K=Math.max(K,Math.round(ee.bottom))}return!0}function rr(A,l){return!A.isCollapsed&&A.isBackward==l}var le=u(12679),st={};st.styleTagTransform=Fn(),st.setAttributes=Nt(),st.insert=gr().bind(null,"head"),st.domAPI=Dr(),st.insertStyleElement=Ln();var xt=Et()(le.Z,st),bn=le.Z&&le.Z.locals?le.Z.locals:void 0;class Cn extends V.Sy{constructor(){super(...arguments),this._previouslySelected=new Set}static get pluginName(){return"Widget"}static get requires(){return[jn,Re]}init(){const l=this.editor,d=l.editing.view,g=d.document;this.editor.editing.downcastDispatcher.on("selection",(w,k,I)=>{const N=I.writer,K=k.selection;if(K.isCollapsed)return;const ee=K.getSelectedElement();if(!ee)return;const me=l.editing.mapper.toViewElement(ee);yt(me)&&I.consumable.consume(K,"selection")&&N.setSelection(N.createRangeOn(me),{fake:!0,label:Kt(me)})}),this.editor.editing.downcastDispatcher.on("selection",(w,k,I)=>{this._clearPreviouslySelectedWidgets(I.writer);const N=I.writer,K=N.document.selection;let ee=null;for(const me of K.getRanges())for(const ve of me){const Ve=ve.item;yt(Ve)&&!Mt(Ve,ee)&&(N.addClass(_n,Ve),this._previouslySelected.add(Ve),ee=Ve)}},{priority:"low"}),d.addObserver(L.dM),this.listenTo(g,"mousedown",(...w)=>this._onMousedown(...w)),this.listenTo(g,"arrowKey",(...w)=>{this._handleSelectionChangeOnArrowKeyPress(...w)},{context:[yt,"$text"]}),this.listenTo(g,"arrowKey",(...w)=>{this._preventDefaultOnArrowKeyPress(...w)},{context:"$root"}),this.listenTo(g,"arrowKey",Vr(this.editor.editing),{context:"$text"}),this.listenTo(g,"delete",(w,k)=>{this._handleDelete(k.direction=="forward")&&(k.preventDefault(),w.stop())},{context:"$root"})}_onMousedown(l,d){const g=this.editor,w=g.editing.view,k=w.document;let I=d.target;if(un(I)){if((C.OB.isSafari||C.OB.isGecko)&&d.domEvent.detail>=3){const K=g.editing.mapper,ee=I.is("attributeElement")?I.findAncestor(ve=>!ve.is("attributeElement")):I,me=K.toModelElement(ee);d.preventDefault(),this.editor.model.change(ve=>{ve.setSelection(me,"in")})}return}if(!yt(I)&&(I=I.findAncestor(yt),!I))return;C.OB.isAndroid&&d.preventDefault(),k.isFocused||w.focus();const N=g.editing.mapper.toModelElement(I);this._setSelectionOverElement(N)}_handleSelectionChangeOnArrowKeyPress(l,d){const g=d.keyCode,w=this.editor.model,k=w.schema,I=w.document.selection,N=I.getSelectedElement(),K=(0,C.mA)(g,this.editor.locale.contentLanguageDirection),ee=K=="down"||K=="right",me=K=="up"||K=="down";if(N&&k.isObject(N)){const Ve=ee?I.getLastPosition():I.getFirstPosition(),ot=k.getNearestSelectionRange(Ve,ee?"forward":"backward");ot&&(w.change(_t=>{_t.setSelection(ot)}),d.preventDefault(),l.stop());return}if(!I.isCollapsed&&!d.shiftKey){const Ve=I.getFirstPosition(),ot=I.getLastPosition(),_t=Ve.nodeAfter,rn=ot.nodeBefore;(_t&&k.isObject(_t)||rn&&k.isObject(rn))&&(w.change(An=>{An.setSelection(ee?ot:Ve)}),d.preventDefault(),l.stop());return}if(!I.isCollapsed)return;const ve=this._getObjectElementNextToSelection(ee);if(ve&&k.isObject(ve)){if(k.isInline(ve)&&me)return;this._setSelectionOverElement(ve),d.preventDefault(),l.stop()}}_preventDefaultOnArrowKeyPress(l,d){const g=this.editor.model,w=g.schema,k=g.document.selection.getSelectedElement();k&&w.isObject(k)&&(d.preventDefault(),l.stop())}_handleDelete(l){const g=this.editor.model.document.selection;if(!this.editor.model.canEditAt(g)||!g.isCollapsed)return;const w=this._getObjectElementNextToSelection(l);if(w)return this.editor.model.change(k=>{let I=g.anchor.parent;for(;I.isEmpty;){const N=I;I=N.parent,k.remove(N)}this._setSelectionOverElement(w)}),!0}_setSelectionOverElement(l){this.editor.model.change(d=>{d.setSelection(d.createRangeOn(l))})}_getObjectElementNextToSelection(l){const d=this.editor.model,g=d.schema,w=d.document.selection,k=d.createSelection(w);if(d.modifySelection(k,{direction:l?"forward":"backward"}),k.isEqual(w))return null;const I=l?k.focus.nodeBefore:k.focus.nodeAfter;return I&&g.isObject(I)?I:null}_clearPreviouslySelectedWidgets(l){for(const d of this._previouslySelected)l.removeClass(_n,d);this._previouslySelected.clear()}}function un(A){let l=A;for(;l;){if(l.is("editableElement")&&!l.is("rootElement"))return!0;if(yt(l))return!1;l=l.parent}return!1}function Mt(A,l){return l?Array.from(A.getAncestors()).includes(l):!1}class Hn extends null{constructor(){super(...arguments),this._toolbarDefinitions=new Map}static get requires(){return[ContextualBalloon]}static get pluginName(){return"WidgetToolbarRepository"}init(){const l=this.editor;if(l.plugins.has("BalloonToolbar")){const d=l.plugins.get("BalloonToolbar");this.listenTo(d,"show",g=>{wn(l.editing.view.document.selection)&&g.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(l.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(l.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const l of this._toolbarDefinitions.values())l.view.destroy()}register(l,{ariaLabel:d,items:g,getRelatedElement:w,balloonClassName:k="ck-toolbar-container"}){if(!g.length){logWarning("widget-toolbar-no-items",{toolbarId:l});return}const I=this.editor,N=I.t,K=new ToolbarView(I.locale);if(K.ariaLabel=d||N("Widget toolbar"),this._toolbarDefinitions.has(l))throw new CKEditorError("widget-toolbar-duplicated",this,{toolbarId:l});const ee={view:K,getRelatedElement:w,balloonClassName:k,itemsConfig:g,initialized:!1};I.ui.addToolbar(K,{isContextual:!0,beforeFocus:()=>{const me=w(I.editing.view.document.selection);me&&this._showToolbar(ee,me)},afterBlur:()=>{this._hideToolbar(ee)}}),this._toolbarDefinitions.set(l,ee)}_updateToolbarsVisibility(){let l=0,d=null,g=null;for(const w of this._toolbarDefinitions.values()){const k=w.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!k)this._isToolbarInBalloon(w)&&this._hideToolbar(w);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(w)&&this._hideToolbar(w);else{const I=k.getAncestors().length;I>l&&(l=I,d=k,g=w)}}g&&this._showToolbar(g,d)}_hideToolbar(l){this._balloon.remove(l.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(l,d){this._isToolbarVisible(l)?Kn(this.editor,d):this._isToolbarInBalloon(l)||(l.initialized||(l.initialized=!0,l.view.fillFromConfig(l.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:l.view,position:$n(this.editor,d),balloonClassName:l.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const g of this._toolbarDefinitions.values())if(this._isToolbarVisible(g)){const w=g.getRelatedElement(this.editor.editing.view.document.selection);Kn(this.editor,w)}}))}_isToolbarVisible(l){return this._balloon.visibleView===l.view}_isToolbarInBalloon(l){return this._balloon.hasView(l.view)}}function Kn(A,l){const d=A.plugins.get("ContextualBalloon"),g=$n(A,l);d.updatePosition(g)}function $n(A,l){const d=A.editing.view,g=BalloonPanelView.defaultPositions;return{target:d.domConverter.mapViewToDom(l),positions:[g.northArrowSouth,g.northArrowSouthWest,g.northArrowSouthEast,g.southArrowNorth,g.southArrowNorthWest,g.southArrowNorthEast,g.viewportStickyNorth]}}function wn(A){const l=A.getSelectedElement();return!!(l&&isWidget(l))}class Dn extends(0,C.Re)(){constructor(l){super(),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=l,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(l,d,g){const w=new C.UL(d);this.activeHandlePosition=co(l),this._referenceCoordinates=mr(d,nn(this.activeHandlePosition)),this._originalWidth=w.width,this._originalHeight=w.height,this._aspectRatio=w.width/w.height;const k=g.style.width;k&&k.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(k):this._originalWidthPercents=or(g,w)}update(l){this.proposedWidth=l.width,this.proposedHeight=l.height,this.proposedWidthPercents=l.widthPercents,this.proposedHandleHostWidth=l.handleHostWidth,this.proposedHandleHostHeight=l.handleHostHeight}}function or(A,l){const d=A.parentElement;let g=parseFloat(d.ownerDocument.defaultView.getComputedStyle(d).width);const w=5;let k=0,I=d;for(;isNaN(g);){if(I=I.parentElement,++k>w)return 0;g=parseFloat(d.ownerDocument.defaultView.getComputedStyle(I).width)}return l.width/g*100}function mr(A,l){const d=new C.UL(A),g=l.split("-"),w={x:g[1]=="right"?d.right:d.left,y:g[0]=="bottom"?d.bottom:d.top};return w.x+=A.ownerDocument.defaultView.scrollX,w.y+=A.ownerDocument.defaultView.scrollY,w}function ao(A){return`ck-widget__resizer__handle-${A}`}function co(A){const l=["top-left","top-right","bottom-right","bottom-left"];for(const d of l)if(A.classList.contains(ao(d)))return d}function nn(A){const l=A.split("-"),d={top:"bottom",bottom:"top",left:"right",right:"left"};return`${d[l[0]]}-${d[l[1]]}`}class Jt extends ut.G7{constructor(){super();const l=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",l.to("_viewPosition",d=>d?`ck-orientation-${d}`:"")],style:{display:l.if("_isVisible","none",d=>!d)}},children:[{text:l.to("_label")}]})}_bindToState(l,d){this.bind("_isVisible").to(d,"proposedWidth",d,"proposedHeight",(g,w)=>g!==null&&w!==null),this.bind("_label").to(d,"proposedHandleHostWidth",d,"proposedHandleHostHeight",d,"proposedWidthPercents",(g,w,k)=>l.unit==="px"?`${g}\xD7${w}`:`${k}%`),this.bind("_viewPosition").to(d,"activeHandlePosition",d,"proposedHandleHostWidth",d,"proposedHandleHostHeight",(g,w,k)=>w<50||k<50?"above-center":g)}_dismiss(){this.unbind(),this._isVisible=!1}}class Wt extends(0,C.Re)(){constructor(l){super(),this._viewResizerWrapper=null,this._options=l,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(d,g)=>d&&g),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",d=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),d.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(d=>{d.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(d=>{d.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const l=this,d=this._options.viewElement;this._options.editor.editing.view.change(w=>{const k=w.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(I){const N=this.toDomElement(I);return l._appendHandles(N),l._appendSizeUI(N),N});w.insert(w.createPositionAt(d,"end"),k),w.addClass("ck-widget_with-resizer",d),this._viewResizerWrapper=k,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(l){this._state=new Dn(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(l,this._getHandleHost(),this._getResizeHost())}updateSize(l){const d=this._proposeNewSize(l);this._options.editor.editing.view.change(ee=>{const me=this._options.unit||"%",ve=(me==="%"?d.widthPercents:d.width)+me;ee.setStyle("width",ve,this._options.viewElement)});const w=this._getHandleHost(),k=new C.UL(w),I=Math.round(k.width),N=Math.round(k.height),K=new C.UL(w);d.width=Math.round(K.width),d.height=Math.round(K.height),this.redraw(k),this.state.update(Hr(Ge({},d),{handleHostWidth:I,handleHostHeight:N}))}commit(){const l=this._options.unit||"%",d=(l==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+l;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(d)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(l){const d=this._domResizerWrapper;if(!Lr(d))return;const g=d.parentElement,w=this._getHandleHost(),k=this._viewResizerWrapper,I=[k.getStyle("width"),k.getStyle("height"),k.getStyle("left"),k.getStyle("top")];let N;if(g.isSameNode(w)){const K=l||new C.UL(w);N=[K.width+"px",K.height+"px",void 0,void 0]}else N=[w.offsetWidth+"px",w.offsetHeight+"px",w.offsetLeft+"px",w.offsetTop+"px"];(0,C.Rt)(I,N)!=="same"&&this._options.editor.editing.view.change(K=>{K.setStyle({width:N[0],height:N[1],left:N[2],top:N[3]},k)})}containsHandle(l){return this._domResizerWrapper.contains(l)}static isResizeHandle(l){return l.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(d=>{d.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(l){const d=this.state,g=Nr(l),w=this._options.isCentered?this._options.isCentered(this):!0,k={x:d._referenceCoordinates.x-(g.x+d.originalWidth),y:g.y-d.originalHeight-d._referenceCoordinates.y};w&&d.activeHandlePosition.endsWith("-right")&&(k.x=g.x-(d._referenceCoordinates.x+d.originalWidth)),w&&(k.x*=2);let I=Math.abs(d.originalWidth+k.x),N=Math.abs(d.originalHeight+k.y);return(I/d.aspectRatio>N?"width":"height")=="width"?N=I/d.aspectRatio:I=N*d.aspectRatio,{width:Math.round(I),height:Math.round(N),widthPercents:Math.min(Math.round(d.originalWidthPercents/d.originalWidth*I*100)/100,100)}}_getResizeHost(){const l=this._domResizerWrapper.parentElement;return this._options.getResizeHost(l)}_getHandleHost(){const l=this._domResizerWrapper.parentElement;return this._options.getHandleHost(l)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(l){const d=["top-left","top-right","bottom-right","bottom-left"];for(const g of d)l.appendChild(new ut.YS({tag:"div",attributes:{class:`ck-widget__resizer__handle ${No(g)}`}}).render())}_appendSizeUI(l){this._sizeView=new Jt,this._sizeView.render(),l.appendChild(this._sizeView.element)}}function No(A){return`ck-widget__resizer__handle-${A}`}function Nr(A){return{x:A.pageX,y:A.pageY}}function Lr(A){return A&&A.ownerDocument&&A.ownerDocument.contains(A)}var In=u(79733),Ot={};Ot.styleTagTransform=Fn(),Ot.setAttributes=Nt(),Ot.insert=gr().bind(null,"head"),Ot.domAPI=Dr(),Ot.insertStyleElement=Ln();var Lo=Et()(In.Z,Ot),yo=In.Z&&In.Z.locals?In.Z.locals:void 0;class Gr extends null{constructor(){super(...arguments),this._resizers=new Map}static get pluginName(){return"WidgetResize"}init(){const l=this.editor.editing,d=global.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),l.view.addObserver(MouseObserver),this._observer=new(DomEmitterMixin()),this.listenTo(l.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(d,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(d,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=throttle(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[w,k]of this._resizers)w.isAttached()||(this._resizers.delete(w),k.destroy())},{priority:"lowest"}),this._observer.listenTo(global.window,"resize",this._redrawSelectedResizerThrottled);const g=this.editor.editing.view.document.selection;g.on("change",()=>{const w=g.getSelectedElement(),k=this.getResizerByViewElement(w)||null;k?this.select(k):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const l of this._resizers.values())l.destroy();this._redrawSelectedResizerThrottled.cancel()}select(l){this.deselect(),this.selectedResizer=l,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(l){const d=new Resizer(l),g=this.editor.plugins;if(d.attach(),g.has("WidgetToolbarRepository")){const I=g.get("WidgetToolbarRepository");d.on("begin",()=>{I.forceDisabled("resize")},{priority:"lowest"}),d.on("cancel",()=>{I.clearForceDisabled("resize")},{priority:"highest"}),d.on("commit",()=>{I.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(l.viewElement,d);const k=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(k)==d&&this.select(d),d}getResizerByViewElement(l){return this._resizers.get(l)}_getResizerByHandle(l){for(const d of this._resizers.values())if(d.containsHandle(l))return d}_mouseDownListener(l,d){const g=d.domTarget;Resizer.isResizeHandle(g)&&(this._activeResizer=this._getResizerByHandle(g)||null,this._activeResizer&&(this._activeResizer.begin(g),l.stop(),d.preventDefault()))}_mouseMoveListener(l,d){this._activeResizer&&this._activeResizer.updateSize(d)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}var kn=u(20057),Jr=u(20547),Bn={};Bn.styleTagTransform=Fn(),Bn.setAttributes=Nt(),Bn.insert=gr().bind(null,"head"),Bn.domAPI=Dr(),Bn.insertStyleElement=Ln();var Eo=Et()(Jr.Z,Bn),fo=Jr.Z&&Jr.Z.locals?Jr.Z.locals:void 0;class Gn extends V.Sy{static get pluginName(){return"DragDrop"}static get requires(){return[z,Cn]}init(){const l=this.editor,d=l.editing.view;if(this._draggedRange=null,this._draggingUid="",this._draggableElement=null,this._updateDropMarkerThrottled=(0,kn.Z)(g=>this._updateDropMarker(g),40),this._removeDropMarkerDelayed=(0,C.gw)(()=>this._removeDropMarker(),40),this._clearDraggableAttributesDelayed=(0,C.gw)(()=>this._clearDraggableAttributes(),40),l.plugins.has("DragDropExperimental")){this.forceDisabled("DragDropExperimental");return}d.addObserver(m),d.addObserver(L.dM),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDropMarker(),this._setupDraggableAttributeHandling(),this.listenTo(l,"change:isReadOnly",(g,w,k)=>{k?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(g,w,k)=>{k||this._finalizeDragging(!1)}),C.OB.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._updateDropMarkerThrottled.cancel(),this._removeDropMarkerDelayed.cancel(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const l=this.editor,d=l.model,g=d.document,w=l.editing.view,k=w.document;this.listenTo(k,"dragstart",(I,N)=>{const K=g.selection;if(N.target&&N.target.is("editableElement")){N.preventDefault();return}const ee=N.target?Yr(N.target):null;if(ee){const ot=l.editing.mapper.toModelElement(ee);this._draggedRange=L.iE.fromRange(d.createRangeOn(ot)),l.plugins.has("WidgetToolbarRepository")&&l.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop")}else if(!k.selection.isCollapsed){const ot=k.selection.getSelectedElement();(!ot||!yt(ot))&&(this._draggedRange=L.iE.fromRange(K.getFirstRange()))}if(!this._draggedRange){N.preventDefault();return}this._draggingUid=(0,C.hQ)();const me=this.isEnabled&&l.model.canEditAt(this._draggedRange);N.dataTransfer.effectAllowed=me?"copyMove":"copy",N.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const ve=d.createSelection(this._draggedRange.toRange()),Ve=l.data.toView(d.getSelectedContent(ve));k.fire("clipboardOutput",{dataTransfer:N.dataTransfer,content:Ve,method:"dragstart"}),me||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(k,"dragend",(I,N)=>{this._finalizeDragging(!N.dataTransfer.isCanceled&&N.dataTransfer.dropEffect=="move")},{priority:"low"}),this.listenTo(k,"dragenter",()=>{this.isEnabled&&w.focus()}),this.listenTo(k,"dragleave",()=>{this._removeDropMarkerDelayed()}),this.listenTo(k,"dragging",(I,N)=>{if(!this.isEnabled){N.dataTransfer.dropEffect="none";return}this._removeDropMarkerDelayed.cancel();const K=we(l,N.targetRanges,N.target);if(!l.model.canEditAt(K)){N.dataTransfer.dropEffect="none";return}this._draggedRange||(N.dataTransfer.dropEffect="copy"),C.OB.isGecko||(N.dataTransfer.effectAllowed=="copy"?N.dataTransfer.dropEffect="copy":["all","copyMove"].includes(N.dataTransfer.effectAllowed)&&(N.dataTransfer.dropEffect="move"));K&&this._updateDropMarkerThrottled(K)},{priority:"low"})}_setupClipboardInputIntegration(){const l=this.editor,g=l.editing.view.document;this.listenTo(g,"clipboardInput",(w,k)=>{if(k.method!="drop")return;const I=we(l,k.targetRanges,k.target);this._removeDropMarker();if(!I||!l.model.canEditAt(I)){this._finalizeDragging(!1),w.stop();return}if(this._draggedRange&&this._draggingUid!=k.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),Fr(k.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(I,!0)){this._finalizeDragging(!1),w.stop();return}k.targetRanges=[l.editing.mapper.toViewRange(I)]},{priority:"high"})}_setupContentInsertionIntegration(){const l=this.editor.plugins.get(z);l.on("contentInsertion",(d,g)=>{if(!this.isEnabled||g.method!=="drop")return;const w=g.targetRanges.map(k=>this.editor.editing.mapper.toModelRange(k));this.editor.model.change(k=>k.setSelection(w))},{priority:"high"}),l.on("contentInsertion",(d,g)=>{if(!this.isEnabled||g.method!=="drop")return;const w=Fr(g.dataTransfer)=="move",k=!g.resultRange||!g.resultRange.isCollapsed;this._finalizeDragging(k&&w)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const l=this.editor,d=l.editing.view,g=d.document;this.listenTo(g,"mousedown",(w,k)=>{if(C.OB.isAndroid||!k)return;this._clearDraggableAttributesDelayed.cancel();let I=Yr(k.target);if(C.OB.isBlink&&!I&&!g.selection.isCollapsed){const N=g.selection.getSelectedElement();if(!N||!yt(N)){const K=g.selection.editableElement;K&&!K.isReadOnly&&(I=K)}}I&&(d.change(N=>{N.setAttribute("draggable","true",I)}),this._draggableElement=l.editing.mapper.toModelElement(I))}),this.listenTo(g,"mouseup",()=>{C.OB.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const l=this.editor.editing;l.view.change(d=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&d.removeAttribute("draggable",l.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_setupDropMarker(){const l=this.editor;l.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),l.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(d,{writer:g})=>{if(l.model.schema.checkChild(d.markerRange.start,"$text"))return g.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(k){const I=this.toDomElement(k);return I.append("\u2060",k.createElement("span"),"\u2060"),I})}})}_updateDropMarker(l){const d=this.editor,g=d.model.markers;d.model.change(w=>{g.has("drop-target")?g.get("drop-target").getRange().isEqual(l)||w.updateMarker("drop-target",{range:l}):w.addMarker("drop-target",{range:l,usingOperation:!1,affectsData:!1})})}_removeDropMarker(){const l=this.editor.model;this._removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),l.markers.has("drop-target")&&l.change(d=>{d.removeMarker("drop-target")})}_finalizeDragging(l){const d=this.editor,g=d.model;this._removeDropMarker(),this._clearDraggableAttributes(),d.plugins.has("WidgetToolbarRepository")&&d.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._draggedRange&&(l&&this.isEnabled&&g.deleteContent(g.createSelection(this._draggedRange),{doNotAutoparagraph:!0}),this._draggedRange.detach(),this._draggedRange=null)}}function we(A,l,d){const g=A.model,w=A.editing.mapper;let k=null;const I=l?l[0].start:null;if(d.is("uiElement")&&(d=d.parent),k=$e(A,d),k)return k;const N=br(A,d),K=I?w.toModelPosition(I):null;return K?(k=xn(A,K,N),k||(k=g.schema.getNearestSelectionRange(K,C.OB.isGecko?"forward":"backward"),k)?k:Xr(A,K.parent)):ir(A,N)}function $e(A,l){const d=A.model,g=A.editing.mapper;if(yt(l))return d.createRangeOn(g.toModelElement(l));if(!l.is("editableElement")){const w=l.findAncestor(k=>yt(k)||k.is("editableElement"));if(yt(w))return d.createRangeOn(g.toModelElement(w))}return null}function ir(A,l){const d=A.model,g=d.schema,w=d.createPositionAt(l,0);return g.getNearestSelectionRange(w,"forward")}function xn(A,l,d){const g=A.model;if(!g.schema.checkChild(d,"$block"))return null;const w=g.createPositionAt(d,0),k=l.path.slice(0,w.path.length),N=g.createPositionFromPath(l.root,k).nodeAfter;return N&&g.schema.isObject(N)?g.createRangeOn(N):null}function Xr(A,l){const d=A.model;let g=l;for(;g;){if(d.schema.isObject(g))return d.createRangeOn(g);g=g.parent}return null}function br(A,l){const d=A.editing.mapper,g=A.editing.view,w=d.toModelElement(l);if(w)return w;const k=g.createPositionBefore(l),I=d.findMappedViewAncestor(k);return d.toModelElement(I)}function Fr(A){return C.OB.isGecko?A.dropEffect:["all","copyMove"].includes(A.effectAllowed)?"move":"copy"}function Yr(A){if(A.is("editableElement"))return null;if(A.hasClass("ck-widget__selection-handle"))return A.findAncestor(yt);if(yt(A))return A;const l=A.findAncestor(d=>yt(d)||d.is("editableElement"));return yt(l)?l:null}class wr extends V.Sy{static get pluginName(){return"PastePlainText"}static get requires(){return[z]}init(){const l=this.editor,d=l.model,g=l.editing.view,w=g.document,k=d.document.selection;let I=!1;g.addObserver(m),this.listenTo(w,"keydown",(N,K)=>{I=K.shiftKey}),l.plugins.get(z).on("contentInsertion",(N,K)=>{!I&&!kr(K.content,d.schema)||d.change(ee=>{const me=Array.from(k.getAttributes()).filter(([Ve])=>d.schema.getAttributeProperties(Ve).isFormatting);k.isCollapsed||d.deleteContent(k,{doNotAutoparagraph:!0}),me.push(...k.getAttributes());const ve=ee.createRangeIn(K.content);for(const Ve of ve.getItems())Ve.is("$textProxy")&&ee.setAttributes(me,Ve)})})}}function kr(A,l){if(A.childCount>1)return!1;const d=A.getChild(0);return l.isObject(d)?!1:Array.from(d.getAttributeKeys()).length==0}class To extends V.Sy{static get pluginName(){return"Clipboard"}static get requires(){return[z,Gn,wr]}}const vr=(0,C.nn)("px");class Po extends null{constructor(){super();const l=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",l.if("isVisible","ck-hidden",d=>!d)],style:{left:l.to("left",d=>vr(d)),top:l.to("top",d=>vr(d)),width:l.to("width",d=>vr(d))}}})}}class sr extends null{constructor(){super(...arguments),this.removeDropMarkerDelayed=delay(()=>this.removeDropMarker(),40),this._updateDropMarkerThrottled=throttle(l=>this._updateDropMarker(l),40),this._reconvertMarkerThrottled=throttle(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0),this._dropTargetLineView=new LineView,this._domEmitter=new(DomEmitterMixin()),this._scrollables=new Map}static get pluginName(){return"DragDropTarget"}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:l}of this._scrollables.values())l.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(l,d,g,w,k){this.removeDropMarkerDelayed.cancel();const I=Dt(this.editor,l,d,g,w,k);I&&this._updateDropMarkerThrottled(I)}getFinalDropRange(l,d,g,w,k){const I=Dt(this.editor,l,d,g,w,k);return this.removeDropMarker(),I}removeDropMarker(){const l=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,l.markers.has("drop-target")&&l.change(d=>{d.removeMarker("drop-target")})}_setupDropMarker(){const l=this.editor;l.ui.view.body.add(this._dropTargetLineView),l.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),l.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(d,{writer:g})=>{if(l.model.schema.checkChild(d.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(g);d.markerRange.isCollapsed?this._updateDropTargetLine(d.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(l){const d=this.editor,g=d.model.markers;d.model.change(w=>{g.has("drop-target")?g.get("drop-target").getRange().isEqual(l)||w.updateMarker("drop-target",{range:l}):w.addMarker("drop-target",{range:l,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(l){return l.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(d){const g=this.toDomElement(d);return g.append("\u2060",d.createElement("span"),"\u2060"),g})}_updateDropTargetLine(l){const d=this.editor.editing,g=l.start.nodeBefore,w=l.start.nodeAfter,k=l.start.parent,I=g?d.mapper.toViewElement(g):null,N=I?d.view.domConverter.mapViewToDom(I):null,K=w?d.mapper.toViewElement(w):null,ee=K?d.view.domConverter.mapViewToDom(K):null,me=d.mapper.toViewElement(k),ve=d.view.domConverter.mapViewToDom(me),Ve=this._getScrollableRect(me),{scrollX:ot,scrollY:_t}=global.window,rn=N?new Rect(N):null,An=ee?new Rect(ee):null,Xn=new Rect(ve).excludeScrollbarsAndBorders(),Er=rn?rn.bottom:Xn.top,cr=An?An.top:Xn.bottom,Yn=global.window.getComputedStyle(ve),Tr=Er<=cr?(Er+cr)/2:cr;if(Ve.top<Tr&&Tr<Ve.bottom){const Fo=Xn.left+parseFloat(Yn.paddingLeft),Ao=Xn.right-parseFloat(Yn.paddingRight),So=Math.max(Fo+ot,Ve.left),Qr=Math.min(Ao+ot,Ve.right);this._dropTargetLineView.set({isVisible:!0,left:So,top:Tr+_t,width:Qr-So})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(l){const d=l.root.rootName;let g;if(this._scrollables.has(d))g=this._scrollables.get(d).domElement;else{const w=this.editor.editing.view.domConverter.mapViewToDom(l);g=Co(w),this._domEmitter.listenTo(g,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const k=new ResizeObserver(g,this._reconvertMarkerThrottled);this._scrollables.set(d,{domElement:g,resizeObserver:k})}return new Rect(g).excludeScrollbarsAndBorders()}}function Dt(A,l,d,g,w,k){const I=A.model,N=A.editing.mapper,K=yr(A,l);let ee=K;for(;ee;){if(!k){if(I.schema.checkChild(ee,"$text")){const me=d?d[0].start:null,ve=me?N.toModelPosition(me):null;if(ve){if(I.schema.checkChild(ve,"$text"))return I.createRange(ve);if(me)return zr(A,yr(A,me.parent),g,w)}}else if(I.schema.isInline(ee))return zr(A,ee,g,w)}if(I.schema.isBlock(ee))return zr(A,ee,g,w);if(I.schema.checkChild(ee,"$block")){const me=Array.from(ee.getChildren()).filter(ot=>ot.is("element")&&!Jn(A,ot));let ve=0,Ve=me.length;for(;ve<Ve-1;){const ot=Math.floor((ve+Ve)/2);ar(A,me[ot],g,w)=="before"?Ve=ot:ve=ot}return zr(A,me[ve],g,w)}ee=ee.parent}return console.warn("none:",K.name),null}function Jn(A,l){const d=A.editing.mapper,g=A.editing.view.domConverter,w=d.toViewElement(l),k=g.mapViewToDom(w);return global.window.getComputedStyle(k).float!="none"}function zr(A,l,d,g){const w=A.model;return w.createRange(w.createPositionAt(l,ar(A,l,d,g)))}function ar(A,l,d,g){const w=A.editing.mapper,k=A.editing.view.domConverter,I=w.toViewElement(l),N=k.mapViewToDom(I),K=new Rect(N);return A.model.schema.isInline(l)?d<(K.left+K.right)/2?"before":"after":g<(K.top+K.bottom)/2?"before":"after"}function yr(A,l){const d=A.editing.mapper,g=A.editing.view,w=d.toModelElement(l);if(w)return w;const k=g.createPositionBefore(l),I=d.findMappedViewAncestor(k);return d.toModelElement(I)}function Co(A){let l=A;do{l=l.parentElement;const d=global.window.getComputedStyle(l).overflowY;if(d=="auto"||d=="scroll")break}while(l.tagName!="BODY");return l}class go extends null{constructor(){super(...arguments),this._clearDraggableAttributesDelayed=delay(()=>this._clearDraggableAttributes(),40),this._blockMode=!1,this._domEmitter=new(DomEmitterMixin())}static get pluginName(){return"DragDropExperimental"}static get requires(){return[ClipboardPipeline,Widget,DragDropTarget]}init(){const l=this.editor,d=l.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,d.addObserver(ClipboardObserver),d.addObserver(MouseObserver),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(l,"change:isReadOnly",(g,w,k)=>{k?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(g,w,k)=>{k||this._finalizeDragging(!1)}),env.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const l=this.editor,d=l.model,g=l.editing.view,w=g.document,k=l.plugins.get(DragDropTarget);this.listenTo(w,"dragstart",(I,N)=>{if(N.target&&N.target.is("editableElement")){N.preventDefault();return}if(this._prepareDraggedRange(N.target),!this._draggedRange){N.preventDefault();return}this._draggingUid=uid(),N.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",N.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const K=d.createSelection(this._draggedRange.toRange()),ee=l.data.toView(d.getSelectedContent(K));w.fire("clipboardOutput",{dataTransfer:N.dataTransfer,content:ee,method:"dragstart"}),this._updatePreview(N.dataTransfer),N.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(w,"dragend",(I,N)=>{this._finalizeDragging(!N.dataTransfer.isCanceled&&N.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(global.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(w,"dragenter",()=>{this.isEnabled&&g.focus()}),this.listenTo(w,"dragleave",()=>{k.removeDropMarkerDelayed()}),this.listenTo(w,"dragging",(I,N)=>{if(!this.isEnabled){N.dataTransfer.dropEffect="none";return}const{clientX:K,clientY:ee}=N.domEvent;k.updateDropMarker(N.target,N.targetRanges,K,ee,this._blockMode),this._draggedRange||(N.dataTransfer.dropEffect="copy"),env.isGecko||(N.dataTransfer.effectAllowed=="copy"?N.dataTransfer.dropEffect="copy":["all","copyMove"].includes(N.dataTransfer.effectAllowed)&&(N.dataTransfer.dropEffect="move")),I.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const l=this.editor,g=l.editing.view.document,w=l.plugins.get(DragDropTarget);this.listenTo(g,"clipboardInput",(k,I)=>{if(I.method!="drop")return;const{clientX:N,clientY:K}=I.domEvent,ee=w.getFinalDropRange(I.target,I.targetRanges,N,K,this._blockMode);if(!ee){this._finalizeDragging(!1),k.stop();return}if(this._draggedRange&&this._draggingUid!=I.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),_o(I.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(ee,!0)){this._finalizeDragging(!1),k.stop();return}I.targetRanges=[l.editing.mapper.toViewRange(ee)]},{priority:"high"})}_setupContentInsertionIntegration(){const l=this.editor.plugins.get(ClipboardPipeline);l.on("contentInsertion",(d,g)=>{if(!this.isEnabled||g.method!=="drop")return;const w=g.targetRanges.map(k=>this.editor.editing.mapper.toModelRange(k));this.editor.model.change(k=>k.setSelection(w))},{priority:"high"}),l.on("contentInsertion",(d,g)=>{if(!this.isEnabled||g.method!=="drop")return;const w=_o(g.dataTransfer)=="move",k=!g.resultRange||!g.resultRange.isCollapsed;this._finalizeDragging(k&&w)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const l=this.editor,d=l.editing.view,g=d.document;this.listenTo(g,"mousedown",(w,k)=>{if(env.isAndroid||!k)return;this._clearDraggableAttributesDelayed.cancel();let I=po(k.target);if(env.isBlink&&!l.isReadOnly&&!I&&!g.selection.isCollapsed){const N=g.selection.getSelectedElement();(!N||!isWidget(N))&&(I=g.selection.editableElement)}I&&(d.change(N=>{N.setAttribute("draggable","true",I)}),this._draggableElement=l.editing.mapper.toModelElement(I))}),this.listenTo(g,"mouseup",()=>{env.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const l=this.editor.editing;l.view.change(d=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&d.removeAttribute("draggable",l.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(l){const d=this.editor,g=d.model;d.plugins.get(DragDropTarget).removeDropMarker(),this._clearDraggableAttributes(),d.plugins.has("WidgetToolbarRepository")&&d.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(l&&this.isEnabled&&g.deleteContent(g.createSelection(this._draggedRange),{doNotAutoparagraph:!0}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(l){const d=this.editor,g=d.model,w=g.document.selection,k=l?po(l):null;if(k){const I=d.editing.mapper.toModelElement(k);this._draggedRange=LiveRange.fromRange(g.createRangeOn(I)),this._blockMode=g.schema.isBlock(I),d.plugins.has("WidgetToolbarRepository")&&d.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop")}else if(!w.isCollapsed||w.getFirstPosition().parent.isEmpty){const I=Array.from(w.getSelectedBlocks());if(I.length>1)this._draggedRange=LiveRange.fromRange(g.createRange(g.createPositionBefore(I[0]),g.createPositionAfter(I[I.length-1]))),g.change(N=>N.setSelection(this._draggedRange.toRange())),this._blockMode=!0;else if(I.length==1){const N=w.getFirstRange(),K=g.createRange(g.createPositionBefore(I[0]),g.createPositionAfter(I[0]));N.start.isTouching(K.start)&&N.end.isTouching(K.end)?(this._draggedRange=LiveRange.fromRange(K),this._blockMode=!0):(this._draggedRange=LiveRange.fromRange(w.getFirstRange()),this._blockMode=!1)}}}_updatePreview(l){const d=this.editor.editing.view,g=d.document.selection.editableElement,w=d.domConverter.mapViewToDom(g),k=global.window.getComputedStyle(w);this._previewContainer?this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=createElement(global.document,"div",{style:"position: fixed; left: -999999px;"}),global.document.body.appendChild(this._previewContainer));const I=createElement(global.document,"div");I.className="ck ck-content",I.style.width=k.width,I.innerHTML=l.getData("text/html"),l.setDragImage(I,0,0),this._previewContainer.appendChild(I)}}function _o(A){return env.isGecko?A.dropEffect:["all","copyMove"].includes(A.effectAllowed)?"move":"copy"}function po(A){if(A.is("editableElement"))return null;if(A.hasClass("ck-widget__selection-handle"))return A.findAncestor(isWidget);if(isWidget(A))return A;const l=A.findAncestor(d=>isWidget(d)||d.is("editableElement"));return isWidget(l)?l:null}class xo extends null{constructor(){super(...arguments),this._isBlockDragging=!1,this._domEmitter=new(DomEmitterMixin())}static get pluginName(){return"DragDropBlockToolbar"}init(){const l=this.editor;if(this.listenTo(l,"change:isReadOnly",(d,g,w)=>{w?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),env.isAndroid&&this.forceDisabled("noAndroidSupport"),l.plugins.has("BlockToolbar")){const g=l.plugins.get("BlockToolbar").buttonView.element;g.setAttribute("draggable","true"),this._domEmitter.listenTo(g,"dragstart",(w,k)=>this._handleBlockDragStart(k)),this._domEmitter.listenTo(global.document,"dragover",(w,k)=>this._handleBlockDragging(k)),this._domEmitter.listenTo(global.document,"drop",(w,k)=>this._handleBlockDragging(k)),this._domEmitter.listenTo(global.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(l){if(!this.isEnabled)return;const d=this.editor.model,g=d.document.selection,w=Array.from(g.getSelectedBlocks()),k=d.createRange(d.createPositionBefore(w[0]),d.createPositionAfter(w[w.length-1]));d.change(I=>I.setSelection(k)),this._isBlockDragging=!0,this.editor.editing.view.getObserver(ClipboardObserver).onDomEvent(l)}_handleBlockDragging(l){if(!this.isEnabled||!this._isBlockDragging)return;const d=l.clientX+100,g=l.clientY,w=document.elementFromPoint(d,g);!w||!w.closest(".ck-editor__editable")||this.editor.editing.view.getObserver(ClipboardObserver).onDomEvent(Hr(Ge({},l),{type:l.type,dataTransfer:l.dataTransfer,target:w,clientX:d,clientY:g,preventDefault:()=>l.preventDefault(),stopPropagation:()=>l.stopPropagation()}))}_handleBlockDragEnd(){this._isBlockDragging=!1}}class b extends V.mY{constructor(l){super(l),this.affectsData=!1}execute(){const l=this.editor.model,d=l.document.selection;let g=l.schema.getLimitElement(d);if(d.containsEntireContent(g)||!h(l.schema,g))do if(g=g.parent,!g)return;while(!h(l.schema,g));l.change(w=>{w.setSelection(g,"in")})}}function h(A,l){return A.isLimit(l)&&(A.checkChild(l,"$text")||A.checkChild(l,"paragraph"))}const y=(0,C.Zz)("Ctrl+A");class R extends V.Sy{static get pluginName(){return"SelectAllEditing"}init(){const l=this.editor,g=l.editing.view.document;l.commands.add("selectAll",new b(l)),this.listenTo(g,"keydown",(w,k)=>{(0,C.Cq)(k)===y&&(l.execute("selectAll"),k.preventDefault())})}}var F='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';class Y extends V.Sy{static get pluginName(){return"SelectAllUI"}init(){const l=this.editor;l.ui.componentFactory.add("selectAll",d=>{const g=l.commands.get("selectAll"),w=new ut.r5(d),k=d.t;return w.set({label:k("Select all"),icon:F,keystroke:"Ctrl+A",tooltip:!0}),w.bind("isEnabled").to(g,"isEnabled"),this.listenTo(w,"execute",()=>{l.execute("selectAll"),l.editing.view.focus()}),w})}}class re extends V.Sy{static get requires(){return[R,Y]}static get pluginName(){return"SelectAll"}}class ue extends V.mY{constructor(l){super(l),this._stack=[],this._createdBatches=new WeakSet,this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(l.data,"set",(d,g)=>{g[1]=Ge({},g[1]);const w=g[1];w.batchType||(w.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(l.data,"set",(d,g)=>{g[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(l){const d=this.editor.model.document.selection,g={ranges:d.hasOwnRange?Array.from(d.getRanges()):[],isBackward:d.isBackward};this._stack.push({batch:l,selection:g}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(l,d,g){const w=this.editor.model,k=w.document,I=[],N=l.map(ee=>ee.getTransformedByOperations(g)),K=N.flat();for(const ee of N){const me=ee.filter(ve=>ve.root!=k.graveyard).filter(ve=>!Ce(ve,K));me.length&&(ye(me),I.push(me[0]))}I.length&&w.change(ee=>{ee.setSelection(I,{backward:d})})}_undo(l,d){const g=this.editor.model,w=g.document;this._createdBatches.add(d);const k=l.operations.slice().filter(I=>I.isDocumentOperation);k.reverse();for(const I of k){const N=I.baseVersion+1,K=Array.from(w.history.getOperations(N)),me=(0,L.Rf)([I.getReversed()],K,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let ve of me){const Ve=ve.affectedSelectable;Ve&&!g.canEditAt(Ve)&&(ve=new L.Pk(ve.baseVersion)),d.addOperation(ve),g.applyOperation(ve),w.history.setOperationAsUndone(I,ve)}}}}function ye(A){A.sort((l,d)=>l.start.isBefore(d.start)?-1:1);for(let l=1;l<A.length;l++){const g=A[l-1].getJoined(A[l],!0);g&&(l--,A.splice(l,2,g))}}function Ce(A,l){return l.some(d=>d!==A&&d.containsRange(A,!0))}class Je extends ue{execute(l=null){const d=l?this._stack.findIndex(k=>k.batch==l):this._stack.length-1,g=this._stack.splice(d,1)[0],w=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(w,()=>{this._undo(g.batch,w);const k=this.editor.model.document.history.getOperations(g.batch.baseVersion);this._restoreSelection(g.selection.ranges,g.selection.isBackward,k)}),this.fire("revert",g.batch,w),this.refresh()}}class qe extends ue{execute(){const l=this._stack.pop(),d=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(d,()=>{const w=l.batch.operations[l.batch.operations.length-1].baseVersion+1,k=this.editor.model.document.history.getOperations(w);this._restoreSelection(l.selection.ranges,l.selection.isBackward,k),this._undo(l.batch,d)}),this.refresh()}}class Xt extends V.Sy{constructor(){super(...arguments),this._batchRegistry=new WeakSet}static get pluginName(){return"UndoEditing"}init(){const l=this.editor;this._undoCommand=new Je(l),this._redoCommand=new qe(l),l.commands.add("undo",this._undoCommand),l.commands.add("redo",this._redoCommand),this.listenTo(l.model,"applyOperation",(d,g)=>{const w=g[0];if(!w.isDocumentOperation)return;const k=w.batch,I=this._redoCommand.createdBatches.has(k),N=this._undoCommand.createdBatches.has(k);this._batchRegistry.has(k)||(this._batchRegistry.add(k),k.isUndoable&&(I?this._undoCommand.addBatch(k):N||(this._undoCommand.addBatch(k),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(d,g,w)=>{this._redoCommand.addBatch(w)}),l.keystrokes.set("CTRL+Z","undo"),l.keystrokes.set("CTRL+Y","redo"),l.keystrokes.set("CTRL+SHIFT+Z","redo")}}var Vn='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',Lt='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';class jt extends V.Sy{static get pluginName(){return"UndoUI"}init(){const l=this.editor,d=l.locale,g=l.t,w=d.uiLanguageDirection=="ltr"?Vn:Lt,k=d.uiLanguageDirection=="ltr"?Lt:Vn;this._addButton("undo",g("Undo"),"CTRL+Z",w),this._addButton("redo",g("Redo"),"CTRL+Y",k)}_addButton(l,d,g,w){const k=this.editor;k.ui.componentFactory.add(l,I=>{const N=k.commands.get(l),K=new ut.r5(I);return K.set({label:d,icon:w,keystroke:g,tooltip:!0}),K.bind("isEnabled").to(N,"isEnabled"),this.listenTo(K,"execute",()=>{k.execute(l),k.editing.view.focus()}),K})}}class Wr extends V.Sy{static get requires(){return[Xt,jt]}static get pluginName(){return"Undo"}}class lo extends v.Sy{static get requires(){return[To,Sr,re,vt,Ne,Wr]}static get pluginName(){return"Essentials"}}},87116:function(J,j,u){"use strict";u.d(j,{Z:function(){return B}});var v=u(95770),V=u(5820);class C extends v.mY{constructor(D){super(D),this._isEnabledBasedOnSelection=!1}refresh(){const D=this.editor.model,O=D.document,W=(0,V.Ps)(O.selection.getSelectedBlocks());this.value=!!W&&W.is("element","paragraph"),this.isEnabled=!!W&&L(W,D.schema)}execute(D={}){const O=this.editor.model,W=O.document,z=D.selection||W.selection;O.canEditAt(z)&&O.change(q=>{const te=z.getSelectedBlocks();for(const de of te)!de.is("element","paragraph")&&L(de,O.schema)&&q.rename(de,"paragraph")})}}function L(M,D){return D.checkChild(M.parent,"paragraph")&&!D.isObject(M)}class m extends v.mY{constructor(D){super(D),this._isEnabledBasedOnSelection=!1}execute(D){const O=this.editor.model,W=D.attributes;let z=D.position;O.canEditAt(z)&&O.change(q=>{if(z=this._findPositionToInsertParagraph(z,q),!z)return;const te=q.createElement("paragraph");W&&O.schema.setAllowedAttributes(te,W,q),O.insertContent(te,z),q.setSelection(te,"in")})}_findPositionToInsertParagraph(D,O){const W=this.editor.model;if(W.schema.checkChild(D,"paragraph"))return D;const z=W.schema.findAllowedParent(D,"paragraph");if(!z)return null;const q=D.parent,te=W.schema.checkChild(q,"$text");return q.isEmpty||te&&D.isAtEnd?W.createPositionAfter(q):!q.isEmpty&&te&&D.isAtStart?W.createPositionBefore(q):O.split(D,z).position}}class B extends v.Sy{static get pluginName(){return"Paragraph"}init(){const D=this.editor,O=D.model;D.commands.add("paragraph",new C(D)),D.commands.add("insertParagraph",new m(D)),O.schema.register("paragraph",{inheritAllFrom:"$block"}),D.conversion.elementToElement({model:"paragraph",view:"p"}),D.conversion.for("upcast").elementToElement({model:(W,{writer:z})=>!B.paragraphLikeElements.has(W.name)||W.isEmpty?null:z.createElement("paragraph"),view:/.+/,converterPriority:"low"})}}B.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"])},42483:function(J,j,u){J=u.nmd(J);(function(v,V){J.exports=V(u(93236))})(self,v=>(()=>{var V={703:(B,M,D)=>{"use strict";var O=D(414);function W(){}function z(){}z.resetWarningCache=W,B.exports=function(){function q(he,Ie,T,Te,Le,Pe){if(Pe!==O){var Qe=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Qe.name="Invariant Violation",Qe}}function te(){return q}q.isRequired=q;var de={array:q,bigint:q,bool:q,func:q,number:q,object:q,string:q,symbol:q,any:q,arrayOf:te,element:q,elementType:q,instanceOf:te,node:q,objectOf:te,oneOf:te,oneOfType:te,shape:te,exact:te,checkPropTypes:z,resetWarningCache:W};return de.PropTypes=de,de}},697:(B,M,D)=>{B.exports=D(703)()},414:B=>{"use strict";B.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},787:B=>{"use strict";B.exports=v}},C={};function L(B){var M=C[B];if(M!==void 0)return M.exports;var D=C[B]={exports:{}};return V[B](D,D.exports,L),D.exports}L.n=B=>{var M=B&&B.__esModule?()=>B.default:()=>B;return L.d(M,{a:M}),M},L.d=(B,M)=>{for(var D in M)L.o(M,D)&&!L.o(B,D)&&Object.defineProperty(B,D,{enumerable:!0,get:M[D]})},L.o=(B,M)=>Object.prototype.hasOwnProperty.call(B,M),L.r=B=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(B,"__esModule",{value:!0})};var m={};return(()=>{"use strict";L.r(m),L.d(m,{CKEditor:()=>uo,CKEditorContext:()=>Qr});var B=L(787),M=L.n(B),D=L(697),O=L.n(D);const W=new Array(256).fill("").map((E,x)=>("0"+x.toString(16)).slice(-2));class z{constructor(x){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit=typeof x.crashNumberLimit=="number"?x.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof x.minimumNonErrorTimePeriod=="number"?x.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=U=>{const ne="error"in U?U.error:U.reason;ne instanceof Error&&this._handleError(ne,U)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(x,U){this._listeners[x]||(this._listeners[x]=[]),this._listeners[x].push(U)}off(x,U){this._listeners[x]=this._listeners[x].filter(ne=>ne!==U)}_fire(x,...U){const ne=this._listeners[x]||[];for(const Ae of ne)Ae.apply(this,[null,...U])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(x,U){if(this._shouldReactToError(x)){this.crashes.push({message:x.message,stack:x.stack,filename:U instanceof ErrorEvent?U.filename:void 0,lineno:U instanceof ErrorEvent?U.lineno:void 0,colno:U instanceof ErrorEvent?U.colno:void 0,date:this._now()});const ne=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:x,causesRestart:ne}),ne?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(x){return x.is&&x.is("CKEditorError")&&x.context!==void 0&&x.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(x)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit?!0:(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}function q(E,x=new Set){const U=[E],ne=new Set;let Ae=0;for(;U.length>Ae;){const tt=U[Ae++];if(!ne.has(tt)&&te(tt)&&!x.has(tt))if(ne.add(tt),Symbol.iterator in tt)try{for(const lt of tt)U.push(lt)}catch(lt){}else for(const lt in tt)lt!=="defaultValue"&&U.push(tt[lt])}return ne}function te(E){const x=Object.prototype.toString.call(E),U=typeof E;return!(U==="number"||U==="boolean"||U==="string"||U==="symbol"||U==="function"||x==="[object Date]"||x==="[object RegExp]"||x==="[object Module]"||E==null||E._watchdogExcluded||E instanceof EventTarget||E instanceof Event)}function de(E,x,U=new Set){if(E===x&&typeof(ne=E)=="object"&&ne!==null)return!0;var ne;const Ae=q(E,U),tt=q(x,U);for(const lt of Ae)if(tt.has(lt))return!0;return!1}const he=function(E){var x=typeof E;return E!=null&&(x=="object"||x=="function")},Ie=typeof u.g=="object"&&u.g&&u.g.Object===Object&&u.g;var T=typeof self=="object"&&self&&self.Object===Object&&self;const Te=Ie||T||Function("return this")(),Le=function(){return Te.Date.now()};var Pe=/\s/;const Qe=function(E){for(var x=E.length;x--&&Pe.test(E.charAt(x)););return x};var ct=/^\s+/;const Fe=function(E){return E&&E.slice(0,Qe(E)+1).replace(ct,"")},Ee=Te.Symbol;var Ke=Object.prototype,mt=Ke.hasOwnProperty,St=Ke.toString,We=Ee?Ee.toStringTag:void 0;const Re=function(E){var x=mt.call(E,We),U=E[We];try{E[We]=void 0;var ne=!0}catch(tt){}var Ae=St.call(E);return ne&&(x?E[We]=U:delete E[We]),Ae};var Ne=Object.prototype.toString;const Oe=function(E){return Ne.call(E)};var Be=Ee?Ee.toStringTag:void 0;const it=function(E){return E==null?E===void 0?"[object Undefined]":"[object Null]":Be&&Be in Object(E)?Re(E):Oe(E)},ze=function(E){return E!=null&&typeof E=="object"},dt=function(E){return typeof E=="symbol"||ze(E)&&it(E)=="[object Symbol]"};var je=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,kt=/^0o[0-7]+$/i,Ht=parseInt;const Me=function(E){if(typeof E=="number")return E;if(dt(E))return NaN;if(he(E)){var x=typeof E.valueOf=="function"?E.valueOf():E;E=he(x)?x+"":x}if(typeof E!="string")return E===0?E:+E;E=Fe(E);var U=pt.test(E);return U||kt.test(E)?Ht(E.slice(2),U?2:8):je.test(E)?NaN:+E};var pe=Math.max,G=Math.min;const ce=function(E,x,U){var ne,Ae,tt,lt,rt,Zt,Ft=0,$o=!1,ho=!1,jr=!0;if(typeof E!="function")throw new TypeError("Expected a function");function Oo(Qn){var qr=ne,bo=Ae;return ne=Ae=void 0,Ft=Qn,lt=E.apply(bo,qr)}function jo(Qn){var qr=Qn-Zt;return Zt===void 0||qr>=x||qr<0||ho&&Qn-Ft>=tt}function mo(){var Qn=Le();if(jo(Qn))return on(Qn);rt=setTimeout(mo,function(qr){var bo=x-(qr-Zt);return ho?G(bo,tt-(qr-Ft)):bo}(Qn))}function on(Qn){return rt=void 0,jr&&ne?Oo(Qn):(ne=Ae=void 0,lt)}function vn(){var Qn=Le(),qr=jo(Qn);if(ne=arguments,Ae=this,Zt=Qn,qr){if(rt===void 0)return function(bo){return Ft=bo,rt=setTimeout(mo,x),$o?Oo(bo):lt}(Zt);if(ho)return clearTimeout(rt),rt=setTimeout(mo,x),Oo(Zt)}return rt===void 0&&(rt=setTimeout(mo,x)),lt}return x=Me(x)||0,he(U)&&($o=!!U.leading,tt=(ho="maxWait"in U)?pe(Me(U.maxWait)||0,x):tt,jr="trailing"in U?!!U.trailing:jr),vn.cancel=function(){rt!==void 0&&clearTimeout(rt),Ft=0,ne=Zt=Ae=rt=void 0},vn.flush=function(){return rt===void 0?lt:on(Le())},vn},fe=function(E,x,U){var ne=!0,Ae=!0;if(typeof E!="function")throw new TypeError("Expected a function");return he(U)&&(ne="leading"in U?!!U.leading:ne,Ae="trailing"in U?!!U.trailing:Ae),ce(E,x,{leading:ne,maxWait:x,trailing:Ae})},ke=function(){this.__data__=[],this.size=0},_e=function(E,x){return E===x||E!=E&&x!=x},xe=function(E,x){for(var U=E.length;U--;)if(_e(E[U][0],x))return U;return-1};var He=Array.prototype.splice;const ut=function(E){var x=this.__data__,U=xe(x,E);return!(U<0)&&(U==x.length-1?x.pop():He.call(x,U,1),--this.size,!0)},Ye=function(E){var x=this.__data__,U=xe(x,E);return U<0?void 0:x[U][1]},Yt=function(E){return xe(this.__data__,E)>-1},cn=function(E,x){var U=this.__data__,ne=xe(U,E);return ne<0?(++this.size,U.push([E,x])):U[ne][1]=x,this};function Vt(E){var x=-1,U=E==null?0:E.length;for(this.clear();++x<U;){var ne=E[x];this.set(ne[0],ne[1])}}Vt.prototype.clear=ke,Vt.prototype.delete=ut,Vt.prototype.get=Ye,Vt.prototype.has=Yt,Vt.prototype.set=cn;const qt=Vt,Sr=function(){this.__data__=new qt,this.size=0},Xe=function(E){var x=this.__data__,U=x.delete(E);return this.size=x.size,U},oe=function(E){return this.__data__.get(E)},be=function(E){return this.__data__.has(E)},De=function(E){if(!he(E))return!1;var x=it(E);return x=="[object Function]"||x=="[object GeneratorFunction]"||x=="[object AsyncFunction]"||x=="[object Proxy]"},nt=Te["__core-js_shared__"];var vt=function(){var E=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}();const yn=function(E){return!!vt&&vt in E};var en=Function.prototype.toString;const ln=function(E){if(E!=null){try{return en.call(E)}catch(x){}try{return E+""}catch(x){}}return""};var dn=/^\[object .+?Constructor\]$/,Or=Function.prototype,gn=Object.prototype,_n=Or.toString,yt=gn.hasOwnProperty,pn=RegExp("^"+_n.call(yt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const hr=function(E){return!(!he(E)||yn(E))&&(De(E)?pn:dn).test(ln(E))},Rr=function(E,x){return E==null?void 0:E[x]},tn=function(E,x){var U=Rr(E,x);return hr(U)?U:void 0},On=tn(Te,"Map"),Kt=tn(Object,"create"),nr=function(){this.__data__=Kt?Kt(null):{},this.size=0},oo=function(E){var x=this.has(E)&&delete this.__data__[E];return this.size-=x?1:0,x};var et=Object.prototype.hasOwnProperty;const ht=function(E){var x=this.__data__;if(Kt){var U=x[E];return U==="__lodash_hash_undefined__"?void 0:U}return et.call(x,E)?x[E]:void 0};var Ue=Object.prototype.hasOwnProperty;const gt=function(E){var x=this.__data__;return Kt?x[E]!==void 0:Ue.call(x,E)},Rt=function(E,x){var U=this.__data__;return this.size+=this.has(E)?0:1,U[E]=Kt&&x===void 0?"__lodash_hash_undefined__":x,this};function $t(E){var x=-1,U=E==null?0:E.length;for(this.clear();++x<U;){var ne=E[x];this.set(ne[0],ne[1])}}$t.prototype.clear=nr,$t.prototype.delete=oo,$t.prototype.get=ht,$t.prototype.has=gt,$t.prototype.set=Rt;const mn=$t,Rn=function(){this.size=0,this.__data__={hash:new mn,map:new(On||qt),string:new mn}},Nn=function(E){var x=typeof E;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?E!=="__proto__":E===null},fr=function(E,x){var U=E.__data__;return Nn(x)?U[typeof x=="string"?"string":"hash"]:U.map},Mr=function(E){var x=fr(this,E).delete(E);return this.size-=x?1:0,x},Et=function(E){return fr(this,E).get(E)},En=function(E){return fr(this,E).has(E)},Dr=function(E,x){var U=fr(this,E),ne=U.size;return U.set(E,x),this.size+=U.size==ne?0:1,this};function Tn(E){var x=-1,U=E==null?0:E.length;for(this.clear();++x<U;){var ne=E[x];this.set(ne[0],ne[1])}}Tn.prototype.clear=Rn,Tn.prototype.delete=Mr,Tn.prototype.get=Et,Tn.prototype.has=En,Tn.prototype.set=Dr;const gr=Tn,Mn=function(E,x){var U=this.__data__;if(U instanceof qt){var ne=U.__data__;if(!On||ne.length<199)return ne.push([E,x]),this.size=++U.size,this;U=this.__data__=new gr(ne)}return U.set(E,x),this.size=U.size,this};function Nt(E){var x=this.__data__=new qt(E);this.size=x.size}Nt.prototype.clear=Sr,Nt.prototype.delete=Xe,Nt.prototype.get=oe,Nt.prototype.has=be,Nt.prototype.set=Mn;const Ct=Nt,Ln=function(E,x){for(var U=-1,ne=E==null?0:E.length;++U<ne&&x(E[U],U,E)!==!1;);return E},_r=function(){try{var E=tn(Object,"defineProperty");return E({},"",{}),E}catch(x){}}(),Fn=function(E,x,U){x=="__proto__"&&_r?_r(E,x,{configurable:!0,enumerable:!0,value:U,writable:!0}):E[x]=U};var zn=Object.prototype.hasOwnProperty;const Wn=function(E,x,U){var ne=E[x];zn.call(E,x)&&_e(ne,U)&&(U!==void 0||x in E)||Fn(E,x,U)},Ir=function(E,x,U,ne){var Ae=!U;U||(U={});for(var tt=-1,lt=x.length;++tt<lt;){var rt=x[tt],Zt=ne?ne(U[rt],E[rt],rt,U,E):void 0;Zt===void 0&&(Zt=E[rt]),Ae?Fn(U,rt,Zt):Wn(U,rt,Zt)}return U},Br=function(E,x){for(var U=-1,ne=Array(E);++U<E;)ne[U]=x(U);return ne},Pn=function(E){return ze(E)&&it(E)=="[object Arguments]"};var Tt=Object.prototype,io=Tt.hasOwnProperty,jn=Tt.propertyIsEnumerable;const Kr=Pn(function(){return arguments}())?Pn:function(E){return ze(E)&&io.call(E,"callee")&&!jn.call(E,"callee")},pr=Array.isArray,so=function(){return!1};var Zn=j&&!j.nodeType&&j,Vr=Zn&&!0&&J&&!J.nodeType&&J,$r=Vr&&Vr.exports===Zn?Te.Buffer:void 0;const Un=($r?$r.isBuffer:void 0)||so;var bt=/^(?:0|[1-9]\d*)$/;const Gt=function(E,x){var U=typeof E;return!!(x=x==null?9007199254740991:x)&&(U=="number"||U!="symbol"&&bt.test(E))&&E>-1&&E%1==0&&E<x},rr=function(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=9007199254740991};var le={};le["[object Float32Array]"]=le["[object Float64Array]"]=le["[object Int8Array]"]=le["[object Int16Array]"]=le["[object Int32Array]"]=le["[object Uint8Array]"]=le["[object Uint8ClampedArray]"]=le["[object Uint16Array]"]=le["[object Uint32Array]"]=!0,le["[object Arguments]"]=le["[object Array]"]=le["[object ArrayBuffer]"]=le["[object Boolean]"]=le["[object DataView]"]=le["[object Date]"]=le["[object Error]"]=le["[object Function]"]=le["[object Map]"]=le["[object Number]"]=le["[object Object]"]=le["[object RegExp]"]=le["[object Set]"]=le["[object String]"]=le["[object WeakMap]"]=!1;const st=function(E){return ze(E)&&rr(E.length)&&!!le[it(E)]},xt=function(E){return function(x){return E(x)}};var bn=j&&!j.nodeType&&j,Cn=bn&&!0&&J&&!J.nodeType&&J,un=Cn&&Cn.exports===bn&&Ie.process;const Mt=function(){try{var E=Cn&&Cn.require&&Cn.require("util").types;return E||un&&un.binding&&un.binding("util")}catch(x){}}();var Hn=Mt&&Mt.isTypedArray;const Kn=Hn?xt(Hn):st;var $n=Object.prototype.hasOwnProperty;const wn=function(E,x){var U=pr(E),ne=!U&&Kr(E),Ae=!U&&!ne&&Un(E),tt=!U&&!ne&&!Ae&&Kn(E),lt=U||ne||Ae||tt,rt=lt?Br(E.length,String):[],Zt=rt.length;for(var Ft in E)!x&&!$n.call(E,Ft)||lt&&(Ft=="length"||Ae&&(Ft=="offset"||Ft=="parent")||tt&&(Ft=="buffer"||Ft=="byteLength"||Ft=="byteOffset")||Gt(Ft,Zt))||rt.push(Ft);return rt};var Dn=Object.prototype;const or=function(E){var x=E&&E.constructor;return E===(typeof x=="function"&&x.prototype||Dn)},mr=function(E,x){return function(U){return E(x(U))}},ao=mr(Object.keys,Object);var co=Object.prototype.hasOwnProperty;const nn=function(E){if(!or(E))return ao(E);var x=[];for(var U in Object(E))co.call(E,U)&&U!="constructor"&&x.push(U);return x},Jt=function(E){return E!=null&&rr(E.length)&&!De(E)},Wt=function(E){return Jt(E)?wn(E):nn(E)},No=function(E,x){return E&&Ir(x,Wt(x),E)},Nr=function(E){var x=[];if(E!=null)for(var U in Object(E))x.push(U);return x};var Lr=Object.prototype.hasOwnProperty;const In=function(E){if(!he(E))return Nr(E);var x=or(E),U=[];for(var ne in E)(ne!="constructor"||!x&&Lr.call(E,ne))&&U.push(ne);return U},Ot=function(E){return Jt(E)?wn(E,!0):In(E)},Lo=function(E,x){return E&&Ir(x,Ot(x),E)};var yo=j&&!j.nodeType&&j,Gr=yo&&!0&&J&&!J.nodeType&&J,kn=Gr&&Gr.exports===yo?Te.Buffer:void 0,Jr=kn?kn.allocUnsafe:void 0;const Bn=function(E,x){if(x)return E.slice();var U=E.length,ne=Jr?Jr(U):new E.constructor(U);return E.copy(ne),ne},Eo=function(E,x){var U=-1,ne=E.length;for(x||(x=Array(ne));++U<ne;)x[U]=E[U];return x},fo=function(E,x){for(var U=-1,ne=E==null?0:E.length,Ae=0,tt=[];++U<ne;){var lt=E[U];x(lt,U,E)&&(tt[Ae++]=lt)}return tt},Gn=function(){return[]};var we=Object.prototype.propertyIsEnumerable,$e=Object.getOwnPropertySymbols;const ir=$e?function(E){return E==null?[]:(E=Object(E),fo($e(E),function(x){return we.call(E,x)}))}:Gn,xn=function(E,x){return Ir(E,ir(E),x)},Xr=function(E,x){for(var U=-1,ne=x.length,Ae=E.length;++U<ne;)E[Ae+U]=x[U];return E},br=mr(Object.getPrototypeOf,Object),Fr=Object.getOwnPropertySymbols?function(E){for(var x=[];E;)Xr(x,ir(E)),E=br(E);return x}:Gn,Yr=function(E,x){return Ir(E,Fr(E),x)},wr=function(E,x,U){var ne=x(E);return pr(E)?ne:Xr(ne,U(E))},kr=function(E){return wr(E,Wt,ir)},To=function(E){return wr(E,Ot,Fr)},vr=tn(Te,"DataView"),Po=tn(Te,"Promise"),sr=tn(Te,"Set"),Dt=tn(Te,"WeakMap");var Jn="[object Map]",zr="[object Promise]",ar="[object Set]",yr="[object WeakMap]",Co="[object DataView]",go=ln(vr),_o=ln(On),po=ln(Po),xo=ln(sr),b=ln(Dt),h=it;(vr&&h(new vr(new ArrayBuffer(1)))!=Co||On&&h(new On)!=Jn||Po&&h(Po.resolve())!=zr||sr&&h(new sr)!=ar||Dt&&h(new Dt)!=yr)&&(h=function(E){var x=it(E),U=x=="[object Object]"?E.constructor:void 0,ne=U?ln(U):"";if(ne)switch(ne){case go:return Co;case _o:return Jn;case po:return zr;case xo:return ar;case b:return yr}return x});const y=h;var R=Object.prototype.hasOwnProperty;const F=function(E){var x=E.length,U=new E.constructor(x);return x&&typeof E[0]=="string"&&R.call(E,"index")&&(U.index=E.index,U.input=E.input),U},Y=Te.Uint8Array,re=function(E){var x=new E.constructor(E.byteLength);return new Y(x).set(new Y(E)),x},ue=function(E,x){var U=x?re(E.buffer):E.buffer;return new E.constructor(U,E.byteOffset,E.byteLength)};var ye=/\w*$/;const Ce=function(E){var x=new E.constructor(E.source,ye.exec(E));return x.lastIndex=E.lastIndex,x};var Je=Ee?Ee.prototype:void 0,qe=Je?Je.valueOf:void 0;const Xt=function(E){return qe?Object(qe.call(E)):{}},Vn=function(E,x){var U=x?re(E.buffer):E.buffer;return new E.constructor(U,E.byteOffset,E.length)},Lt=function(E,x,U){var ne=E.constructor;switch(x){case"[object ArrayBuffer]":return re(E);case"[object Boolean]":case"[object Date]":return new ne(+E);case"[object DataView]":return ue(E,U);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Vn(E,U);case"[object Map]":case"[object Set]":return new ne;case"[object Number]":case"[object String]":return new ne(E);case"[object RegExp]":return Ce(E);case"[object Symbol]":return Xt(E)}};var jt=Object.create;const Wr=function(){function E(){}return function(x){if(!he(x))return{};if(jt)return jt(x);E.prototype=x;var U=new E;return E.prototype=void 0,U}}(),lo=function(E){return typeof E.constructor!="function"||or(E)?{}:Wr(br(E))},A=function(E){return ze(E)&&y(E)=="[object Map]"};var l=Mt&&Mt.isMap;const d=l?xt(l):A,g=function(E){return ze(E)&&y(E)=="[object Set]"};var w=Mt&&Mt.isSet;const k=w?xt(w):g;var I="[object Arguments]",N="[object Function]",K="[object Object]",ee={};ee[I]=ee["[object Array]"]=ee["[object ArrayBuffer]"]=ee["[object DataView]"]=ee["[object Boolean]"]=ee["[object Date]"]=ee["[object Float32Array]"]=ee["[object Float64Array]"]=ee["[object Int8Array]"]=ee["[object Int16Array]"]=ee["[object Int32Array]"]=ee["[object Map]"]=ee["[object Number]"]=ee[K]=ee["[object RegExp]"]=ee["[object Set]"]=ee["[object String]"]=ee["[object Symbol]"]=ee["[object Uint8Array]"]=ee["[object Uint8ClampedArray]"]=ee["[object Uint16Array]"]=ee["[object Uint32Array]"]=!0,ee["[object Error]"]=ee[N]=ee["[object WeakMap]"]=!1;const me=function E(x,U,ne,Ae,tt,lt){var rt,Zt=1&U,Ft=2&U,$o=4&U;if(ne&&(rt=tt?ne(x,Ae,tt,lt):ne(x)),rt!==void 0)return rt;if(!he(x))return x;var ho=pr(x);if(ho){if(rt=F(x),!Zt)return Eo(x,rt)}else{var jr=y(x),Oo=jr==N||jr=="[object GeneratorFunction]";if(Un(x))return Bn(x,Zt);if(jr==K||jr==I||Oo&&!tt){if(rt=Ft||Oo?{}:lo(x),!Zt)return Ft?Yr(x,Lo(rt,x)):xn(x,No(rt,x))}else{if(!ee[jr])return tt?x:{};rt=Lt(x,jr,Zt)}}lt||(lt=new Ct);var jo=lt.get(x);if(jo)return jo;lt.set(x,rt),k(x)?x.forEach(function(on){rt.add(E(on,U,ne,on,x,lt))}):d(x)&&x.forEach(function(on,vn){rt.set(vn,E(on,U,ne,vn,x,lt))});var mo=ho?void 0:($o?Ft?To:kr:Ft?Ot:Wt)(x);return Ln(mo||x,function(on,vn){mo&&(on=x[vn=on]),Wn(rt,vn,E(on,U,ne,vn,x,lt))}),rt},ve=function(E,x){return me(E,5,x=typeof x=="function"?x:void 0)};var Ve=Function.prototype,ot=Object.prototype,_t=Ve.toString,rn=ot.hasOwnProperty,An=_t.call(Object);const Xn=function(E){if(!ze(E)||it(E)!="[object Object]")return!1;var x=br(E);if(x===null)return!0;var U=rn.call(x,"constructor")&&x.constructor;return typeof U=="function"&&U instanceof U&&_t.call(U)==An},Er=function(E){return ze(E)&&E.nodeType===1&&!Xn(E)};class cr extends z{constructor(x,U={}){super(U),this._editor=null,this._throttledSave=fe(this._save.bind(this),typeof U.saveInterval=="number"?U.saveInterval:5e3),x&&(this._creator=(ne,Ae)=>x.create(ne,Ae)),this._destructor=ne=>ne.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(x){this._creator=x}setDestructor(x){this._destructor=x}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(x=>{console.error("An error happened during the editor destroying.",x)}).then(()=>{if(typeof this._elementOrData=="string")return this.create(this._data,this._config,this._config.context);{const x=Object.assign({},this._config,{initialData:this._data});return this.create(this._elementOrData,x,x.context)}}).then(()=>{this._fire("restart")})}create(x=this._elementOrData,U=this._config,ne){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=x,this._config=this._cloneEditorConfiguration(U)||{},this._config.context=ne,this._creator(x,this._config))).then(Ae=>{this._editor=Ae,Ae.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=Ae.model.document.version,this._data=this._getData(),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.flush();const x=this._editor;return this._editor=null,x.model.document.off("change:data",this._throttledSave),this._destructor(x)})}_save(){const x=this._editor.model.document.version;try{this._data=this._getData(),this._lastDocumentVersion=x}catch(U){console.error(U,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(x){this._excludedProps=x}_getData(){const x={};for(const U of this._editor.model.document.getRootNames())x[U]=this._editor.data.get({rootName:U});return x}_isErrorComingFromThisItem(x){return de(this._editor,x.context,this._excludedProps)}_cloneEditorConfiguration(x){return ve(x,(U,ne)=>Er(U)||ne==="context"?U:void 0)}}const Yn=Symbol("MainQueueId");class Tr extends z{constructor(x,U={}){super(U),this._watchdogs=new Map,this._context=null,this._contextProps=new Set,this._actionQueues=new Fo,this._watchdogConfig=U,this._creator=ne=>x.create(ne),this._destructor=ne=>ne.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(x){this._creator=x}setDestructor(x){this._destructor=x}get context(){return this._context}create(x={}){return this._actionQueues.enqueue(Yn,()=>(this._contextConfig=x,this._create()))}getItem(x){return this._getWatchdog(x)._item}getItemState(x){return this._getWatchdog(x).state}add(x){const U=Ao(x);return Promise.all(U.map(ne=>this._actionQueues.enqueue(ne.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let Ae;if(this._watchdogs.has(ne.id))throw new Error(`Item with the given id is already added: '${ne.id}'.`);if(ne.type==="editor")return Ae=new cr(null,this._watchdogConfig),Ae.setCreator(ne.creator),Ae._setExcludedProperties(this._contextProps),ne.destructor&&Ae.setDestructor(ne.destructor),this._watchdogs.set(ne.id,Ae),Ae.on("error",(tt,{error:lt,causesRestart:rt})=>{this._fire("itemError",{itemId:ne.id,error:lt}),rt&&this._actionQueues.enqueue(ne.id,()=>new Promise(Zt=>{const Ft=()=>{Ae.off("restart",Ft),this._fire("itemRestart",{itemId:ne.id}),Zt()};Ae.on("restart",Ft)}))}),Ae.create(ne.sourceElementOrData,ne.config,this._context);throw new Error(`Not supported item type: '${ne.type}'.`)})))}remove(x){const U=Ao(x);return Promise.all(U.map(ne=>this._actionQueues.enqueue(ne,()=>{const Ae=this._getWatchdog(ne);return this._watchdogs.delete(ne),Ae.destroy()})))}destroy(){return this._actionQueues.enqueue(Yn,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Yn,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(x=>{console.error("An error happened during destroying the context or items.",x)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(x=>(this._context=x,this._contextProps=q(this._context),Promise.all(Array.from(this._watchdogs.values()).map(U=>(U._setExcludedProperties(this._contextProps),U.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const x=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(U=>U.destroy())).then(()=>this._destructor(x))})}_getWatchdog(x){const U=this._watchdogs.get(x);if(!U)throw new Error(`Item with the given id was not registered: ${x}.`);return U}_isErrorComingFromThisItem(x){for(const U of this._watchdogs.values())if(U._isErrorComingFromThisItem(x))return!1;return de(this._context,x.context)}}class Fo{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._activeActions=0}onEmpty(x){this._onEmptyCallbacks.push(x)}enqueue(x,U){const ne=x===Yn;this._activeActions++,this._queues.get(x)||this._queues.set(x,Promise.resolve());const Ae=(ne?Promise.all(this._queues.values()):Promise.all([this._queues.get(Yn),this._queues.get(x)])).then(U),tt=Ae.catch(()=>{});return this._queues.set(x,tt),Ae.finally(()=>{this._activeActions--,this._queues.get(x)===tt&&this._activeActions===0&&this._onEmptyCallbacks.forEach(lt=>lt())})}}function Ao(E){return Array.isArray(E)?E:[E]}const So=M().createContext("contextWatchdog");class Qr extends M().Component{constructor(x,U){super(x,U),this.contextWatchdog=null,this.props.isLayoutReady&&this._initializeContextWatchdog(this.props.config)}shouldComponentUpdate(x){return this._shouldComponentUpdate(x)}_shouldComponentUpdate(x){return vo(this,null,function*(){return x.id!==this.props.id&&(this.contextWatchdog&&(yield this.contextWatchdog.destroy()),yield this._initializeContextWatchdog(x.config)),x.isLayoutReady&&!this.contextWatchdog?(yield this._initializeContextWatchdog(x.config),!0):this.props.children!==x.children})}render(){return M().createElement(So.Provider,{value:this.contextWatchdog},this.props.children)}componentWillUnmount(){this._destroyContext()}_initializeContextWatchdog(x){return vo(this,null,function*(){this.contextWatchdog=new Tr(this.props.context,this.props.watchdogConfig),this.contextWatchdog.on("error",(U,ne)=>{this.props.onError(ne.error,{phase:"runtime",willContextRestart:ne.causesRestart})}),this.contextWatchdog.on("stateChange",()=>{this.contextWatchdog.state==="ready"&&this.props.onReady&&this.props.onReady(this.contextWatchdog.context)}),yield this.contextWatchdog.create(x).catch(U=>{this.props.onError(U,{phase:"initialization",willContextRestart:!1})})})}_destroyContext(){return vo(this,null,function*(){this.contextWatchdog&&(yield this.contextWatchdog.destroy(),this.contextWatchdog=null)})}}Qr.defaultProps={isLayoutReady:!0,onError:(E,x)=>console.error(E,x)},Qr.propTypes={id:O().string,isLayoutReady:O().bool,context:O().func,watchdogConfig:O().object,config:O().object,onReady:O().func,onError:O().func};const zo="Lock from React integration (@ckeditor/ckeditor5-react)";class uo extends M().Component{constructor(x){super(x),this.editorDestructionInProgress=null,this.domContainer=M().createRef(),this.watchdog=null;const{CKEDITOR_VERSION:U}=window;if(U){const[ne]=U.split(".").map(Number);ne<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}get editor(){return this.props.disableWatchdog?this.instance:this.watchdog?this.watchdog.editor:null}shouldComponentUpdate(x){return!!this.editor&&(x.id!==this.props.id||x.disableWatchdog!==this.props.disableWatchdog||(this._shouldUpdateEditor(x)&&this.editor.data.set(x.data),"disabled"in x&&(x.disabled?this.editor.enableReadOnlyMode(zo):this.editor.disableReadOnlyMode(zo)),!1))}componentDidMount(){return vo(this,null,function*(){yield this._initializeEditor()})}componentDidUpdate(){return vo(this,null,function*(){yield this._destroyEditor(),yield this._initializeEditor()})}componentWillUnmount(){return vo(this,null,function*(){yield this._destroyEditor()})}render(){return M().createElement("div",{ref:this.domContainer})}_initializeEditor(){return vo(this,null,function*(){yield this.editorDestructionInProgress,this.props.disableWatchdog?this.instance=yield this._createEditor(this.domContainer.current,this._getConfig()):this.watchdog||(this.context instanceof Tr?this.watchdog=new Wo(this.context):this.watchdog=new uo._EditorWatchdog(this.props.editor,this.props.watchdogConfig),this.watchdog.setCreator((x,U)=>this._createEditor(x,U)),this.watchdog.on("error",(x,{error:U,causesRestart:ne})=>{(this.props.onError||console.error)(U,{phase:"runtime",willEditorRestart:ne})}),yield this.watchdog.create(this.domContainer.current,this._getConfig()).catch(x=>{(this.props.onError||console.error)(x,{phase:"initialization",willEditorRestart:!1})}))})}_createEditor(x,U){return this.props.editor.create(x,U).then(ne=>{"disabled"in this.props&&this.props.disabled&&ne.enableReadOnlyMode(zo);const Ae=ne.model.document,tt=ne.editing.view.document;return Ae.on("change:data",lt=>{this.props.onChange&&this.props.onChange(lt,ne)}),tt.on("focus",lt=>{this.props.onFocus&&this.props.onFocus(lt,ne)}),tt.on("blur",lt=>{this.props.onBlur&&this.props.onBlur(lt,ne)}),setTimeout(()=>{this.props.onReady&&this.props.onReady(ne)}),ne})}_destroyEditor(){return vo(this,null,function*(){this.editorDestructionInProgress=new Promise(x=>{setTimeout(()=>vo(this,null,function*(){return this.watchdog?(yield this.watchdog.destroy(),this.watchdog=null,x()):this.instance?(yield this.instance.destroy(),this.instance=null,x()):void x()}))})})}_shouldUpdateEditor(x){return this.props.data!==x.data&&this.editor.data.get()!==x.data}_getConfig(){const x=this.props.config||{};return this.props.data&&x.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `data` properties. The config property is over the data value and the first one will be used when specified both."),Hr(Ge({},x),{initialData:x.initialData||this.props.data||""})}}uo.contextType=So,uo.propTypes={editor:O().func.isRequired,data:O().string,config:O().object,disableWatchdog:O().bool,watchdogConfig:O().object,onChange:O().func,onReady:O().func,onFocus:O().func,onBlur:O().func,onError:O().func,disabled:O().bool,id:O().any},uo._EditorWatchdog=cr;class Wo{constructor(x){this._contextWatchdog=x,this._id=function(){const U=4294967296*Math.random()>>>0,ne=4294967296*Math.random()>>>0,Ae=4294967296*Math.random()>>>0,tt=4294967296*Math.random()>>>0;return"e"+W[U>>0&255]+W[U>>8&255]+W[U>>16&255]+W[U>>24&255]+W[ne>>0&255]+W[ne>>8&255]+W[ne>>16&255]+W[ne>>24&255]+W[Ae>>0&255]+W[Ae>>8&255]+W[Ae>>16&255]+W[Ae>>24&255]+W[tt>>0&255]+W[tt>>8&255]+W[tt>>16&255]+W[tt>>24&255]}()}setCreator(x){this._creator=x}create(x,U){return this._contextWatchdog.add({sourceElementOrData:x,config:U,creator:this._creator,id:this._id,type:"editor"})}on(x,U){this._contextWatchdog.on("itemError",(ne,{itemId:Ae,error:tt})=>{Ae===this._id&&U(null,{error:tt,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}})(),m})())},58522:function(J,j,u){"use strict";u.d(j,{py:function(){return Ni},r5:function(){return vt},S8:function(){return Bi},r1:function(){return ls},lp:function(){return Li},YS:function(){return Ee},jB:function(){return un},G7:function(){return Pe},iw:function(){return bt}});var v=u(5820);class V extends v.FE{constructor(s=[]){super(s,{idProperty:"viewUid"}),this.on("add",(c,p,P)=>{this._renderViewIntoCollectionParent(p,P)}),this.on("remove",(c,p)=>{p.element&&this._parentElement&&p.element.remove()}),this._parentElement=null}destroy(){this.map(s=>s.destroy())}setParent(s){this._parentElement=s;for(const c of this)this._renderViewIntoCollectionParent(c)}delegate(...s){if(!s.length||!C(s))throw new v.Bb("ui-viewcollection-delegate-wrong-events",this);return{to:c=>{for(const p of this)for(const P of s)p.delegate(P).to(c);this.on("add",(p,P)=>{for(const Z of s)P.delegate(Z).to(c)}),this.on("remove",(p,P)=>{for(const Z of s)P.stopDelegating(Z,c)})}}}_renderViewIntoCollectionParent(s,c){s.isRendered||s.render(),s.element&&this._parentElement&&this._parentElement.insertBefore(s.element,this._parentElement.children[c])}remove(s){return super.remove(s)}}function C(f){return f.every(s=>typeof s=="string")}var L=u(1062),m=u.n(L),B=u(60552),M=u.n(B),D=u(33566),O=u.n(D),W=u(84107),z=u.n(W),q=u(24911),te=u.n(q),de=u(63227),he=u.n(de),Ie=u(82727),T={};T.styleTagTransform=he(),T.setAttributes=z(),T.insert=O().bind(null,"head"),T.domAPI=M(),T.insertStyleElement=te();var Te=m()(Ie.Z,T),Le=Ie.Z&&Ie.Z.locals?Ie.Z.locals:void 0;class Pe extends(0,v.Xu)((0,v.Re)()){constructor(s){super(),this.element=null,this.isRendered=!1,this.locale=s,this.t=s&&s.t,this._viewCollections=new v.FE,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(c,p)=>{p.locale=s,p.t=s&&s.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Ee.bind(this,this)}createCollection(s){const c=new V(s);return this._viewCollections.add(c),c}registerChild(s){(0,v.TW)(s)||(s=[s]);for(const c of s)this._unboundChildren.add(c)}deregisterChild(s){(0,v.TW)(s)||(s=[s]);for(const c of s)this._unboundChildren.remove(c)}setTemplate(s){this.template=new Ee(s)}extendTemplate(s){Ee.extend(this.template,s)}render(){if(this.isRendered)throw new v.Bb("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(s=>s.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}var Qe=u(94195),ct=u(82433);const Fe="http://www.w3.org/1999/xhtml";class Ee extends(0,v.ln)(){constructor(s){super(),Object.assign(this,dt(ze(s))),this._isRendered=!1,this._revertData=null}render(){const s=this._renderNode({intoFragment:!0});return this._isRendered=!0,s}apply(s){return this._revertData=ut(),this._renderNode({node:s,intoFragment:!1,isApplying:!0,revertData:this._revertData}),s}revert(s){if(!this._revertData)throw new v.Bb("ui-template-revert-not-applied",[this,s]);this._revertTemplateFromNode(s,this._revertData)}*getViews(){function*s(c){if(c.children)for(const p of c.children)ke(p)?yield p:_e(p)&&(yield*s(p))}yield*s(this)}static bind(s,c){return{to(p,P){return new mt({eventNameOrFunction:p,attribute:p,observable:s,emitter:c,callback:P})},if(p,P,Z){return new St({observable:s,emitter:c,attribute:p,valueIfTrue:P,callback:Z})}}}static extend(s,c){if(s._isRendered)throw new v.Bb("template-extend-render",[this,s]);ce(s,dt(ze(c)))}_renderNode(s){let c;if(s.node?c=this.tag&&this.text:c=this.tag?this.text:!this.text,c)throw new v.Bb("ui-template-wrong-syntax",this);return this.text?this._renderText(s):this._renderElement(s)}_renderElement(s){let c=s.node;return c||(c=s.node=document.createElementNS(this.ns||Fe,this.tag)),this._renderAttributes(s),this._renderElementChildren(s),this._setUpListeners(s),c}_renderText(s){let c=s.node;return c?s.revertData.text=c.textContent:c=s.node=document.createTextNode(""),We(this.text)?this._bindToObservable({schema:this.text,updater:Oe(c),data:s}):c.textContent=this.text.join(""),c}_renderAttributes(s){if(!this.attributes)return;const c=s.node,p=s.revertData;for(const P in this.attributes){const Z=c.getAttribute(P),Q=this.attributes[P];p&&(p.attributes[P]=Z);const $=He(Q)?Q[0].ns:null;if(We(Q)){const ae=He(Q)?Q[0].value:Q;p&&Ye(P)&&ae.unshift(Z),this._bindToObservable({schema:ae,updater:Be(c,P,$),data:s})}else if(P=="style"&&typeof Q[0]!="string")this._renderStyleAttribute(Q[0],s);else{p&&Z&&Ye(P)&&Q.unshift(Z);const ae=Q.map(ft=>ft&&(ft.value||ft)).reduce((ft,wt)=>ft.concat(wt),[]).reduce(pe,"");fe(ae)||c.setAttributeNS($,P,ae)}}}_renderStyleAttribute(s,c){const p=c.node;for(const P in s){const Z=s[P];We(Z)?this._bindToObservable({schema:[Z],updater:it(p,P),data:c}):p.style[P]=Z}}_renderElementChildren(s){const c=s.node,p=s.intoFragment?document.createDocumentFragment():c,P=s.isApplying;let Z=0;for(const Q of this.children)if(xe(Q)){if(!P){Q.setParent(c);for(const $ of Q)p.appendChild($.element)}}else if(ke(Q))P||(Q.isRendered||Q.render(),p.appendChild(Q.element));else if((0,v.UG)(Q))p.appendChild(Q);else if(P){const $=s.revertData,ae=ut();$.children.push(ae),Q._renderNode({intoFragment:!1,node:p.childNodes[Z++],isApplying:!0,revertData:ae})}else p.appendChild(Q.render());s.intoFragment&&c.appendChild(p)}_setUpListeners(s){if(this.eventListeners)for(const c in this.eventListeners){const p=this.eventListeners[c].map(P=>{const[Z,Q]=c.split("@");return P.activateDomEventListener(Z,Q,s)});s.revertData&&s.revertData.bindings.push(p)}}_bindToObservable({schema:s,updater:c,data:p}){const P=p.revertData;Ne(s,c,p);const Z=s.filter(Q=>!fe(Q)).filter(Q=>Q.observable).map(Q=>Q.activateAttributeListener(s,c,p));P&&P.bindings.push(Z)}_revertTemplateFromNode(s,c){for(const P of c.bindings)for(const Z of P)Z();if(c.text){s.textContent=c.text;return}const p=s;for(const P in c.attributes){const Z=c.attributes[P];Z===null?p.removeAttribute(P):p.setAttribute(P,Z)}for(let P=0;P<c.children.length;++P)this._revertTemplateFromNode(p.childNodes[P],c.children[P])}}class Ke{constructor(s){this.attribute=s.attribute,this.observable=s.observable,this.emitter=s.emitter,this.callback=s.callback}getValue(s){const c=this.observable[this.attribute];return this.callback?this.callback(c,s):c}activateAttributeListener(s,c,p){const P=()=>Ne(s,c,p);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,P),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,P)}}}class mt extends Ke{constructor(s){super(s),this.eventNameOrFunction=s.eventNameOrFunction}activateDomEventListener(s,c,p){const P=(Z,Q)=>{(!c||Q.target.matches(c))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(Q):this.observable.fire(this.eventNameOrFunction,Q))};return this.emitter.listenTo(p.node,s,P),()=>{this.emitter.stopListening(p.node,s,P)}}}class St extends Ke{constructor(s){super(s),this.valueIfTrue=s.valueIfTrue}getValue(s){const c=super.getValue(s);return fe(c)?!1:this.valueIfTrue||!0}}function We(f){return f?(f.value&&(f=f.value),Array.isArray(f)?f.some(We):f instanceof Ke):!1}function Re(f,s){return f.map(c=>c instanceof Ke?c.getValue(s):c)}function Ne(f,s,{node:c}){const p=Re(f,c);let P;f.length==1&&f[0]instanceof St?P=p[0]:P=p.reduce(pe,""),fe(P)?s.remove():s.set(P)}function Oe(f){return{set(s){f.textContent=s},remove(){f.textContent=""}}}function Be(f,s,c){return{set(p){f.setAttributeNS(c,s,p)},remove(){f.removeAttributeNS(c,s)}}}function it(f,s){return{set(c){f.style[s]=c},remove(){f.style[s]=null}}}function ze(f){return(0,Qe.Z)(f,c=>{if(c&&(c instanceof Ke||_e(c)||ke(c)||xe(c)))return c})}function dt(f){if(typeof f=="string"?f=kt(f):f.text&&Ht(f),f.on&&(f.eventListeners=pt(f.on),delete f.on),!f.text){f.attributes&&je(f.attributes);const s=[];if(f.children)if(xe(f.children))s.push(f.children);else for(const c of f.children)_e(c)||ke(c)||(0,v.UG)(c)?s.push(c):s.push(new Ee(c));f.children=s}return f}function je(f){for(const s in f)f[s].value&&(f[s].value=(0,v.qo)(f[s].value)),Me(f,s)}function pt(f){for(const s in f)Me(f,s);return f}function kt(f){return{text:[f]}}function Ht(f){f.text=(0,v.qo)(f.text)}function Me(f,s){f[s]=(0,v.qo)(f[s])}function pe(f,s){return fe(s)?f:fe(f)?s:`${f} ${s}`}function G(f,s){for(const c in s)f[c]?f[c].push(...s[c]):f[c]=s[c]}function ce(f,s){if(s.attributes&&(f.attributes||(f.attributes={}),G(f.attributes,s.attributes)),s.eventListeners&&(f.eventListeners||(f.eventListeners={}),G(f.eventListeners,s.eventListeners)),s.text&&f.text.push(...s.text),s.children&&s.children.length){if(f.children.length!=s.children.length)throw new v.Bb("ui-template-extend-children-mismatch",f);let c=0;for(const p of s.children)ce(f.children[c++],p)}}function fe(f){return!f&&f!==0}function ke(f){return f instanceof Pe}function _e(f){return f instanceof Ee}function xe(f){return f instanceof V}function He(f){return(0,ct.Z)(f[0])&&f[0].ns}function ut(){return{children:[],bindings:[],attributes:{}}}function Ye(f){return f=="class"||f=="style"}class Yt extends V{constructor(s,c=[]){super(c),this.locale=s}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Ee({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let s=document.querySelector(".ck-body-wrapper");s||(s=(0,v.az)(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(s)),s.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const s=document.querySelector(".ck-body-wrapper");s&&s.childElementCount==0&&s.remove()}}var cn=u(18708),Vt={};Vt.styleTagTransform=he(),Vt.setAttributes=z(),Vt.insert=O().bind(null,"head"),Vt.domAPI=M(),Vt.insertStyleElement=te();var qt=m()(cn.Z,Vt),Sr=cn.Z&&cn.Z.locals?cn.Z.locals:void 0;class Xe extends Pe{constructor(){super();const s=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon","ck-reset_all-excluded",s.if("isColorInherited","ck-icon_inherit-color")],viewBox:s.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const c=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),p=c.getAttribute("viewBox");p&&(this.viewBox=p);for(const{name:P,value:Z}of Array.from(c.attributes))Xe.presentationalAttributeNames.includes(P)&&this.element.setAttribute(P,Z);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;c.childNodes.length>0;)this.element.appendChild(c.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(s=>{s.style.fill=this.fillColor})}}Xe.presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];var oe=u(568),be={};be.styleTagTransform=he(),be.setAttributes=z(),be.insert=O().bind(null,"head"),be.domAPI=M(),be.insertStyleElement=te();var De=m()(oe.Z,be),nt=oe.Z&&oe.Z.locals?oe.Z.locals:void 0;class vt extends Pe{constructor(s){super(s),this._focusDelayed=null;const c=this.bindTemplate,p=(0,v.hQ)();this.set("ariaChecked",void 0),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${p}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._createLabelView(),this.iconView=new Xe,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const P={tag:"button",attributes:{class:["ck","ck-button",c.to("class"),c.if("isEnabled","ck-disabled",Z=>!Z),c.if("isVisible","ck-hidden",Z=>!Z),c.to("isOn",Z=>Z?"ck-on":"ck-off"),c.if("withText","ck-button_with-text"),c.if("withKeystroke","ck-button_with-keystroke")],role:c.to("role"),type:c.to("type",Z=>Z||"button"),tabindex:c.to("tabindex"),"aria-label":c.to("ariaLabel"),"aria-labelledby":c.to("ariaLabelledBy"),"aria-disabled":c.if("isEnabled",!0,Z=>!Z),"aria-checked":c.to("isOn"),"aria-pressed":c.to("isOn",Z=>this.isToggleable?String(!!Z):!1),"data-cke-tooltip-text":c.to("_tooltipString"),"data-cke-tooltip-position":c.to("tooltipPosition")},children:this.children,on:{click:c.to(Z=>{this.isEnabled?this.fire("execute"):Z.preventDefault()})}};v.OB.isSafari&&(this._focusDelayed||(this._focusDelayed=(0,v.gw)(()=>this.focus(),0)),P.on.mousedown=c.to(()=>{this._focusDelayed()}),P.on.mouseup=c.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(P)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_createLabelView(){const s=new Pe,c=this.bindTemplate;return s.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:c.to("labelStyle"),id:this.ariaLabelledBy},children:[{text:c.to("label")}]}),s}_createKeystrokeView(){const s=new Pe;return s.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",c=>(0,v.XU)(c))}]}),s}_getTooltipString(s,c,p){return s?typeof s=="string"?s:(p&&(p=(0,v.XU)(p)),s instanceof Function?s(c,p):`${c}${p?` (${p})`:""}`):""}}var yn=u(31127),en={};en.styleTagTransform=he(),en.setAttributes=z(),en.insert=O().bind(null,"head"),en.domAPI=M(),en.insertStyleElement=te();var ln=m()(yn.Z,en),dn=yn.Z&&yn.Z.locals?yn.Z.locals:void 0;class Or extends vt{constructor(s){super(s),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const s=new Pe;return s.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),s}}var gn='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';class _n extends null{constructor(s){super(s);const c=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=checkIcon,this.extendTemplate({attributes:{style:{backgroundColor:c.to("color")},class:["ck","ck-color-grid__tile",c.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}var yt=u(38929),pn={};pn.styleTagTransform=he(),pn.setAttributes=z(),pn.insert=O().bind(null,"head"),pn.domAPI=M(),pn.insertStyleElement=te();var hr=m()(yt.Z,pn),Rr=yt.Z&&yt.Z.locals?yt.Z.locals:void 0;class tn extends null{constructor(s,c){super(s);const p=c&&c.colorDefinitions?c.colorDefinitions:[];this.columns=c&&c.columns?c.columns:5;const P={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.items.on("add",(Z,Q)=>{Q.isOn=Q.color===this.selectedColor}),p.forEach(Z=>{const Q=new ColorTileView;Q.set({color:Z.color,label:Z.label,tooltip:!0,hasBorder:Z.options.hasBorder}),Q.on("execute",()=>{this.fire("execute",{value:Z.color,hasBorder:Z.options.hasBorder,label:Z.label})}),this.items.add(Q)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:P}}),this.on("change:selectedColor",(Z,Q,$)=>{for(const ae of this.items)ae.isOn=ae.color===$})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const s of this.items)this.focusTracker.add(s.element);this.items.on("add",(s,c)=>{this.focusTracker.add(c.element)}),this.items.on("remove",(s,c)=>{this.focusTracker.remove(c.element)}),this.keystrokes.listenTo(this.element),addKeyboardHandlingForGrid({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}var On=u(99419),Kt=null,nr={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function oo(f){var s,c=[],p=1,P;if(typeof f=="string")if(names[f])c=names[f].slice(),P="rgb";else if(f==="transparent")p=0,P="rgb",c=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(f)){var Z=f.slice(1),Q=Z.length,$=Q<=4;p=1,$?(c=[parseInt(Z[0]+Z[0],16),parseInt(Z[1]+Z[1],16),parseInt(Z[2]+Z[2],16)],Q===4&&(p=parseInt(Z[3]+Z[3],16)/255)):(c=[parseInt(Z[0]+Z[1],16),parseInt(Z[2]+Z[3],16),parseInt(Z[4]+Z[5],16)],Q===8&&(p=parseInt(Z[6]+Z[7],16)/255)),c[0]||(c[0]=0),c[1]||(c[1]=0),c[2]||(c[2]=0),P="rgb"}else if(s=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(f)){var ae=s[1],ft=ae==="rgb",Z=ae.replace(/a$/,"");P=Z;var Q=Z==="cmyk"?4:Z==="gray"?1:3;c=s[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(ur,Wi){if(/%$/.test(ur))return Wi===Q?parseFloat(ur)/100:Z==="rgb"?parseFloat(ur)*255/100:parseFloat(ur);if(Z[Wi]==="h"){if(/deg$/.test(ur))return parseFloat(ur);if(nr[ur]!==void 0)return nr[ur]}return parseFloat(ur)}),ae===Z&&c.push(1),p=ft||c[Q]===void 0?1:c[Q],c=c.slice(0,Q)}else f.length>10&&/[0-9](?:\s|\/)/.test(f)&&(c=f.match(/([0-9]+)/g).map(function(wt){return parseFloat(wt)}),P=f.match(/([a-z])/ig).join("").toLowerCase());else isNaN(f)?Array.isArray(f)||f.length?(c=[f[0],f[1],f[2]],P="rgb",p=f.length===4?f[3]:1):f instanceof Object&&(f.r!=null||f.red!=null||f.R!=null?(P="rgb",c=[f.r||f.red||f.R||0,f.g||f.green||f.G||0,f.b||f.blue||f.B||0]):(P="hsl",c=[f.h||f.hue||f.H||0,f.s||f.saturation||f.S||0,f.l||f.lightness||f.L||f.b||f.brightness]),p=f.a||f.alpha||f.opacity||1,f.opacity!=null&&(p/=100)):(P="rgb",c=[f>>>16,(f&65280)>>>8,f&255]);return{space:P,values:c,alpha:p}}var et=u(2771);function ht(f,s){if(!f)return"";const c=Rt(f);if(!c)return"";if(c.space===s)return f;if(!$t(c))return"";const P=convert[c.space][s];if(!P)return"";const Z=P(c.space==="hex"?c.hexValue:c.values);return gt(Z,s)}function Ue(f){if(!f)return"";const s=Rt(f);return s?s.space==="hex"?s.hexValue:ht(f,"hex"):"#000"}function gt(f,s){switch(s){case"hex":return`#${f}`;case"rgb":return`rgb( ${f[0]}, ${f[1]}, ${f[2]} )`;case"hsl":return`hsl( ${f[0]}, ${f[1]}%, ${f[2]}% )`;case"hwb":return`hwb( ${f[0]}, ${f[1]}, ${f[2]} )`;case"lab":return`lab( ${f[0]}% ${f[1]} ${f[2]} )`;case"lch":return`lch( ${f[0]}% ${f[1]} ${f[2]} )`;default:return""}}function Rt(f){if(f.startsWith("#")){const c=parse(f);return{space:"hex",values:c.values,hexValue:f,alpha:c.alpha}}const s=parse(f);return s.space?s:null}function $t(f){return Object.keys(convert).includes(f.space)}var mn=u(72580),Rn={};Rn.styleTagTransform=he(),Rn.setAttributes=z(),Rn.insert=O().bind(null,"head"),Rn.domAPI=M(),Rn.insertStyleElement=te();var Nn=m()(mn.Z,Rn),fr=mn.Z&&mn.Z.locals?mn.Z.locals:void 0;class Mr extends Pe{constructor(s){super(s),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${(0,v.hQ)()}`;const c=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:c.to("for")},children:[{text:c.to("text")}]})}}var Et=u(22711),En={};En.styleTagTransform=he(),En.setAttributes=z(),En.insert=O().bind(null,"head"),En.domAPI=M(),En.insertStyleElement=te();var Dr=m()(Et.Z,En),Tn=Et.Z&&Et.Z.locals?Et.Z.locals:void 0;class gr extends null{constructor(s,c){super(s);const p=`ck-labeled-field-view-${uid()}`,P=`ck-labeled-field-view-status-${uid()}`;this.fieldView=c(this,p,P),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(p),this.statusView=this._createStatusView(P),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(Q,$)=>Q||$);const Z=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",Z.to("class"),Z.if("isEnabled","ck-disabled",Q=>!Q),Z.if("isEmpty","ck-labeled-field-view_empty"),Z.if("isFocused","ck-labeled-field-view_focused"),Z.if("placeholder","ck-labeled-field-view_placeholder"),Z.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(s){const c=new LabelView(this.locale);return c.for=s,c.bind("text").to(this,"label"),c}_createStatusView(s){const c=new View(this.locale),p=this.bindTemplate;return c.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",p.if("errorText","ck-labeled-field-view__status_error"),p.if("_statusText","ck-hidden",P=>!P)],id:s,role:p.if("errorText","alert")},children:[{text:p.to("_statusText")}]}),c}focus(){this.fieldView.focus()}}var Mn=u(27741),Nt={};Nt.styleTagTransform=he(),Nt.setAttributes=z(),Nt.insert=O().bind(null,"head"),Nt.domAPI=M(),Nt.insertStyleElement=te();var Ct=m()(Mn.Z,Nt),Ln=Mn.Z&&Mn.Z.locals?Mn.Z.locals:void 0;class _r extends null{constructor(s){super(s),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.focusTracker=new FocusTracker,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0),this.set("inputMode","text");const c=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",c.if("isFocused","ck-input_focused"),c.if("isEmpty","ck-input-text_empty"),c.if("hasError","ck-error")],id:c.to("id"),placeholder:c.to("placeholder"),readonly:c.to("isReadOnly"),inputmode:c.to("inputMode"),"aria-invalid":c.if("hasError",!0),"aria-describedby":c.to("ariaDescribedById")},on:{input:c.to((...p)=>{this.fire("input",...p),this._updateIsEmpty()}),change:c.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(s,c,p)=>{this._setDomElementValue(p),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}_updateIsEmpty(){this.isEmpty=Fn(this.element)}_setDomElementValue(s){this.element.value=!s&&s!==0?"":s}}function Fn(f){return!f.value}class zn extends null{constructor(s){super(s),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class Wn extends null{constructor(s,{min:c,max:p,step:P}={}){super(s);const Z=this.bindTemplate;this.set("min",c),this.set("max",p),this.set("step",P),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:Z.to("min"),max:Z.to("max"),step:Z.to("step")}})}}class Ir extends Pe{constructor(s){super(s);const c=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",c.to("position",p=>`ck-dropdown__panel_${p}`),c.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:c.to(p=>{p.target.tagName.toLocaleLowerCase()!=="input"&&p.preventDefault()})}})}focus(){if(this.children.length){const s=this.children.first;typeof s.focus=="function"?s.focus():(0,v.KE)("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const s=this.children.last;typeof s.focusLast=="function"?s.focusLast():s.focus()}}}var Br=u(38501),Pn={};Pn.styleTagTransform=he(),Pn.setAttributes=z(),Pn.insert=O().bind(null,"head"),Pn.domAPI=M(),Pn.insertStyleElement=te();var Tt=m()(Br.Z,Pn),io=Br.Z&&Br.Z.locals?Br.Z.locals:void 0;class jn extends Pe{constructor(s,c,p){super(s);const P=this.bindTemplate;this.buttonView=c,this.panelView=p,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.keystrokes=new v.VD,this.focusTracker=new v.Rh,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",P.to("class"),P.if("isEnabled","ck-disabled",Z=>!Z)],id:P.to("id"),"aria-describedby":P.to("ariaDescribedById")},children:[c,p]}),c.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":P.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",(c,p,P)=>{P&&(this.panelPosition==="auto"?this.panelView.position=jn._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions}).name:this.panelView.position=this.panelPosition)}),this.keystrokes.listenTo(this.element);const s=(c,p)=>{this.isOpen&&(this.isOpen=!1,p())};this.keystrokes.set("arrowdown",(c,p)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,p())}),this.keystrokes.set("arrowright",(c,p)=>{this.isOpen&&p()}),this.keystrokes.set("arrowleft",s),this.keystrokes.set("esc",s)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:s,north:c,southEast:p,southWest:P,northEast:Z,northWest:Q,southMiddleEast:$,southMiddleWest:ae,northMiddleEast:ft,northMiddleWest:wt}=jn.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[p,P,$,ae,s,Z,Q,ft,wt,c]:[P,p,ae,$,s,Q,Z,wt,ft,c]}}jn.defaultPanelPositions={south:(f,s)=>({top:f.bottom,left:f.left-(s.width-f.width)/2,name:"s"}),southEast:f=>({top:f.bottom,left:f.left,name:"se"}),southWest:(f,s)=>({top:f.bottom,left:f.left-s.width+f.width,name:"sw"}),southMiddleEast:(f,s)=>({top:f.bottom,left:f.left-(s.width-f.width)/4,name:"sme"}),southMiddleWest:(f,s)=>({top:f.bottom,left:f.left-(s.width-f.width)*3/4,name:"smw"}),north:(f,s)=>({top:f.top-s.height,left:f.left-(s.width-f.width)/2,name:"n"}),northEast:(f,s)=>({top:f.top-s.height,left:f.left,name:"ne"}),northWest:(f,s)=>({top:f.top-s.height,left:f.left-s.width+f.width,name:"nw"}),northMiddleEast:(f,s)=>({top:f.top-s.height,left:f.left-(s.width-f.width)/4,name:"nme"}),northMiddleWest:(f,s)=>({top:f.top-s.height,left:f.left-(s.width-f.width)*3/4,name:"nmw"})},jn._getOptimalPosition=v.xZ;var Kr='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class pr extends vt{constructor(s){super(s),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",c=>String(c))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const s=new Xe;return s.content=Kr,s.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),s}}class so{constructor(s){if(this.focusables=s.focusables,this.focusTracker=s.focusTracker,this.keystrokeHandler=s.keystrokeHandler,this.actions=s.actions,s.actions&&s.keystrokeHandler)for(const c in s.actions){let p=s.actions[c];typeof p=="string"&&(p=[p]);for(const P of p)s.keystrokeHandler.set(P,(Z,Q)=>{this[c](),Q()})}}get first(){return this.focusables.find(Zn)||null}get last(){return this.focusables.filter(Zn).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let s=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((c,p)=>{const P=c.element===this.focusTracker.focusedElement;return P&&(s=p),P}),s)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(s){s&&s.focus()}_getFocusableItem(s){const c=this.current,p=this.focusables.length;if(!p)return null;if(c===null)return this[s===1?"first":"last"];let P=(c+p+s)%p;do{const Z=this.focusables.get(P);if(Zn(Z))return Z;P=(P+p+s)%p}while(P!==c);return null}}function Zn(f){return!!(f.focus&&(0,v.pn)(f.element))}class Vr extends Pe{constructor(s){super(s),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class $r extends Pe{constructor(s){super(s),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}function Un(f){return f.bindTemplate.to(s=>{s.target===f.element&&s.preventDefault()})}function bt(f){return Array.isArray(f)?{items:f,removeItems:[]}:f?Object.assign({items:[],removeItems:[]},f):{items:[],removeItems:[]}}var Gt=u(95770),rr=u(87478),le={};le.styleTagTransform=he(),le.setAttributes=z(),le.insert=O().bind(null,"head"),le.domAPI=M(),le.insertStyleElement=te();var st=m()(rr.Z,le),xt=rr.Z&&rr.Z.locals?rr.Z.locals:void 0;const{threeVerticalDots:bn}=Gt.icons,Cn={alignLeft:Gt.icons.alignLeft,bold:Gt.icons.bold,importExport:Gt.icons.importExport,paragraph:Gt.icons.paragraph,plus:Gt.icons.plus,text:Gt.icons.text,threeVerticalDots:Gt.icons.threeVerticalDots};class un extends Pe{constructor(s,c){super(s);const p=this.bindTemplate,P=this.t;this.options=c||{},this.set("ariaLabel",P("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new v.Rh,this.keystrokes=new v.VD,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new Mt(s),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const Z=s.uiLanguageDirection==="rtl";this._focusCycler=new so({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[Z?"arrowright":"arrowleft","arrowup"],focusNext:[Z?"arrowleft":"arrowright","arrowdown"]}});const Q=["ck","ck-toolbar",p.to("class"),p.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&Q.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:Q,role:"toolbar","aria-label":p.to("ariaLabel"),style:{maxWidth:p.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:Un(this)}}),this._behavior=this.options.shouldGroupWhenFull?new Kn(this):new Hn(this)}render(){super.render(),this.focusTracker.add(this.element);for(const s of this.items)this.focusTracker.add(s.element);this.items.on("add",(s,c)=>{this.focusTracker.add(c.element)}),this.items.on("remove",(s,c)=>{this.focusTracker.remove(c.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(s,c,p){this.items.addMany(this._buildItemsFromConfig(s,c,p))}_buildItemsFromConfig(s,c,p){const P=bt(s),Z=p||P.removeItems;return this._cleanItemsConfiguration(P.items,c,Z).map($=>(0,ct.Z)($)?this._createNestedToolbarDropdown($,c,Z):$==="|"?new Vr:$==="-"?new $r:c.create($)).filter($=>!!$)}_cleanItemsConfiguration(s,c,p){const P=s.filter((Z,Q,$)=>Z==="|"?!0:p.indexOf(Z)!==-1?!1:Z==="-"?this.options.shouldGroupWhenFull?((0,v.KE)("toolbarview-line-break-ignored-when-grouping-items",$),!1):!0:!(0,ct.Z)(Z)&&!c.has(Z)?((0,v.KE)("toolbarview-item-unavailable",{item:Z}),!1):!0);return this._cleanSeparatorsAndLineBreaks(P)}_cleanSeparatorsAndLineBreaks(s){const c=Q=>Q!=="-"&&Q!=="|",p=s.length,P=s.findIndex(c);if(P===-1)return[];const Z=p-s.slice().reverse().findIndex(c);return s.slice(P,Z).filter((Q,$,ae)=>c(Q)?!0:!($>0&&ae[$-1]===Q))}_createNestedToolbarDropdown(s,c,p){let{label:P,icon:Z,items:Q,tooltip:$=!0,withText:ae=!1}=s;if(Q=this._cleanItemsConfiguration(Q,c,p),!Q.length)return null;const ft=this.locale,wt=Eo(ft);return P||(0,v.KE)("toolbarview-nested-toolbar-dropdown-missing-label",s),wt.class="ck-toolbar__nested-toolbar-dropdown",wt.buttonView.set({label:P,tooltip:$,withText:!!ae}),Z!==!1?wt.buttonView.icon=Cn[Z]||Z||bn:wt.buttonView.withText=!0,fo(wt,()=>wt.toolbarView._buildItemsFromConfig(Q,c,p)),wt}}class Mt extends Pe{constructor(s){super(s),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class Hn{constructor(s){const c=s.bindTemplate;s.set("isVertical",!1),s.itemsView.children.bindTo(s.items).using(p=>p),s.focusables.bindTo(s.items).using(p=>p),s.extendTemplate({attributes:{class:[c.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class Kn{constructor(s){this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,this.view=s,this.viewChildren=s.children,this.viewFocusables=s.focusables,this.viewItemsView=s.itemsView,this.viewFocusTracker=s.focusTracker,this.viewLocale=s.locale,this.ungroupedItems=s.createCollection(),this.groupedItems=s.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),s.itemsView.children.bindTo(this.ungroupedItems).using(c=>c),this.ungroupedItems.on("change",this._updateFocusCycleableItems.bind(this)),s.children.on("change",this._updateFocusCycleableItems.bind(this)),s.items.on("change",(c,p)=>{const P=p.index,Z=Array.from(p.added);for(const Q of p.removed)P>=this.ungroupedItems.length?this.groupedItems.remove(Q):this.ungroupedItems.remove(Q);for(let Q=P;Q<P+Z.length;Q++){const $=Z[Q-P];Q>this.ungroupedItems.length?this.groupedItems.add($,Q-this.ungroupedItems.length):this.ungroupedItems.add($,Q)}this._updateGrouping()}),s.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(s){this.viewElement=s.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(s)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!(0,v.pn)(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const s=this.groupedItems.length;let c;for(;this._areItemsOverflowing;)this._groupLastItem(),c=!0;if(!c&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==s&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const s=this.viewElement,c=this.viewLocale.uiLanguageDirection,p=new v.UL(s.lastChild),P=new v.UL(s);if(!this.cachedPadding){const Z=v.global.window.getComputedStyle(s),Q=c==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(Z[Q])}return c==="ltr"?p.right>P.right-this.cachedPadding:p.left<P.left+this.cachedPadding}_enableGroupingOnResize(){let s;this.resizeObserver=new v.do(this.viewElement,c=>{(!s||s!==c.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),s=c.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(s){s.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Vr),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const s=this.viewLocale,c=s.t,p=Eo(s);return p.class="ck-toolbar__grouped-dropdown",p.panelPosition=s.uiLanguageDirection==="ltr"?"sw":"se",fo(p,this.groupedItems),p.buttonView.set({label:c("Show more items"),tooltip:!0,tooltipPosition:s.uiLanguageDirection==="rtl"?"se":"sw",icon:bn}),p}_updateFocusCycleableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(s=>{this.viewFocusables.add(s)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}var $n=u(26272),wn={};wn.styleTagTransform=he(),wn.setAttributes=z(),wn.insert=O().bind(null,"head"),wn.domAPI=M(),wn.insertStyleElement=te();var Dn=m()($n.Z,wn),or=$n.Z&&$n.Z.locals?$n.Z.locals:void 0;class mr extends null{constructor(s){super(s);const c=this.bindTemplate;this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusCycler=new FocusCycler({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:c.to("role"),"aria-label":c.to("ariaLabel")},children:this.items})}render(){super.render();for(const s of this.items)this.focusTracker.add(s.element);this.items.on("add",(s,c)=>{this.focusTracker.add(c.element)}),this.items.on("remove",(s,c)=>{this.focusTracker.remove(c.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}class ao extends null{constructor(s){super(s);const c=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",c.if("isVisible","ck-hidden",p=>!p)],role:"presentation"},children:this.children})}focus(){this.children.first.focus()}}class co extends null{constructor(s){super(s),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}var nn=u(21700),Jt={};Jt.styleTagTransform=he(),Jt.setAttributes=z(),Jt.insert=O().bind(null,"head"),Jt.domAPI=M(),Jt.insertStyleElement=te();var Wt=m()(nn.Z,Jt),No=nn.Z&&nn.Z.locals?nn.Z.locals:void 0;class Nr extends Pe{constructor(s){super(s);const c=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(),this.arrowView=this._createArrowView(),this.keystrokes=new v.VD,this.focusTracker=new v.Rh,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",c.to("class"),c.if("isVisible","ck-hidden",p=>!p),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(s,c)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),c())}),this.keystrokes.set("arrowleft",(s,c)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),c())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(){const s=new vt;return s.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),s.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),s.delegate("execute").to(this),s}_createArrowView(){const s=new vt,c=s.bindTemplate;return s.icon=Kr,s.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":c.to("isOn"),"aria-haspopup":!0,"aria-expanded":c.to("isOn",p=>String(p))}}),s.bind("isEnabled").to(this),s.bind("label").to(this),s.bind("tooltip").to(this),s.delegate("execute").to(this,"open"),s}}function Lr({emitter:f,activator:s,callback:c,contextElements:p}){f.listenTo(document,"mousedown",(P,Z)=>{if(!s())return;const Q=typeof Z.composedPath=="function"?Z.composedPath():[],$=typeof p=="function"?p():p;for(const ae of $)if(ae.contains(Z.target)||Q.includes(ae))return;c()})}var In=u(78177),Ot={};Ot.styleTagTransform=he(),Ot.setAttributes=z(),Ot.insert=O().bind(null,"head"),Ot.domAPI=M(),Ot.insertStyleElement=te();var Lo=m()(In.Z,Ot),yo=In.Z&&In.Z.locals?In.Z.locals:void 0,Gr=u(53128),kn={};kn.styleTagTransform=he(),kn.setAttributes=z(),kn.insert=O().bind(null,"head"),kn.domAPI=M(),kn.insertStyleElement=te();var Jr=m()(Gr.Z,kn),Bn=Gr.Z&&Gr.Z.locals?Gr.Z.locals:void 0;function Eo(f,s=pr){const c=new s(f),p=new Ir(f),P=new jn(f,c,p);return c.bind("isEnabled").to(P),c instanceof Nr?c.arrowView.bind("isOn").to(P,"isOpen"):c.bind("isOn").to(P,"isOpen"),xn(P),P}function fo(f,s,c={}){f.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),f.isOpen?Gn(f,s,c):f.once("change:isOpen",()=>Gn(f,s,c),{priority:"highest"}),c.enableActiveItemFocusOnDropdownOpen&&ir(f,()=>f.toolbarView.items.find(p=>p.isOn))}function Gn(f,s,c){const p=f.locale,P=p.t,Z=f.toolbarView=new un(p),Q=typeof s=="function"?s():s;Z.ariaLabel=c.ariaLabel||P("Dropdown toolbar"),c.maxWidth&&(Z.maxWidth=c.maxWidth),c.class&&(Z.class=c.class),c.isCompact&&(Z.isCompact=c.isCompact),c.isVertical&&(Z.isVertical=!0),Q instanceof V?Z.items.bindTo(Q).using($=>$):Z.items.addMany(Q),f.panelView.children.add(Z),Z.items.delegate("execute").to(f)}function we(f,s,c={}){f.isOpen?$e(f,s,c):f.once("change:isOpen",()=>$e(f,s,c),{priority:"highest"}),ir(f,()=>f.listView.items.find(p=>p instanceof ListItemView?p.children.first.isOn:!1))}function $e(f,s,c){const p=f.locale,P=f.listView=new ListView(p),Z=typeof s=="function"?s():s;P.ariaLabel=c.ariaLabel,P.role=c.role,P.items.bindTo(Z).using(Q=>{if(Q.type==="separator")return new ListSeparatorView(p);if(Q.type==="button"||Q.type==="switchbutton"){const $=new ListItemView(p);let ae;return Q.type==="button"?ae=new ButtonView(p):ae=new SwitchButtonView(p),ae.bind(...Object.keys(Q.model)).to(Q.model),ae.delegate("execute").to($),$.children.add(ae),$}return null}),f.panelView.children.add(P),P.items.delegate("execute").to(f)}function ir(f,s){f.on("change:isOpen",()=>{if(!f.isOpen)return;const c=s();c&&(typeof c.focus=="function"?c.focus():(0,v.KE)("ui-dropdown-focus-child-on-open-child-missing-focus",{view:c}))},{priority:v.tA.low-10})}function xn(f){Xr(f),br(f),Fr(f),Yr(f),wr(f),kr(f)}function Xr(f){f.on("render",()=>{Lr({emitter:f,activator:()=>f.isOpen,callback:()=>{f.isOpen=!1},contextElements:()=>[f.element,...f.focusTracker._elements]})})}function br(f){f.on("execute",s=>{s.source instanceof Or||(f.isOpen=!1)})}function Fr(f){f.focusTracker.on("change:isFocused",(s,c,p)=>{f.isOpen&&!p&&(f.isOpen=!1)})}function Yr(f){f.keystrokes.set("arrowdown",(s,c)=>{f.isOpen&&(f.panelView.focus(),c())}),f.keystrokes.set("arrowup",(s,c)=>{f.isOpen&&(f.panelView.focusLast(),c())})}function wr(f){f.on("change:isOpen",(s,c,p)=>{if(p)return;const P=f.panelView.element;P&&P.contains(v.global.document.activeElement)&&f.buttonView.focus()})}function kr(f){f.on("change:isOpen",(s,c,p)=>{p&&f.panelView.focus()},{priority:"low"})}function To(f,s,c){const p=new InputTextView(f.locale);return p.set({id:s,ariaDescribedById:c}),p.bind("isReadOnly").to(f,"isEnabled",P=>!P),p.bind("hasError").to(f,"errorText",P=>!!P),p.on("input",()=>{f.errorText=null}),f.bind("isEmpty","isFocused","placeholder").to(p),p}function vr(f,s,c){const p=new InputNumberView(f.locale);return p.set({id:s,ariaDescribedById:c,inputMode:"numeric"}),p.bind("isReadOnly").to(f,"isEnabled",P=>!P),p.bind("hasError").to(f,"errorText",P=>!!P),p.on("input",()=>{f.errorText=null}),f.bind("isEmpty","isFocused","placeholder").to(p),p}function Po(f,s,c){const p=createDropdown(f.locale);return p.set({id:s,ariaDescribedById:c}),p.bind("isEnabled").to(f),p}const sr=(f,s=0,c=1)=>f>c?c:f<s?s:f,Dt=(f,s=0,c=Math.pow(10,s))=>Math.round(c*f)/c,Jn={grad:360/400,turn:360,rad:360/(Math.PI*2)},zr=f=>Vn(ar(f)),ar=f=>(f[0]==="#"&&(f=f.substring(1)),f.length<6?{r:parseInt(f[0]+f[0],16),g:parseInt(f[1]+f[1],16),b:parseInt(f[2]+f[2],16),a:f.length===4?Dt(parseInt(f[3]+f[3],16)/255,2):1}:{r:parseInt(f.substring(0,2),16),g:parseInt(f.substring(2,4),16),b:parseInt(f.substring(4,6),16),a:f.length===8?Dt(parseInt(f.substring(6,8),16)/255,2):1}),yr=(f,s="deg")=>Number(f)*(Jn[s]||1),Co=f=>{const c=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(f);return c?_o({h:yr(c[1],c[2]),s:Number(c[3]),l:Number(c[4]),a:c[5]===void 0?1:Number(c[5])/(c[6]?100:1)}):{h:0,s:0,v:0,a:1}},go=null,_o=({h:f,s,l:c,a:p})=>(s*=(c<50?c:100-c)/100,{h:f,s:s>0?2*s/(c+s)*100:0,v:c+s,a:p}),po=f=>Xt(F(f)),xo=({h:f,s,v:c,a:p})=>{const P=(200-s)*c/100;return{h:Dt(f),s:Dt(P>0&&P<200?s*c/100/(P<=100?P:200-P)*100:0),l:Dt(P/2),a:Dt(p,2)}},b=f=>{const{h:s,s:c,v:p}=Lt(f);return`hsv(${s}, ${c}%, ${p}%)`},h=f=>{const{h:s,s:c,v:p,a:P}=Lt(f);return`hsva(${s}, ${c}%, ${p}%, ${P})`},y=f=>{const{h:s,s:c,l:p}=xo(f);return`hsl(${s}, ${c}%, ${p}%)`},R=f=>{const{h:s,s:c,l:p,a:P}=xo(f);return`hsla(${s}, ${c}%, ${p}%, ${P})`},F=({h:f,s,v:c,a:p})=>{f=f/360*6,s=s/100,c=c/100;const P=Math.floor(f),Z=c*(1-s),Q=c*(1-(f-P)*s),$=c*(1-(1-f+P)*s),ae=P%6;return{r:Dt([c,Q,Z,Z,$,c][ae]*255),g:Dt([$,c,c,Q,Z,Z][ae]*255),b:Dt([Z,Z,$,c,c,Q][ae]*255),a:Dt(p,2)}},Y=f=>{const{r:s,g:c,b:p}=F(f);return`rgb(${s}, ${c}, ${p})`},re=f=>{const{r:s,g:c,b:p,a:P}=F(f);return`rgba(${s}, ${c}, ${p}, ${P})`},ue=f=>{const c=/hsva?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(f);return c?Lt({h:yr(c[1],c[2]),s:Number(c[3]),v:Number(c[4]),a:c[5]===void 0?1:Number(c[5])/(c[6]?100:1)}):{h:0,s:0,v:0,a:1}},ye=null,Ce=f=>{const c=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(f);return c?Vn({r:Number(c[1])/(c[2]?100/255:1),g:Number(c[3])/(c[4]?100/255:1),b:Number(c[5])/(c[6]?100/255:1),a:c[7]===void 0?1:Number(c[7])/(c[8]?100:1)}):{h:0,s:0,v:0,a:1}},Je=null,qe=f=>{const s=f.toString(16);return s.length<2?"0"+s:s},Xt=({r:f,g:s,b:c,a:p})=>{const P=p<1?qe(Dt(p*255)):"";return"#"+qe(f)+qe(s)+qe(c)+P},Vn=({r:f,g:s,b:c,a:p})=>{const P=Math.max(f,s,c),Z=P-Math.min(f,s,c),Q=Z?P===f?(s-c)/Z:P===s?2+(c-f)/Z:4+(f-s)/Z:0;return{h:Dt(60*(Q<0?Q+6:Q)),s:Dt(P?Z/P*100:0),v:Dt(P/255*100),a:p}},Lt=f=>({h:round(f.h),s:round(f.s),v:round(f.v),a:round(f.a,2)}),jt=({r:f,g:s,b:c})=>({r:f,g:s,b:c}),Wr=({h:f,s,l:c})=>({h:f,s,l:c}),lo=f=>{const{h:s,s:c,v:p}=Lt(f);return{h:s,s:c,v:p}},A=(f,s)=>{if(f===s)return!0;for(const c in f)if(f[c]!==s[c])return!1;return!0},l=(f,s)=>f.replace(/\s/g,"")===s.replace(/\s/g,""),d=(f,s)=>f.toLowerCase()===s.toLowerCase()?!0:A(ar(f),ar(s)),g={},w=f=>{let s=g[f];return s||(s=document.createElement("template"),s.innerHTML=f,g[f]=s),s},k=(f,s,c)=>{f.dispatchEvent(new CustomEvent(s,{bubbles:!0,detail:c}))};let I=!1;const N=f=>"touches"in f,K=f=>I&&!N(f)?!1:(I||(I=N(f)),!0),ee=(f,s)=>{const c=N(s)?s.touches[0]:s,p=f.el.getBoundingClientRect();k(f.el,"move",f.getMove({x:sr((c.pageX-(p.left+window.pageXOffset))/p.width),y:sr((c.pageY-(p.top+window.pageYOffset))/p.height)}))},me=(f,s)=>{const c=s.keyCode;c>40||f.xy&&c<37||c<33||(s.preventDefault(),k(f.el,"move",f.getMove({x:c===39?.01:c===37?-.01:c===34?.05:c===33?-.05:c===35?1:c===36?-1:0,y:c===40?.01:c===38?-.01:0},!0)))};class ve{constructor(s,c,p,P){const Z=w(`<div role="slider" tabindex="0" part="${c}" ${p}><div part="${c}-pointer"></div></div>`);s.appendChild(Z.content.cloneNode(!0));const Q=s.querySelector(`[part=${c}]`);Q.addEventListener("mousedown",this),Q.addEventListener("touchstart",this),Q.addEventListener("keydown",this),this.el=Q,this.xy=P,this.nodes=[Q.firstChild,Q]}set dragging(s){const c=s?document.addEventListener:document.removeEventListener;c(I?"touchmove":"mousemove",this),c(I?"touchend":"mouseup",this)}handleEvent(s){switch(s.type){case"mousedown":case"touchstart":if(s.preventDefault(),!K(s)||!I&&s.button!=0)return;this.el.focus(),ee(this,s),this.dragging=!0;break;case"mousemove":case"touchmove":s.preventDefault(),ee(this,s);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":me(this,s);break}}style(s){s.forEach((c,p)=>{for(const P in c)this.nodes[p].style.setProperty(P,c[P])})}}class Ve extends ve{constructor(s){super(s,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:s}){this.h=s,this.style([{left:`${s/360*100}%`,color:y({h:s,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${Dt(s)}`)}getMove(s,c){return{h:c?sr(this.h+s.x*360,0,360):360*s.x}}}class ot extends ve{constructor(s){super(s,"saturation",'aria-label="Color"',!0)}update(s){this.hsva=s,this.style([{top:`${100-s.v}%`,left:`${s.s}%`,color:y(s)},{"background-color":y({h:s.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${Dt(s.s)}%, Brightness ${Dt(s.v)}%`)}getMove(s,c){return{s:c?sr(this.hsva.s+s.x*100,0,100):s.x*100,v:c?sr(this.hsva.v-s.y*100,0,100):Math.round(100-s.y*100)}}}var _t=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',rn="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",An="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}";const Xn=Symbol("same"),Er=Symbol("color"),cr=Symbol("hsva"),Yn=Symbol("update"),Tr=Symbol("parts"),Fo=Symbol("css"),Ao=Symbol("sliders");class So extends HTMLElement{static get observedAttributes(){return["color"]}get[Fo](){return[_t,rn,An]}get[Ao](){return[ot,Ve]}get color(){return this[Er]}set color(s){if(!this[Xn](s)){const c=this.colorModel.toHsva(s);this[Yn](c),this[Er]=s}}constructor(){super();const s=w(`<style>${this[Fo].join("")}</style>`),c=this.attachShadow({mode:"open"});c.appendChild(s.content.cloneNode(!0)),c.addEventListener("move",this),this[Tr]=this[Ao].map(p=>new p(c))}connectedCallback(){if(this.hasOwnProperty("color")){const s=this.color;delete this.color,this.color=s}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(s,c,p){const P=this.colorModel.fromAttr(p);this[Xn](P)||(this.color=P)}handleEvent(s){const c=this[cr],p=Ge(Ge({},c),s.detail);this[Yn](p);let P;!A(p,c)&&!this[Xn](P=this.colorModel.fromHsva(p))&&(this[Er]=P,k(this,"color-changed",{value:P}))}[Xn](s){return this.color&&this.colorModel.equal(s,this.color)}[Yn](s){this[cr]=s,this[Tr].forEach(c=>c.update(s))}}const Qr={defaultColor:"#000",toHsva:zr,fromHsva:({h:f,s,v:c})=>po({h:f,s,v:c,a:1}),equal:d,fromAttr:f=>f};class zo extends So{get colorModel(){return Qr}}class uo extends zo{}customElements.define("hex-color-picker",uo);var Wo=u(87101),E={};E.styleTagTransform=he(),E.setAttributes=z(),E.insert=O().bind(null,"head"),E.domAPI=M(),E.insertStyleElement=te();var x=m()(Wo.Z,E),U=Wo.Z&&Wo.Z.locals?Wo.Z.locals:void 0;const ne=150;class Ae extends null{constructor(s,c={}){super(s),this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const p=this.createCollection();c.hideInput||p.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:p}),this._config=c,this._debounceColorPickerEvent=debounce(P=>{this.set("color",P),this.fire("colorSelected",{color:this.color})},ne,{leading:!0}),this.on("set:color",(P,Z,Q)=>{P.return=convertColor(Q,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=tt(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),tt(this.color)!=tt(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),this.picker=global.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const s=document.createElement("style");s.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(s)}this.picker.addEventListener("color-changed",s=>{const p=s.detail.value;this._debounceColorPickerEvent(p)})}focus(){!this._config.hideInput&&(env.isGecko||env.isiOS||env.isSafari)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const p=[...this.picker.shadowRoot.children].filter(P=>P.getAttribute("role")==="slider").map(P=>new lt(P));this.slidersView=this.createCollection(),p.forEach(P=>{this.slidersView.add(P)})}_createInputRow(){const s=new rt,c=this._createColorInput();return new Zt(this.locale,[s,c])}_createColorInput(){const s=new LabeledFieldView(this.locale,createLabeledInputText),{t:c}=this.locale;return s.set({label:c("HEX"),class:"color-picker-hex-input"}),s.fieldView.bind("value").to(this,"_hexColor",p=>s.isFocused?s.fieldView.value:p.startsWith("#")?p.substring(1):p),s.fieldView.on("input",()=>{const p=s.fieldView.element.value;if(p){const P=p.trim(),Z=P.startsWith("#")?P.substring(1):P;[3,4,6,8].includes(Z.length)&&/(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})/.test(Z)&&this._debounceColorPickerEvent("#"+Z)}}),s}}function tt(f){let s=convertToHex(f);return s||(s="#000"),s.length===4&&(s="#"+[s[1],s[1],s[2],s[2],s[3],s[3]].join("")),s.toLowerCase()}class lt extends null{constructor(s){super(),this.element=s}focus(){this.element.focus()}}class rt extends null{constructor(s){super(s),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class Zt extends null{constructor(s,c){super(s),this.children=this.createCollection(c),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}}class Ft extends(0,v.Re)(v.FE){constructor(s){super(s),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(s,c){return this.find(p=>p.color===s.color)?this:super.add(s,c)}hasColor(s){return!!this.find(c=>c.color===s)}}var $o=u(92300),ho='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>';class jr extends null{constructor(s,{colors:c,columns:p,removeButtonLabel:P,documentColorsLabel:Z,documentColorsCount:Q,colorPickerLabel:$,focusTracker:ae,focusables:ft}){super(s);const wt=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=ae,this.items=this.createCollection(),this.colorDefinitions=c,this.columns=p,this.documentColors=new DocumentColorCollection,this.documentColorsCount=Q,this._focusables=ft,this._removeButtonLabel=P,this._colorPickerLabel=$,this._documentColorsLabel=Z,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",wt.if("isVisible","ck-hidden",to=>!to)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(s,c){const p=s.document,P=this.documentColorsCount;this.documentColors.clear();for(const Z of p.getRoots()){const Q=s.createRangeIn(Z);for(const $ of Q.getItems())if($.is("$textProxy")&&$.hasAttribute(c)&&(this._addColorToDocumentColors($.getAttribute(c)),this.documentColors.length>=P))return}}updateSelectedColors(){const s=this.documentColorsGrid,c=this.staticColorsGrid,p=this.selectedColor;c.selectedColor=p,s&&(s.selectedColor=p)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const s=Template.bind(this.documentColors,this.documentColors),c=new LabelView(this.locale);c.text=this._documentColorsLabel,c.extendTemplate({attributes:{class:["ck","ck-color-grid__label",s.if("isEmpty","ck-hidden")]}}),this.items.add(c),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker(),this.focus()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new ButtonView,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:colorPaletteIcon,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const s=new ButtonView;return s.set({withText:!0,icon:removeButtonIcon,label:this._removeButtonLabel}),s.class="ck-color-selector__remove-color",s.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),s.render(),s}_createStaticColorsGrid(){const s=new ColorGridView(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return s.on("execute",(c,p)=>{this.fire("execute",{value:p.value,source:"staticColorsGrid"})}),s}_createDocumentColorsGrid(){const s=Template.bind(this.documentColors,this.documentColors),c=new ColorGridView(this.locale,{columns:this.columns});return c.extendTemplate({attributes:{class:s.if("isEmpty","ck-hidden")}}),c.items.bindTo(this.documentColors).using(p=>{const P=new ColorTileView;return P.set({color:p.color,hasBorder:p.options&&p.options.hasBorder}),p.label&&P.set({label:p.label,tooltip:!0}),P.on("execute",()=>{this.fire("execute",{value:p.color,source:"documentColorsGrid"})}),P}),this.documentColors.on("change:isEmpty",(p,P,Z)=>{Z&&(c.selectedColor=null)}),c}_addColorToDocumentColors(s){const c=this.colorDefinitions.find(p=>p.color===s);c?this.documentColors.add(Object.assign({},c)):this.documentColors.add({color:s,label:s,options:{hasBorder:!1}})}}var Oo=u(49706),jo=u(76304);class mo extends null{constructor(s,{focusTracker:c,focusables:p,keystrokes:P,colorPickerViewConfig:Z}){super(s),this.items=this.createCollection(),this.focusTracker=c,this.keystrokes=P,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=p,this._colorPickerViewConfig=Z;const Q=this.bindTemplate,{saveButtonView:$,cancelButtonView:ae}=this._createActionButtons();this.saveButtonView=$,this.cancelButtonView=ae,this.actionBarView=this._createActionBarView({saveButtonView:$,cancelButtonView:ae}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",Q.if("isVisible","ck-hidden",ft=>!ft)]},children:this.items})}render(){super.render();const s=new ColorPickerView(this.locale,Ge({},this._colorPickerViewConfig));this.colorPickerView=s,this.colorPickerView.render(),this.selectedColor&&(s.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(c,p,P)=>{s.color=P}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}_executeOnEnterPress(){this.keystrokes.set("enter",s=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&(this.fire("execute",{value:this.selectedColor}),s.stopPropagation(),s.preventDefault())})}_stopPropagationOnArrowsKeys(){const s=c=>c.stopPropagation();this.keystrokes.set("arrowright",s),this.keystrokes.set("arrowleft",s),this.keystrokes.set("arrowup",s),this.keystrokes.set("arrowdown",s)}_addColorPickersElementsToFocusTracker(){for(const c of this.colorPickerView.slidersView)this.focusTracker.add(c.element),this._focusables.add(c);const s=this.colorPickerView.hexInputRow.children.get(1);s.element&&(this.focusTracker.add(s.element),this._focusables.add(s)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:s,cancelButtonView:c}){const p=new View,P=this.createCollection();return P.add(s),P.add(c),p.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:P}),p}_createActionButtons(){const s=this.locale,c=s.t,p=new ButtonView(s),P=new ButtonView(s);return p.set({icon:checkButtonIcon,class:"ck-button-save",type:"button",withText:!1,label:c("Accept")}),P.set({icon:cancelButtonIcon,class:"ck-button-cancel",type:"button",withText:!1,label:c("Cancel")}),p.on("execute",()=>{this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),P.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:p,cancelButtonView:P}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(s,c)=>{this.fire("execute",{value:c.color,source:"colorPicker"}),this.set("selectedColor",c.color)})}}var on=u(84780),vn={};vn.styleTagTransform=he(),vn.setAttributes=z(),vn.insert=O().bind(null,"head"),vn.domAPI=M(),vn.insertStyleElement=te();var Qn=m()(on.Z,vn),qr=on.Z&&on.Z.locals?on.Z.locals:void 0;class bo extends null{constructor(s,{colors:c,columns:p,removeButtonLabel:P,documentColorsLabel:Z,documentColorsCount:Q,colorPickerLabel:$,colorPickerViewConfig:ae}){super(s),this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusables=new ViewCollection,this._colorPickerViewConfig=ae,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new ColorGridsFragmentView(s,{colors:c,columns:p,removeButtonLabel:P,documentColorsLabel:Z,documentColorsCount:Q,colorPickerLabel:$,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new ColorPickerFragmentView(s,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:ae}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(ft,wt,to)=>{this.colorGridsFragmentView.set("selectedColor",to),this.colorPickerFragmentView.set("selectedColor",to)}),this.colorGridsFragmentView.on("change:selectedColor",(ft,wt,to)=>{this.set("selectedColor",to)}),this.colorPickerFragmentView.on("change:selectedColor",(ft,wt,to)=>{this.set("selectedColor",to)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(s,c){this.colorGridsFragmentView.updateDocumentColors(s,c)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class Xi{constructor(s){this._components=new Map,this.editor=s}*names(){for(const s of this._components.values())yield s.originalName}add(s,c){this._components.set(ui(s),{callback:c,originalName:s})}create(s){if(!this.has(s))throw new v.Bb("componentfactory-item-missing",this,{name:s});return this._components.get(ui(s)).callback(this.editor.locale)}has(s){return this._components.has(ui(s))}}function ui(f){return String(f).toLowerCase()}var hi=u(23132),ei=u(76159),Ro={};Ro.styleTagTransform=he(),Ro.setAttributes=z(),Ro.insert=O().bind(null,"head"),Ro.domAPI=M(),Ro.insertStyleElement=te();var Yi=m()(ei.Z,Ro),Cs=ei.Z&&ei.Z.locals?ei.Z.locals:void 0;const xi=(0,v.nn)("px"),Ai=v.global.document.body;class lr extends Pe{constructor(s){super(s);const c=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",c.to("position",p=>`ck-balloon-panel_${p}`),c.if("isVisible","ck-balloon-panel_visible"),c.if("withArrow","ck-balloon-panel_with-arrow"),c.to("class")],style:{top:c.to("top",xi),left:c.to("left",xi)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(s){this.show();const c=lr.defaultPositions,p=Object.assign({},{element:this.element,positions:[c.southArrowNorth,c.southArrowNorthMiddleWest,c.southArrowNorthMiddleEast,c.southArrowNorthWest,c.southArrowNorthEast,c.northArrowSouth,c.northArrowSouthMiddleWest,c.northArrowSouthMiddleEast,c.northArrowSouthWest,c.northArrowSouthEast,c.viewportStickyNorth],limiter:Ai,fitInViewport:!0},s),P=lr._getOptimalPosition(p),Z=parseInt(P.left),Q=parseInt(P.top),$=P.name,ae=P.config||{},{withArrow:ft=!0}=ae;this.top=Q,this.left=Z,this.position=$,this.withArrow=ft}pin(s){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(s):this._stopPinning()},this._startPinning(s),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(s){this.attachTo(s);const c=fi(s.target),p=s.limiter?fi(s.limiter):Ai;this.listenTo(v.global.document,"scroll",(P,Z)=>{const Q=Z.target,$=c&&Q.contains(c),ae=p&&Q.contains(p);($||ae||!c||!p)&&this.attachTo(s)},{useCapture:!0}),this.listenTo(v.global.window,"resize",()=>{this.attachTo(s)})}_stopPinning(){this.stopListening(v.global.document,"scroll"),this.stopListening(v.global.window,"resize")}}lr.arrowSideOffset=25,lr.arrowHeightOffset=10,lr.stickyVerticalOffset=20,lr._getOptimalPosition=v.xZ,lr.defaultPositions=Si();function fi(f){return(0,hi.Z)(f)?f:(0,v.bR)(f)?f.commonAncestorContainer:typeof f=="function"?fi(f()):null}function Si(f={}){const{sideOffset:s=lr.arrowSideOffset,heightOffset:c=lr.arrowHeightOffset,stickyVerticalOffset:p=lr.stickyVerticalOffset,config:P}=f;return{northWestArrowSouthWest:($,ae)=>Ge({top:Z($,ae),left:$.left-s,name:"arrow_sw"},P&&{config:P}),northWestArrowSouthMiddleWest:($,ae)=>Ge({top:Z($,ae),left:$.left-ae.width*.25-s,name:"arrow_smw"},P&&{config:P}),northWestArrowSouth:($,ae)=>Ge({top:Z($,ae),left:$.left-ae.width/2,name:"arrow_s"},P&&{config:P}),northWestArrowSouthMiddleEast:($,ae)=>Ge({top:Z($,ae),left:$.left-ae.width*.75+s,name:"arrow_sme"},P&&{config:P}),northWestArrowSouthEast:($,ae)=>Ge({top:Z($,ae),left:$.left-ae.width+s,name:"arrow_se"},P&&{config:P}),northArrowSouthWest:($,ae)=>Ge({top:Z($,ae),left:$.left+$.width/2-s,name:"arrow_sw"},P&&{config:P}),northArrowSouthMiddleWest:($,ae)=>Ge({top:Z($,ae),left:$.left+$.width/2-ae.width*.25-s,name:"arrow_smw"},P&&{config:P}),northArrowSouth:($,ae)=>Ge({top:Z($,ae),left:$.left+$.width/2-ae.width/2,name:"arrow_s"},P&&{config:P}),northArrowSouthMiddleEast:($,ae)=>Ge({top:Z($,ae),left:$.left+$.width/2-ae.width*.75+s,name:"arrow_sme"},P&&{config:P}),northArrowSouthEast:($,ae)=>Ge({top:Z($,ae),left:$.left+$.width/2-ae.width+s,name:"arrow_se"},P&&{config:P}),northEastArrowSouthWest:($,ae)=>Ge({top:Z($,ae),left:$.right-s,name:"arrow_sw"},P&&{config:P}),northEastArrowSouthMiddleWest:($,ae)=>Ge({top:Z($,ae),left:$.right-ae.width*.25-s,name:"arrow_smw"},P&&{config:P}),northEastArrowSouth:($,ae)=>Ge({top:Z($,ae),left:$.right-ae.width/2,name:"arrow_s"},P&&{config:P}),northEastArrowSouthMiddleEast:($,ae)=>Ge({top:Z($,ae),left:$.right-ae.width*.75+s,name:"arrow_sme"},P&&{config:P}),northEastArrowSouthEast:($,ae)=>Ge({top:Z($,ae),left:$.right-ae.width+s,name:"arrow_se"},P&&{config:P}),southWestArrowNorthWest:$=>Ge({top:Q($),left:$.left-s,name:"arrow_nw"},P&&{config:P}),southWestArrowNorthMiddleWest:($,ae)=>Ge({top:Q($),left:$.left-ae.width*.25-s,name:"arrow_nmw"},P&&{config:P}),southWestArrowNorth:($,ae)=>Ge({top:Q($),left:$.left-ae.width/2,name:"arrow_n"},P&&{config:P}),southWestArrowNorthMiddleEast:($,ae)=>Ge({top:Q($),left:$.left-ae.width*.75+s,name:"arrow_nme"},P&&{config:P}),southWestArrowNorthEast:($,ae)=>Ge({top:Q($),left:$.left-ae.width+s,name:"arrow_ne"},P&&{config:P}),southArrowNorthWest:$=>Ge({top:Q($),left:$.left+$.width/2-s,name:"arrow_nw"},P&&{config:P}),southArrowNorthMiddleWest:($,ae)=>Ge({top:Q($),left:$.left+$.width/2-ae.width*.25-s,name:"arrow_nmw"},P&&{config:P}),southArrowNorth:($,ae)=>Ge({top:Q($),left:$.left+$.width/2-ae.width/2,name:"arrow_n"},P&&{config:P}),southArrowNorthMiddleEast:($,ae)=>Ge({top:Q($),left:$.left+$.width/2-ae.width*.75+s,name:"arrow_nme"},P&&{config:P}),southArrowNorthEast:($,ae)=>Ge({top:Q($),left:$.left+$.width/2-ae.width+s,name:"arrow_ne"},P&&{config:P}),southEastArrowNorthWest:$=>Ge({top:Q($),left:$.right-s,name:"arrow_nw"},P&&{config:P}),southEastArrowNorthMiddleWest:($,ae)=>Ge({top:Q($),left:$.right-ae.width*.25-s,name:"arrow_nmw"},P&&{config:P}),southEastArrowNorth:($,ae)=>Ge({top:Q($),left:$.right-ae.width/2,name:"arrow_n"},P&&{config:P}),southEastArrowNorthMiddleEast:($,ae)=>Ge({top:Q($),left:$.right-ae.width*.75+s,name:"arrow_nme"},P&&{config:P}),southEastArrowNorthEast:($,ae)=>Ge({top:Q($),left:$.right-ae.width+s,name:"arrow_ne"},P&&{config:P}),westArrowEast:($,ae)=>Ge({top:$.top+$.height/2-ae.height/2,left:$.left-ae.width-c,name:"arrow_e"},P&&{config:P}),eastArrowWest:($,ae)=>Ge({top:$.top+$.height/2-ae.height/2,left:$.right+c,name:"arrow_w"},P&&{config:P}),viewportStickyNorth:($,ae,ft)=>$.getIntersection(ft)?{top:ft.top+p,left:$.left+$.width/2-ae.width/2,name:"arrowless",config:Ge({withArrow:!1},P)}:null};function Z($,ae){return $.top-ae.height-c}function Q($){return $.bottom+c}}var Qi=u(67811),ti=u(35756),Zo={};Zo.styleTagTransform=he(),Zo.setAttributes=z(),Zo.insert=O().bind(null,"head"),Zo.domAPI=M(),Zo.insertStyleElement=te();var xs=m()(ti.Z,Zo),As=ti.Z&&ti.Z.locals?ti.Z.locals:void 0;const Oi="ck-tooltip";class hn extends(0,v.Xu)(){constructor(s){if(super(),this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._resizeObserver=null,hn._editors.add(s),hn._instance)return hn._instance;hn._instance=this,this.tooltipTextView=new Pe(s.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new lr(s.locale),this.balloonPanelView.class=Oi,this.balloonPanelView.content.add(this.tooltipTextView),this._pinTooltipDebounced=(0,Qi.Z)(this._pinTooltip,600),this.listenTo(v.global.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(v.global.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(v.global.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(v.global.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(v.global.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(s){const c=s.ui.view&&s.ui.view.body;hn._editors.delete(s),this.stopListening(s.ui),c&&c.has(this.balloonPanelView)&&c.remove(this.balloonPanelView),hn._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),hn._instance=null)}static getPositioningFunctions(s){const c=hn.defaultBalloonPositions;return{s:[c.southArrowNorth,c.southArrowNorthEast,c.southArrowNorthWest],n:[c.northArrowSouth],e:[c.eastArrowWest],w:[c.westArrowEast],sw:[c.southArrowNorthEast],se:[c.southArrowNorthWest]}[s]}_onEnterOrFocus(s,{target:c}){const p=gi(c);p&&p!==this._currentElementWithTooltip&&(this._unpinTooltip(),this._pinTooltipDebounced(p,qi(p)))}_onLeaveOrBlur(s,{target:c,relatedTarget:p}){if(s.name==="mouseleave"){if(!(0,hi.Z)(c)||this._currentElementWithTooltip&&c!==this._currentElementWithTooltip)return;const P=gi(c),Z=gi(p);P&&P!==Z&&this._unpinTooltip()}else{if(this._currentElementWithTooltip&&c!==this._currentElementWithTooltip)return;this._unpinTooltip()}}_onScroll(s,{target:c}){this._currentElementWithTooltip&&(c.contains(this.balloonPanelView.element)&&c.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(s,{text:c,position:p,cssClass:P}){const Z=(0,v.Ps)(hn._editors.values()).ui.view.body;Z.has(this.balloonPanelView)||Z.add(this.balloonPanelView),this.tooltipTextView.text=c,this.balloonPanelView.pin({target:s,positions:hn.getPositioningFunctions(p)}),this._resizeObserver=new v.do(s,()=>{(0,v.pn)(s)||this._unpinTooltip()}),this.balloonPanelView.class=[Oi,P].filter(Q=>Q).join(" ");for(const Q of hn._editors)this.listenTo(Q.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=s,this._currentTooltipPosition=p}_unpinTooltip(){this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const s of hn._editors)this.stopListening(s.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._resizeObserver&&this._resizeObserver.destroy()}_updateTooltipPosition(){if(!(0,v.pn)(this._currentElementWithTooltip)){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:hn.getPositioningFunctions(this._currentTooltipPosition)})}}hn.defaultBalloonPositions=Si({heightOffset:5,sideOffset:13}),hn._editors=new Set,hn._instance=null;function gi(f){return(0,hi.Z)(f)?f.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function qi(f){return{text:f.dataset.ckeTooltipText,position:f.dataset.ckeTooltipPosition||"s",cssClass:f.dataset.ckeTooltipClass||""}}var es=u(20057),ts=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`;const Ri=53,_i=10,ns=50,rs=350,Mi="Powered by",ni={top:-99999,left:-99999,name:"invalid",config:{withArrow:!1}};class os extends(0,v.Xu)(){constructor(s){super(),this.editor=s,this._balloonView=null,this._lastFocusedEditableElement=null,this._showBalloonThrottled=(0,es.Z)(this._showBalloon.bind(this),50,{leading:!0}),s.on("ready",this._handleEditorReady.bind(this))}destroy(){const s=this._balloonView;s&&(s.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const s=this.editor,c=!!s.config.get("ui.poweredBy.forceVisible");!c&&(0,v.Tx)(s.config.get("licenseKey"))==="VALID"||s.ui.view&&(s.ui.focusTracker.on("change:isFocused",(p,P,Z)=>{this._updateLastFocusedEditableElement(),Z?this._showBalloon():this._hideBalloon()}),s.ui.focusTracker.on("change:focusedElement",(p,P,Z)=>{this._updateLastFocusedEditableElement(),Z&&this._showBalloon()}),s.ui.on("update",()=>{this._showBalloonThrottled()}))}_createBalloonView(){const s=this.editor,c=this._balloonView=new lr,p=pi(s),P=new is(s.locale,p.label);c.content.add(P),c.set({class:"ck-powered-by-balloon"}),s.ui.view.body.add(c),s.ui.focusTracker.add(c.element),this._balloonView=c}_showBalloon(){if(!this._lastFocusedEditableElement)return;const s=ss(this.editor,this._lastFocusedEditableElement);s&&(this._balloonView||this._createBalloonView(),this._balloonView.pin(s))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_updateLastFocusedEditableElement(){const s=this.editor,c=s.ui.focusTracker.isFocused,p=s.ui.focusTracker.focusedElement;if(!c||!p){this._lastFocusedEditableElement=null;return}const P=Array.from(s.ui.getEditableElementsNames()).map(Z=>s.ui.getEditableElement(Z));P.includes(p)?this._lastFocusedEditableElement=p:this._lastFocusedEditableElement=P[0]}}class is extends Pe{constructor(s,c){super(s);const p=new Xe,P=this.bindTemplate;p.set({content:ts,isColorInherited:!1}),p.extendTemplate({attributes:{style:{width:Ri+"px",height:_i+"px"}}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...c?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[c]}]:[],p],on:{dragstart:P.to(Z=>Z.preventDefault())}}]})}}function ss(f,s){const c=pi(f),p=c.side==="right"?as(s,c):Di(s,c);return{target:s,positions:[p]}}function as(f,s){return Ii(f,s,(c,p)=>c.left+c.width-p.width-s.horizontalOffset)}function Di(f,s){return Ii(f,s,c=>c.left+s.horizontalOffset)}function Ii(f,s,c){return(p,P)=>{const Z=p.getVisible();if(!Z||p.width<rs||p.height<ns)return ni;let Q;s.position==="inside"?Q=p.bottom-P.height:Q=p.bottom-P.height/2,Q-=s.verticalOffset;const $=c(p,P);if(s.position==="inside"){const ae=P.clone().moveTo($,Q);if(ae.getIntersectionArea(Z)<ae.getArea())return ni}else{const ae=(0,v.wm)(f);if(ae){const ft=new v.UL(ae),wt=Z.bottom+P.height/2>ft.bottom,to=s.side==="left"?p.left<ft.left:p.right>ft.right;if(wt||to)return ni}}return{top:Q,left:$,name:`position_${s.position}-side_${s.side}`,config:{withArrow:!1}}}}function pi(f){const s=f.config.get("ui.poweredBy"),c=s&&s.position||"border";return Ge({position:c,label:Mi,verticalOffset:c==="inside"?5:0,horizontalOffset:5,side:f.locale.contentLanguageDirection==="ltr"?"right":"left"},s)}class Bi extends(0,v.Re)(){constructor(s){super(),this.isReady=!1,this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[];const c=s.editing.view;this.editor=s,this.componentFactory=new Xi(s),this.focusTracker=new v.Rh,this.tooltipManager=new hn(s),this.poweredBy=new os(s),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this.isReady=!0}),this.listenTo(c.document,"layoutChanged",this.update.bind(this)),this.listenTo(c,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();for(const s of this._editableElementsMap.values())s.ckeditorInstance=null,this.editor.keystrokes.stopListening(s);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(s,c){this._editableElementsMap.set(s,c),c.ckeditorInstance||(c.ckeditorInstance=this.editor),this.focusTracker.add(c);const p=()=>{this.editor.editing.view.getDomRoot(s)||this.editor.keystrokes.listenTo(c)};this.isReady?p():this.once("ready",p)}removeEditableElement(s){const c=this._editableElementsMap.get(s);c&&(this._editableElementsMap.delete(s),this.editor.keystrokes.stopListening(c),this.focusTracker.remove(c),c.ckeditorInstance=null)}getEditableElement(s="main"){return this._editableElementsMap.get(s)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(s,c={}){s.isRendered?(this.focusTracker.add(s.element),this.editor.keystrokes.listenTo(s.element)):s.once("render",()=>{this.focusTracker.add(s.element),this.editor.keystrokes.listenTo(s.element)}),this._focusableToolbarDefinitions.push({toolbarView:s,options:c})}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_readViewportOffsetFromConfig(){const s=this.editor,c=s.config.get("ui.viewportOffset");if(c)return c;const p=s.config.get("toolbar.viewportTopOffset");return p?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:p}):{top:0}}_initFocusTracking(){const s=this.editor,c=s.editing.view;let p,P;s.keystrokes.set("Alt+F10",(Z,Q)=>{const $=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes($)&&!Array.from(c.domRoots.values()).includes($)&&(p=$);const ae=this._getCurrentFocusedToolbarDefinition();(!ae||!P)&&(P=this._getFocusableCandidateToolbarDefinitions());for(let ft=0;ft<P.length;ft++){const wt=P.shift();if(P.push(wt),wt!==ae&&this._focusFocusableCandidateToolbar(wt)){ae&&ae.options.afterBlur&&ae.options.afterBlur();break}}Q()}),s.keystrokes.set("Esc",(Z,Q)=>{const $=this._getCurrentFocusedToolbarDefinition();$&&(p?(p.focus(),p=null):s.editing.view.focus(),$.options.afterBlur&&$.options.afterBlur(),Q())})}_getFocusableCandidateToolbarDefinitions(){const s=[];for(const c of this._focusableToolbarDefinitions){const{toolbarView:p,options:P}=c;((0,v.pn)(p.element)||P.beforeFocus)&&s.push(c)}return s.sort((c,p)=>Go(c)-Go(p)),s}_getCurrentFocusedToolbarDefinition(){for(const s of this._focusableToolbarDefinitions)if(s.toolbarView.element&&s.toolbarView.element.contains(this.focusTracker.focusedElement))return s;return null}_focusFocusableCandidateToolbar(s){const{toolbarView:c,options:{beforeFocus:p}}=s;return p&&p(),(0,v.pn)(c.element)?(c.focus(),!0):!1}_handleScrollToTheSelection(s,c){const p=Ge({top:0,bottom:0,left:0,right:0},this.viewportOffset);c.viewportOffset.top+=p.top,c.viewportOffset.bottom+=p.bottom,c.viewportOffset.left+=p.left,c.viewportOffset.right+=p.right}}function Go(f){const{toolbarView:s,options:c}=f;let p=10;return(0,v.pn)(s.element)&&p--,c.isContextual&&p--,p}var ri=u(36662),Mo={};Mo.styleTagTransform=he(),Mo.setAttributes=z(),Mo.insert=O().bind(null,"head"),Mo.domAPI=M(),Mo.insertStyleElement=te();var Ss=m()(ri.Z,Mo),Os=ri.Z&&ri.Z.locals?ri.Z.locals:void 0;class Vi extends Pe{constructor(s){super(s),this.body=new Yt(s)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class Ni extends Vi{constructor(s){super(s),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:s.uiLanguageDirection,lang:s.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const s=this.t,c=new Mr;return c.text=s("Rich Text Editor"),c.extendTemplate({attributes:{class:"ck-voice-label"}}),c}}class cs extends Pe{constructor(s,c,p){super(s),this.name=null,this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:s.contentLanguage,dir:s.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=p,this._hasExternalElement=!!this._editableElement,this._editingView=c}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const s=this._editingView;s.isRenderingInProgress?p(this):c(this);function c(P){s.change(Z=>{const Q=s.document.getRoot(P.name);Z.addClass(P.isFocused?"ck-focused":"ck-blurred",Q),Z.removeClass(P.isFocused?"ck-blurred":"ck-focused",Q)})}function p(P){s.once("change:isRenderingInProgress",(Z,Q,$)=>{$?p(P):c(P)})}}}class ls extends cs{constructor(s,c,p,P={}){super(s,c,p);const Z=s.t;this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}}),this._generateLabel=P.label||(()=>Z("Editor editing area: %0",this.name))}render(){super.render();const s=this._editingView;s.change(c=>{const p=s.document.getRoot(this.name);c.setAttribute("aria-label",this._generateLabel(this),p)})}}var Jo=u(63617),Uo={};Uo.styleTagTransform=he(),Uo.setAttributes=z(),Uo.insert=O().bind(null,"head"),Uo.domAPI=M(),Uo.insertStyleElement=te();var mi=m()(Jo.Z,Uo),Rs=Jo.Z&&Jo.Z.locals?Jo.Z.locals:void 0;class Ms extends null{constructor(s,c={}){super(s);const p=this.bindTemplate;this.set("label",c.label||""),this.set("class",c.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",p.to("class")]},children:this.children});const P=new View(s);P.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"]},children:[{text:p.to("label")}]}),this.children.add(P)}}class ds extends null{constructor(s){super(s);const c=this.bindTemplate;this.setTemplate({tag:"iframe",attributes:{class:["ck","ck-reset_all"],sandbox:"allow-same-origin allow-scripts"},on:{load:c.to("loaded")}})}render(){return new Promise(s=>(this.on("loaded",s),super.render()))}}class us extends null{static get pluginName(){return"Notification"}init(){this.on("show:warning",(s,c)=>{window.alert(c.message)},{priority:"lowest"})}showSuccess(s,c={}){this._showNotification({message:s,type:"success",namespace:c.namespace,title:c.title})}showInfo(s,c={}){this._showNotification({message:s,type:"info",namespace:c.namespace,title:c.title})}showWarning(s,c={}){this._showNotification({message:s,type:"warning",namespace:c.namespace,title:c.title})}_showNotification(s){const c=s.namespace?`show:${s.type}:${s.namespace}`:`show:${s.type}`;this.fire(c,{message:s.message,type:s.type,title:s.title||""})}}var hs=u(43670);class Ds extends(0,v.Re)(){constructor(s,c){super(),c&&(0,hs.Z)(this,c),s&&this.set(s)}}var Is='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',Bs='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',oi=u(65279),Ho={};Ho.styleTagTransform=he(),Ho.setAttributes=z(),Ho.insert=O().bind(null,"head"),Ho.domAPI=M(),Ho.insertStyleElement=te();var Do=m()(oi.Z,Ho),Vs=oi.Z&&oi.Z.locals?oi.Z.locals:void 0,Zr=u(94656),Pr={};Pr.styleTagTransform=he(),Pr.setAttributes=z(),Pr.insert=O().bind(null,"head"),Pr.domAPI=M(),Pr.insertStyleElement=te();var ii=m()(Zr.Z,Pr),It=Zr.Z&&Zr.Z.locals?Zr.Z.locals:void 0;const qn=(0,v.nn)("px");class Bt extends null{static get pluginName(){return"ContextualBalloon"}constructor(s){super(s),this._viewToStack=new Map,this._idToStack=new Map,this._view=null,this._rotatorView=null,this._fakePanelsView=null,this.positionLimiter=()=>{const c=this.editor.editing.view,P=c.document.selection.editableElement;return P?c.domConverter.mapViewToDom(P.root):null},this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(s){return Array.from(this._viewToStack.keys()).includes(s)}add(s){if(this._view||this._createPanelView(),this.hasView(s.view))throw new CKEditorError("contextualballoon-add-view-exist",[this,s]);const c=s.stackId||"main";if(!this._idToStack.has(c)){this._idToStack.set(c,new Map([[s.view,s]])),this._viewToStack.set(s.view,this._idToStack.get(c)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||s.singleViewMode)&&this.showStack(c);return}const p=this._idToStack.get(c);s.singleViewMode&&this.showStack(c),p.set(s.view,s),this._viewToStack.set(s.view,p),p===this._visibleStack&&this._showView(s)}remove(s){if(!this.hasView(s))throw new CKEditorError("contextualballoon-remove-view-not-exist",[this,s]);const c=this._viewToStack.get(s);this._singleViewMode&&this.visibleView===s&&(this._singleViewMode=!1),this.visibleView===s&&(c.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(c.values())[c.size-2])),c.size===1?(this._idToStack.delete(this._getStackId(c)),this._numberOfStacks=this._idToStack.size):c.delete(s),this._viewToStack.delete(s)}updatePosition(s){s&&(this._visibleStack.get(this.visibleView).position=s),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(s){this.visibleStack=s;const c=this._idToStack.get(s);if(!c)throw new CKEditorError("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==c&&this._showView(Array.from(c.values()).pop())}_createPanelView(){this._view=new BalloonPanelView(this.editor.locale),this.editor.ui.view.body.add(this._view),this.editor.ui.focusTracker.add(this._view.element),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(s){return Array.from(this._idToStack.entries()).find(p=>p[1]===s)[0]}_showNextStack(){const s=Array.from(this._idToStack.values());let c=s.indexOf(this._visibleStack)+1;s[c]||(c=0),this.showStack(this._getStackId(s[c]))}_showPrevStack(){const s=Array.from(this._idToStack.values());let c=s.indexOf(this._visibleStack)-1;s[c]||(c=s.length-1),this.showStack(this._getStackId(s[c]))}_createRotatorView(){const s=new fs(this.editor.locale),c=this.editor.locale.t;return this.view.content.add(s),s.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(p,P)=>!P&&p>1),s.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),s.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(p,P)=>{if(P<2)return"";const Z=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return c("%0 of %1",[Z,P])}),s.buttonNextView.on("execute",()=>{s.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),s.buttonPrevView.on("execute",()=>{s.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),s}_createFakePanelsView(){const s=new wo(this.editor.locale,this.view);return s.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(c,p)=>!p&&c>=2?Math.min(c-1,2):0),s.listenTo(this.view,"change:top",()=>s.updatePosition()),s.listenTo(this.view,"change:left",()=>s.updatePosition()),this.editor.ui.view.body.add(s),s}_showView({view:s,balloonClassName:c="",withArrow:p=!0,singleViewMode:P=!1}){this.view.class=c,this.view.withArrow=p,this._rotatorView.showView(s),this.visibleView=s,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),P&&(this._singleViewMode=!0)}_getBalloonPosition(){let s=Array.from(this._visibleStack.values()).pop().position;return s&&(s.limiter||(s=Object.assign({},s,{limiter:this.positionLimiter})),s=Object.assign({},s,{viewportOffsetConfig:this.editor.ui.viewportOffset})),s}}class fs extends null{constructor(s){super(s);const c=s.t,p=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new FocusTracker,this.buttonPrevView=this._createButtonView(c("Previous"),prevIcon),this.buttonNextView=this._createButtonView(c("Next"),nextIcon),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",p.to("isNavigationVisible",P=>P?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:p.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(s){this.hideView(),this.content.add(s)}hideView(){this.content.clear()}_createButtonView(s,c){const p=new ButtonView(this.locale);return p.set({label:s,icon:c,tooltip:!0}),p}}class wo extends null{constructor(s,c){super(s);const p=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=c,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",p.to("numberOfPanels",P=>P?"":"ck-hidden")],style:{top:p.to("top",qn),left:p.to("left",qn),width:p.to("width",qn),height:p.to("height",qn)}},children:this.content}),this.on("change:numberOfPanels",(P,Z,Q,$)=>{Q>$?this._addPanels(Q-$):this._removePanels($-Q),this.updatePosition()})}_addPanels(s){for(;s--;){const c=new View;c.setTemplate({tag:"div"}),this.content.add(c),this.registerChild(c)}}_removePanels(s){for(;s--;){const c=this.content.last;this.content.remove(c),this.deregisterChild(c),c.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:s,left:c}=this._balloonPanelView,{width:p,height:P}=new Rect(this._balloonPanelView.element);Object.assign(this,{top:s,left:c,width:p,height:P})}}}var eo=u(74315),ge={};ge.styleTagTransform=he(),ge.setAttributes=z(),ge.insert=O().bind(null,"head"),ge.domAPI=M(),ge.insertStyleElement=te();var si=m()(eo.Z,ge),gs=eo.Z&&eo.Z.locals?eo.Z.locals:void 0;const Io=(0,v.nn)("px");class Li extends Pe{constructor(s){super(s);const c=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Ee({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:c.to("isSticky",p=>p?"block":"none"),height:c.to("isSticky",p=>p?Io(this._contentPanelRect.height):null)}}}).render(),this._contentPanel=new Ee({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",c.if("isSticky","ck-sticky-panel__content_sticky"),c.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:c.to("isSticky",p=>p?Io(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:c.to("_stickyTopOffset",p=>p&&Io(p)),bottom:c.to("_stickyBottomOffset",p=>p&&Io(p)),marginLeft:c.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this._contentPanel]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(v.global.document,"scroll",(s,c)=>{this.checkIfShouldBeSticky(c.target)},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(s){if(!this.limiterElement||!this.isActive){this._unstick();return}const c=(0,v.hI)(this.limiterElement);if(s&&!c.includes(s))return;const p=(0,v.D_)(c,this.viewportTopOffset),P=new v.UL(this.limiterElement);if(p&&P.top<p.top){const Z=P.getIntersection(p);if(Z){const Q=p.top;if(Q+this._contentPanelRect.height+this.limiterBottomOffset>Z.bottom){const $=Math.max(P.bottom-p.bottom,0)+this.limiterBottomOffset;P.bottom-$>P.top+this._contentPanelRect.height?this._stickToBottomOfLimiter($):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<P.height?this._stickToTopOfAncestors(Q):this._unstick()}else this._unstick()}else this._unstick()}_stickToTopOfAncestors(s){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=s,this._stickyBottomOffset=null,this._marginLeft=Io(-v.global.window.scrollX)}_stickToBottomOfLimiter(s){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=s,this._marginLeft=Io(-v.global.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new v.UL(this._contentPanel)}}const bi=(0,v.nn)("px");class Ns extends null{static get pluginName(){return"BalloonToolbar"}static get requires(){return[ContextualBalloon]}constructor(s){super(s),this._resizeObserver=null,this._balloonConfig=normalizeToolbarConfig(s.config.get("balloonToolbar")),this.toolbarView=this._createToolbarView(),this.focusTracker=new FocusTracker,s.ui.once("ready",()=>{this.focusTracker.add(s.ui.getEditableElement()),this.focusTracker.add(this.toolbarView.element)}),s.ui.addToolbar(this.toolbarView,{beforeFocus:()=>this.show(!0),afterBlur:()=>this.hide(),isContextual:!0}),this._balloon=s.plugins.get(ContextualBalloon),this._fireSelectionChangeDebounced=debounce(()=>this.fire("_selectionChangeDebounced"),200),this.decorate("show")}init(){const s=this.editor,c=s.model.document.selection;this.listenTo(this.focusTracker,"change:isFocused",(p,P,Z)=>{const Q=this._balloon.visibleView===this.toolbarView;!Z&&Q?this.hide():Z&&this.show()}),this.listenTo(c,"change:range",(p,P)=>{(P.directChange||c.isCollapsed)&&this.hide(),this._fireSelectionChangeDebounced()}),this.listenTo(this,"_selectionChangeDebounced",()=>{this.editor.editing.view.document.isFocused&&this.show()}),this._balloonConfig.shouldNotGroupWhenFull||this.listenTo(s,"ready",()=>{const p=s.ui.view.editable.element;this._resizeObserver=new ResizeObserver(p,P=>{this.toolbarView.maxWidth=bi(P.contentRect.width*.9)})}),this.listenTo(this.toolbarView,"groupedItemsUpdate",()=>{this._updatePosition()})}afterInit(){const s=this.editor.ui.componentFactory;this.toolbarView.fillFromConfig(this._balloonConfig,s)}_createToolbarView(){const s=this.editor.locale.t,c=!this._balloonConfig.shouldNotGroupWhenFull,p=new ToolbarView(this.editor.locale,{shouldGroupWhenFull:c,isFloating:!0});return p.ariaLabel=s("Editor contextual toolbar"),p.render(),p}show(s=!1){const c=this.editor,p=c.model.document.selection,P=c.model.schema;this._balloon.hasView(this.toolbarView)||p.isCollapsed&&!s||ie(p,P)||Array.from(this.toolbarView.items).every(Z=>Z.isEnabled!==void 0&&!Z.isEnabled)||(this.listenTo(this.editor.ui,"update",()=>{this._updatePosition()}),this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"}))}hide(){this._balloon.hasView(this.toolbarView)&&(this.stopListening(this.editor.ui,"update"),this._balloon.remove(this.toolbarView))}_getBalloonPositionData(){const c=this.editor.editing.view,p=c.document,P=p.selection,Z=p.selection.isBackward;return{target:()=>{const Q=Z?P.getFirstRange():P.getLastRange(),$=Rect.getDomRangeRects(c.domConverter.viewRangeToDom(Q));return Z?$[0]:($.length>1&&$[$.length-1].width===0&&$.pop(),$[$.length-1])},positions:this._getBalloonPositions(Z)}}_updatePosition(){this._balloon.updatePosition(this._getBalloonPositionData())}destroy(){super.destroy(),this.stopListening(),this._fireSelectionChangeDebounced.cancel(),this.toolbarView.destroy(),this.focusTracker.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_getBalloonPositions(s){const p=env.isSafari&&env.isiOS?generatePositions({heightOffset:Math.max(BalloonPanelView.arrowHeightOffset,Math.round(20/global.window.visualViewport.scale))}):BalloonPanelView.defaultPositions;return s?[p.northWestArrowSouth,p.northWestArrowSouthWest,p.northWestArrowSouthEast,p.northWestArrowSouthMiddleEast,p.northWestArrowSouthMiddleWest,p.southWestArrowNorth,p.southWestArrowNorthWest,p.southWestArrowNorthEast,p.southWestArrowNorthMiddleWest,p.southWestArrowNorthMiddleEast]:[p.southEastArrowNorth,p.southEastArrowNorthEast,p.southEastArrowNorthWest,p.southEastArrowNorthMiddleEast,p.southEastArrowNorthMiddleWest,p.northEastArrowSouth,p.northEastArrowSouthEast,p.northEastArrowSouthWest,p.northEastArrowSouthMiddleEast,p.northEastArrowSouthMiddleWest]}}function ie(f,s){return f.rangeCount===1?!1:[...f.getRanges()].every(c=>{const p=c.getContainedElement();return p&&s.isSelectable(p)})}var Xo=u(31957),Ko={};Ko.styleTagTransform=he(),Ko.setAttributes=z(),Ko.insert=O().bind(null,"head"),Ko.domAPI=M(),Ko.insertStyleElement=te();var wi=m()(Xo.Z,Ko),_s=Xo.Z&&Xo.Z.locals?Xo.Z.locals:void 0;const Fi=(0,v.nn)("px");class Ls extends null{constructor(s){super(s);const c=this.bindTemplate;this.isVisible=!1,this.isToggleable=!0,this.set("top",0),this.set("left",0),this.extendTemplate({attributes:{class:"ck-block-toolbar-button",style:{top:c.to("top",p=>Fi(p)),left:c.to("left",p=>Fi(p))}}})}}const zi=(0,v.nn)("px"),{pilcrow:dr}=Gt.icons;class ps extends null{static get pluginName(){return"BlockToolbar"}constructor(s){super(s),this._resizeObserver=null,this._blockToolbarConfig=normalizeToolbarConfig(this.editor.config.get("blockToolbar")),this.toolbarView=this._createToolbarView(),this.panelView=this._createPanelView(),this.buttonView=this._createButtonView(),clickOutsideHandler({emitter:this.panelView,contextElements:[this.panelView.element,this.buttonView.element],activator:()=>this.panelView.isVisible,callback:()=>this._hidePanel()})}init(){const s=this.editor;this.listenTo(s.model.document.selection,"change:range",(c,p)=>{p.directChange&&this._hidePanel()}),this.listenTo(s.ui,"update",()=>this._updateButton()),this.listenTo(s,"change:isReadOnly",()=>this._updateButton(),{priority:"low"}),this.listenTo(s.ui.focusTracker,"change:isFocused",()=>this._updateButton()),this.listenTo(this.buttonView,"change:isVisible",(c,p,P)=>{P?this.buttonView.listenTo(window,"resize",()=>this._updateButton()):(this.buttonView.stopListening(window,"resize"),this._hidePanel())}),s.ui.addToolbar(this.toolbarView,{beforeFocus:()=>this._showPanel(),afterBlur:()=>this._hidePanel()})}afterInit(){this.toolbarView.fillFromConfig(this._blockToolbarConfig,this.editor.ui.componentFactory);for(const s of this.toolbarView.items)s.on("execute",()=>this._hidePanel(!0),{priority:"high"})}destroy(){super.destroy(),this.panelView.destroy(),this.buttonView.destroy(),this.toolbarView.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_createToolbarView(){const s=this.editor.locale.t,c=!this._blockToolbarConfig.shouldNotGroupWhenFull,p=new ToolbarView(this.editor.locale,{shouldGroupWhenFull:c,isFloating:!0});return p.ariaLabel=s("Editor block content toolbar"),p}_createPanelView(){const s=this.editor,c=new BalloonPanelView(s.locale);return c.content.add(this.toolbarView),c.class="ck-toolbar-container",s.ui.view.body.add(c),s.ui.focusTracker.add(c.element),this.toolbarView.keystrokes.set("Esc",(p,P)=>{this._hidePanel(!0),P()}),c}_createButtonView(){const s=this.editor,c=s.t,p=new BlockButtonView(s.locale);return p.set({label:c("Edit block"),icon:dr,withText:!1}),p.bind("isOn").to(this.panelView,"isVisible"),p.bind("tooltip").to(this.panelView,"isVisible",P=>!P),this.listenTo(p,"execute",()=>{this.panelView.isVisible?this._hidePanel(!0):this._showPanel()}),s.ui.view.body.add(p),s.ui.focusTracker.add(p.element),p}_updateButton(){const s=this.editor,c=s.model,p=s.editing.view;if(!s.ui.focusTracker.isFocused){this._hideButton();return}if(!s.model.canEditAt(s.model.document.selection)){this._hideButton();return}const P=Array.from(c.document.selection.getSelectedBlocks())[0];if(!P||Array.from(this.toolbarView.items).every(Q=>!Q.isEnabled)){this._hideButton();return}const Z=p.domConverter.mapViewToDom(s.editing.mapper.toViewElement(P));this.buttonView.isVisible=!0,this._setupToolbarResize(),this._attachButtonToElement(Z),this.panelView.isVisible&&this._showPanel()}_hideButton(){this.buttonView.isVisible=!1}_showPanel(){if(!this.buttonView.isVisible)return;const s=this.panelView.isVisible;this.panelView.show();const c=this._getSelectedEditableElement();this.toolbarView.maxWidth=this._getToolbarMaxWidth(c),this.panelView.pin({target:this.buttonView.element,limiter:c}),s||this.toolbarView.items.get(0).focus()}_getSelectedEditableElement(){const s=this.editor.model.document.selection.getFirstRange().root.rootName;return this.editor.ui.getEditableElement(s)}_hidePanel(s){this.panelView.isVisible=!1,s&&this.editor.editing.view.focus()}_attachButtonToElement(s){const c=window.getComputedStyle(s),p=new Rect(this._getSelectedEditableElement()),P=parseInt(c.paddingTop,10),Z=parseInt(c.lineHeight,10)||parseInt(c.fontSize,10)*1.2,Q=getOptimalPosition({element:this.buttonView.element,target:s,positions:[($,ae)=>{let ft;return this.editor.locale.uiLanguageDirection==="ltr"?ft=p.left-ae.width:ft=p.right,{top:$.top+P+(Z-ae.height)/2,left:ft}}]});this.buttonView.top=Q.top,this.buttonView.left=Q.left}_setupToolbarResize(){const s=this._getSelectedEditableElement();this._blockToolbarConfig.shouldNotGroupWhenFull||(this._resizeObserver&&this._resizeObserver.element!==s&&(this._resizeObserver.destroy(),this._resizeObserver=null),this._resizeObserver||(this._resizeObserver=new ResizeObserver(s,()=>{this.toolbarView.maxWidth=this._getToolbarMaxWidth(s)})))}_getToolbarMaxWidth(s){const c=new Rect(s),p=new Rect(this.buttonView.element),Z=this.editor.locale.uiLanguageDirection==="rtl"?p.left-c.right+p.width:c.left-p.left;return zi(c.width+Z)}}const Fs={colorPaletteIcon:ho}},3018:function(J,j,u){"use strict";u.d(j,{KE:function(){return C},ZP:function(){return V}});const v="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class V extends Error{constructor(O,W,z){super(B(O,z)),this.name="CKEditorError",this.context=W,this.data=z}is(O){return O==="CKEditorError"}static rethrowUnexpectedError(O,W){if(O.is&&O.is("CKEditorError"))throw O;const z=new V(O.message,W);throw z.stack=O.stack,z}}function C(D,O){console.warn(...M(D,O))}function L(D,O){console.error(...M(D,O))}function m(D){return`
Read more: ${v}#error-${D}`}function B(D,O){const W=new WeakSet,q=O?` ${JSON.stringify(O,(de,he)=>{if(typeof he=="object"&&he!==null){if(W.has(he))return`[object ${he.constructor.name}]`;W.add(he)}return he})}`:"",te=m(D);return D+q+te}function M(D,O){const W=m(D);return O?[D,O,W]:[D,W]}},5820:function(J,j,u){"use strict";u.d(j,{Bb:function(){return Re.ZP},FE:function(){return Fr},De:function(){return et},Xu:function(){return mn},a6:function(){return ln},ln:function(){return ze},M3:function(){return ct},Rh:function(){return wr},VD:function(){return kr},go:function(){return Xr},Re:function(){return Vt},UL:function(){return Ct},do:function(){return Tt},Rt:function(){return Or},QX:function(){return dn},az:function(){return On},gw:function(){return Dt},Hg:function(){return Le},OB:function(){return L},HZ:function(){return te},wm:function(){return En},Ps:function(){return Yr},dk:function(){return Dr},Cq:function(){return Nr},yy:function(){return Pn},D_:function(){return Ir},XU:function(){return In},mA:function(){return Lo},xZ:function(){return bt},hI:function(){return Br},global:function(){return Et},cq:function(){return Kr},ZQ:function(){return pr},dj:function(){return Ot},C3:function(){return so},Zt:function(){return Gr},pp:function(){return go},YK:function(){return po},to:function(){return Co},TW:function(){return gn},UG:function(){return gt},bR:function(){return Tn},Gs:function(){return Mn},$b:function(){return Zn},pn:function(){return Vr},Do:function(){return Wt},KE:function(){return Re.KE},Zz:function(){return Lr},tA:function(){return mt},Od:function(){return bn},mR:function(){return Cn},jS:function(){return io},x:function(){return sr},qo:function(){return Bn},qL:function(){return vr},nn:function(){return jn},hQ:function(){return Ee},Tx:function(){return Jn}});function v(){try{return navigator.userAgent.toLowerCase()}catch(b){return""}}const V=v();var L={isMac:m(V),isWindows:B(V),isGecko:M(V),isSafari:D(V),isiOS:O(V),isAndroid:W(V),isBlink:z(V),features:{isRegExpUnicodePropertySupported:q()}};function m(b){return b.indexOf("macintosh")>-1}function B(b){return b.indexOf("windows")>-1}function M(b){return!!b.match(/gecko\/\d+/)}function D(b){return b.indexOf(" applewebkit/")>-1&&b.indexOf("chrome")===-1}function O(b){return!!b.match(/iphone|ipad/i)||m(b)&&navigator.maxTouchPoints>0}function W(b){return b.indexOf("android")>-1}function z(b){return b.indexOf("chrome/")>-1&&b.indexOf("edge/")<0}function q(){let b=!1;try{b="\u0107".search(new RegExp("[\\p{L}]","u"))===0}catch(h){}return b}function te(b,h,y,R){y=y||function(ye,Ce){return ye===Ce};const F=Array.isArray(b)?b:Array.prototype.slice.call(b),Y=Array.isArray(h)?h:Array.prototype.slice.call(h),re=de(F,Y,y);return R?Te(re,Y.length):T(Y,re)}function de(b,h,y){const R=he(b,h,y);if(R===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const F=Ie(b,R),Y=Ie(h,R),re=he(F,Y,y),ue=b.length-re,ye=h.length-re;return{firstIndex:R,lastIndexOld:ue,lastIndexNew:ye}}function he(b,h,y){for(let R=0;R<Math.max(b.length,h.length);R++)if(b[R]===void 0||h[R]===void 0||!y(b[R],h[R]))return R;return-1}function Ie(b,h){return b.slice(h).reverse()}function T(b,h){const y=[],{firstIndex:R,lastIndexOld:F,lastIndexNew:Y}=h;return Y-R>0&&y.push({index:R,type:"insert",values:b.slice(R,Y)}),F-R>0&&y.push({index:R+(Y-R),type:"delete",howMany:F-R}),y}function Te(b,h){const{firstIndex:y,lastIndexOld:R,lastIndexNew:F}=b;if(y===-1)return Array(h).fill("equal");let Y=[];return y>0&&(Y=Y.concat(Array(y).fill("equal"))),F-y>0&&(Y=Y.concat(Array(F-y).fill("insert"))),R-y>0&&(Y=Y.concat(Array(R-y).fill("delete"))),F<h&&(Y=Y.concat(Array(h-F).fill("equal"))),Y}function Le(b,h,y){y=y||function(jt,Wr){return jt===Wr};const R=b.length,F=h.length;if(R>200||F>200||R+F>300)return Le.fastDiff(b,h,y,!0);let Y,re;if(F<R){const jt=b;b=h,h=jt,Y="delete",re="insert"}else Y="insert",re="delete";const ue=b.length,ye=h.length,Ce=ye-ue,Je={},qe={};function Xt(jt){const Wr=(qe[jt-1]!==void 0?qe[jt-1]:-1)+1,lo=qe[jt+1]!==void 0?qe[jt+1]:-1,A=Wr>lo?-1:1;Je[jt+A]&&(Je[jt]=Je[jt+A].slice(0)),Je[jt]||(Je[jt]=[]),Je[jt].push(Wr>lo?Y:re);let l=Math.max(Wr,lo),d=l-jt;for(;d<ue&&l<ye&&y(b[d],h[l]);)d++,l++,Je[jt].push("equal");return l}let Vn=0,Lt;do{for(Lt=-Vn;Lt<Ce;Lt++)qe[Lt]=Xt(Lt);for(Lt=Ce+Vn;Lt>Ce;Lt--)qe[Lt]=Xt(Lt);qe[Ce]=Xt(Ce),Vn++}while(qe[Ce]!==ye);return Je[Ce].slice(1)}Le.fastDiff=te;function Pe(){return function b(){b.called=!0}}var Qe=Pe;class ct{constructor(h,y){this.source=h,this.name=y,this.path=[],this.stop=Qe(),this.off=Qe()}}const Fe=new Array(256).fill("").map((b,h)=>("0"+h.toString(16)).slice(-2));function Ee(){const b=Math.random()*4294967296>>>0,h=Math.random()*4294967296>>>0,y=Math.random()*4294967296>>>0,R=Math.random()*4294967296>>>0;return"e"+Fe[b>>0&255]+Fe[b>>8&255]+Fe[b>>16&255]+Fe[b>>24&255]+Fe[h>>0&255]+Fe[h>>8&255]+Fe[h>>16&255]+Fe[h>>24&255]+Fe[y>>0&255]+Fe[y>>8&255]+Fe[y>>16&255]+Fe[y>>24&255]+Fe[R>>0&255]+Fe[R>>8&255]+Fe[R>>16&255]+Fe[R>>24&255]}var mt={get(b="normal"){return typeof b!="number"?this[b]||this.normal:b},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function St(b,h){const y=mt.get(h.priority);for(let R=0;R<b.length;R++)if(mt.get(b[R].priority)<y){b.splice(R,0,h);return}b.push(h)}var We=u(55379),Re=u(3018);const Ne=Symbol("listeningTo"),Oe=Symbol("emitterId"),Be=Symbol("delegations"),it=ze(Object);function ze(b){if(!b)return it;class h extends b{on(R,F,Y){this.listenTo(this,R,F,Y)}once(R,F,Y){let re=!1;const ue=(ye,...Ce)=>{re||(re=!0,ye.off(),F.call(this,ye,...Ce))};this.listenTo(this,R,ue,Y)}off(R,F){this.stopListening(this,R,F)}listenTo(R,F,Y,re={}){let ue,ye;this[Ne]||(this[Ne]={});const Ce=this[Ne];pt(R)||je(R);const Je=pt(R);(ue=Ce[Je])||(ue=Ce[Je]={emitter:R,callbacks:{}}),(ye=ue.callbacks[F])||(ye=ue.callbacks[F]=[]),ye.push(Y),fe(this,R,F,Y,re)}stopListening(R,F,Y){const re=this[Ne];let ue=R&&pt(R);const ye=re&&ue?re[ue]:void 0,Ce=ye&&F?ye.callbacks[F]:void 0;if(!(!re||R&&!ye||F&&!Ce))if(Y)ke(this,R,F,Y),Ce.indexOf(Y)!==-1&&(Ce.length===1?delete ye.callbacks[F]:ke(this,R,F,Y));else if(Ce){for(;Y=Ce.pop();)ke(this,R,F,Y);delete ye.callbacks[F]}else if(ye){for(F in ye.callbacks)this.stopListening(R,F);delete re[ue]}else{for(ue in re)this.stopListening(re[ue].emitter);delete this[Ne]}}fire(R,...F){try{const Y=R instanceof ct?R:new ct(this,R),re=Y.name;let ue=G(this,re);if(Y.path.push(this),ue){const Ce=[Y,...F];ue=Array.from(ue);for(let Je=0;Je<ue.length&&(ue[Je].callback.apply(this,Ce),Y.off.called&&(delete Y.off.called,this._removeEventListener(re,ue[Je].callback)),!Y.stop.called);Je++);}const ye=this[Be];if(ye){const Ce=ye.get(re),Je=ye.get("*");Ce&&ce(Ce,Y,F),Je&&ce(Je,Y,F)}return Y.return}catch(Y){Re.ZP.rethrowUnexpectedError(Y,this)}}delegate(...R){return{to:(F,Y)=>{this[Be]||(this[Be]=new Map),R.forEach(re=>{const ue=this[Be].get(re);ue?ue.set(F,Y):this[Be].set(re,new Map([[F,Y]]))})}}}stopDelegating(R,F){if(this[Be])if(!R)this[Be].clear();else if(!F)this[Be].delete(R);else{const Y=this[Be].get(R);Y&&Y.delete(F)}}_addEventListener(R,F,Y){Me(this,R);const re=pe(this,R),ue=mt.get(Y.priority),ye={callback:F,priority:ue};for(const Ce of re)St(Ce,ye)}_removeEventListener(R,F){const Y=pe(this,R);for(const re of Y)for(let ue=0;ue<re.length;ue++)re[ue].callback==F&&(re.splice(ue,1),ue--)}}return h}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(b=>{ze[b]=it.prototype[b]});function dt(b,h){const y=b[Ne];return y&&y[h]?y[h].emitter:null}function je(b,h){b[Oe]||(b[Oe]=h||Ee())}function pt(b){return b[Oe]}function kt(b){return b._events||Object.defineProperty(b,"_events",{value:{}}),b._events}function Ht(){return{callbacks:[],childEvents:[]}}function Me(b,h){const y=kt(b);if(y[h])return;let R=h,F=null;const Y=[];for(;R!==""&&!y[R];)y[R]=Ht(),Y.push(y[R]),F&&y[R].childEvents.push(F),F=R,R=R.substr(0,R.lastIndexOf(":"));if(R!==""){for(const re of Y)re.callbacks=y[R].callbacks.slice();y[R].childEvents.push(F)}}function pe(b,h){const y=kt(b)[h];if(!y)return[];let R=[y.callbacks];for(let F=0;F<y.childEvents.length;F++){const Y=pe(b,y.childEvents[F]);R=R.concat(Y)}return R}function G(b,h){let y;return!b._events||!(y=b._events[h])||!y.callbacks.length?h.indexOf(":")>-1?G(b,h.substr(0,h.lastIndexOf(":"))):null:y.callbacks}function ce(b,h,y){for(let[R,F]of b){F?typeof F=="function"&&(F=F(h.name)):F=h.name;const Y=new ct(h.source,F);Y.path=[...h.path],R.fire(Y,...y)}}function fe(b,h,y,R,F){h._addEventListener?h._addEventListener(y,R,F):b._addEventListener.call(h,y,R,F)}function ke(b,h,y,R){h._removeEventListener?h._removeEventListener(y,R):b._removeEventListener.call(h,y,R)}var _e=u(82433);const xe=Symbol("observableProperties"),He=Symbol("boundObservables"),ut=Symbol("boundProperties"),Ye=Symbol("decoratedMethods"),Yt=Symbol("decoratedOriginal"),cn=Vt(ze());function Vt(b){if(!b)return cn;class h extends b{set(R,F){if((0,_e.Z)(R)){Object.keys(R).forEach(re=>{this.set(re,R[re])},this);return}qt(this);const Y=this[xe];if(R in this&&!Y.has(R))throw new Re.ZP("observable-set-cannot-override",this);Object.defineProperty(this,R,{enumerable:!0,configurable:!0,get(){return Y.get(R)},set(re){const ue=Y.get(R);let ye=this.fire(`set:${R}`,R,re,ue);ye===void 0&&(ye=re),(ue!==ye||!Y.has(R))&&(Y.set(R,ye),this.fire(`change:${R}`,R,ye,ue))}}),this[R]=F}bind(...R){if(!R.length||!be(R))throw new Re.ZP("observable-bind-wrong-properties",this);if(new Set(R).size!==R.length)throw new Re.ZP("observable-bind-duplicate-properties",this);qt(this);const F=this[ut];R.forEach(re=>{if(F.has(re))throw new Re.ZP("observable-bind-rebind",this)});const Y=new Map;return R.forEach(re=>{const ue={property:re,to:[]};F.set(re,ue),Y.set(re,ue)}),{to:Sr,toMany:Xe,_observable:this,_bindProperties:R,_to:[],_bindings:Y}}unbind(...R){if(!this[xe])return;const F=this[ut],Y=this[He];if(R.length){if(!be(R))throw new Re.ZP("observable-unbind-wrong-properties",this);R.forEach(re=>{const ue=F.get(re);ue&&(ue.to.forEach(([ye,Ce])=>{const Je=Y.get(ye),qe=Je[Ce];qe.delete(ue),qe.size||delete Je[Ce],Object.keys(Je).length||(Y.delete(ye),this.stopListening(ye,"change"))}),F.delete(re))})}else Y.forEach((re,ue)=>{this.stopListening(ue,"change")}),Y.clear(),F.clear()}decorate(R){qt(this);const F=this[R];if(!F)throw new Re.ZP("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:R});this.on(R,(Y,re)=>{Y.return=F.apply(this,re)}),this[R]=function(...Y){return this.fire(R,Y)},this[R][Yt]=F,this[Ye]||(this[Ye]=[]),this[Ye].push(R)}stopListening(R,F,Y){if(!R&&this[Ye]){for(const re of this[Ye])this[re]=this[re][Yt];delete this[Ye]}super.stopListening(R,F,Y)}}return h}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(b=>{Vt[b]=cn.prototype[b]});function qt(b){b[xe]||(Object.defineProperty(b,xe,{value:new Map}),Object.defineProperty(b,He,{value:new Map}),Object.defineProperty(b,ut,{value:new Map}))}function Sr(...b){const h=De(...b),y=Array.from(this._bindings.keys()),R=y.length;if(!h.callback&&h.to.length>1)throw new Re.ZP("observable-bind-to-no-callback",this);if(R>1&&h.callback)throw new Re.ZP("observable-bind-to-extra-callback",this);h.to.forEach(F=>{if(F.properties.length&&F.properties.length!==R)throw new Re.ZP("observable-bind-to-properties-length",this);F.properties.length||(F.properties=this._bindProperties)}),this._to=h.to,h.callback&&(this._bindings.get(y[0]).callback=h.callback),en(this._observable,this._to),vt(this),this._bindProperties.forEach(F=>{yn(this._observable,F)})}function Xe(b,h,y){if(this._bindings.size>1)throw new Re.ZP("observable-bind-to-many-not-one-binding",this);this.to(...oe(b,h),y)}function oe(b,h){const y=b.map(R=>[R,h]);return Array.prototype.concat.apply([],y)}function be(b){return b.every(h=>typeof h=="string")}function De(...b){if(!b.length)throw new Re.ZP("observable-bind-to-parse-error",null);const h={to:[]};let y;return typeof b[b.length-1]=="function"&&(h.callback=b.pop()),b.forEach(R=>{if(typeof R=="string")y.properties.push(R);else if(typeof R=="object")y={observable:R,properties:[]},h.to.push(y);else throw new Re.ZP("observable-bind-to-parse-error",null)}),h}function nt(b,h,y,R){const F=b[He],Y=F.get(y),re=Y||{};re[R]||(re[R]=new Set),re[R].add(h),Y||F.set(y,re)}function vt(b){let h;b._bindings.forEach((y,R)=>{b._to.forEach(F=>{h=F.properties[y.callback?0:b._bindProperties.indexOf(R)],y.to.push([F.observable,h]),nt(b._observable,y,F.observable,h)})})}function yn(b,h){const R=b[ut].get(h);let F;R.callback?F=R.callback.apply(b,R.to.map(Y=>Y[0][Y[1]])):(F=R.to[0],F=F[0][F[1]]),Object.prototype.hasOwnProperty.call(b,h)?b[h]=F:b.set(h,F)}function en(b,h){h.forEach(y=>{const R=b[He];let F;R.get(y.observable)||b.listenTo(y.observable,"change",(Y,re)=>{F=R.get(y.observable)[re],F&&F.forEach(ue=>{yn(b,ue.property)})})})}class ln{constructor(){this._replacedElements=[]}replace(h,y){this._replacedElements.push({element:h,newElement:y}),h.style.display="none",y&&h.parentNode.insertBefore(y,h.nextSibling)}restore(){this._replacedElements.forEach(({element:h,newElement:y})=>{h.style.display="",y&&y.remove()}),this._replacedElements=[]}}function dn(b){let h=0;for(const y of b)h++;return h}function Or(b,h){const y=Math.min(b.length,h.length);for(let R=0;R<y;R++)if(b[R]!=h[R])return R;return b.length==h.length?"same":b.length<h.length?"prefix":"extension"}function gn(b){return!!(b&&b[Symbol.iterator])}var _n=u(33918),yt=u(56052),pn=u(13795),hr="[object String]";function Rr(b){return typeof b=="string"||!(0,yt.Z)(b)&&(0,pn.Z)(b)&&(0,_n.Z)(b)==hr}var tn=Rr;function On(b,h,y={},R=[]){const F=y&&y.xmlns,Y=F?b.createElementNS(F,h):b.createElement(h);for(const re in y)Y.setAttribute(re,y[re]);(tn(R)||!gn(R))&&(R=[R]);for(let re of R)tn(re)&&(re=b.createTextNode(re)),Y.appendChild(re);return Y}var Kt=u(54098),nr=u(94195),oo=u(23132);class et{constructor(h,y){this._config={},y&&this.define(ht(y)),h&&this._setObjectToTarget(this._config,h)}set(h,y){this._setToTarget(this._config,h,y)}define(h,y){this._setToTarget(this._config,h,y,!0)}get(h){return this._getFromSource(this._config,h)}*names(){for(const h of Object.keys(this._config))yield h}_setToTarget(h,y,R,F=!1){if((0,Kt.Z)(y)){this._setObjectToTarget(h,y,F);return}const Y=y.split(".");y=Y.pop();for(const re of Y)(0,Kt.Z)(h[re])||(h[re]={}),h=h[re];if((0,Kt.Z)(R)){(0,Kt.Z)(h[y])||(h[y]={}),h=h[y],this._setObjectToTarget(h,R,F);return}F&&typeof h[y]!="undefined"||(h[y]=R)}_getFromSource(h,y){const R=y.split(".");y=R.pop();for(const F of R){if(!(0,Kt.Z)(h[F])){h=null;break}h=h[F]}return h?ht(h[y]):void 0}_setObjectToTarget(h,y,R){Object.keys(y).forEach(F=>{this._setToTarget(h,F,y[F],R)})}}function ht(b){return(0,nr.Z)(b,Ue)}function Ue(b){return(0,oo.Z)(b)?b:void 0}function gt(b){if(b){if(b.defaultView)return b instanceof b.defaultView.Document;if(b.ownerDocument&&b.ownerDocument.defaultView)return b instanceof b.ownerDocument.defaultView.Node}return!1}function Rt(b){const h=Object.prototype.toString.apply(b);return h=="[object Window]"||h=="[object global]"}const $t=mn(ze());function mn(b){if(!b)return $t;class h extends b{listenTo(R,F,Y,re={}){if(gt(R)||Rt(R)){const ue={capture:!!re.useCapture,passive:!!re.usePassive},ye=this._getProxyEmitter(R,ue)||new Rn(R,ue);this.listenTo(ye,F,Y,re)}else super.listenTo(R,F,Y,re)}stopListening(R,F,Y){if(gt(R)||Rt(R)){const re=this._getAllProxyEmitters(R);for(const ue of re)this.stopListening(ue,F,Y)}else super.stopListening(R,F,Y)}_getProxyEmitter(R,F){return dt(this,fr(R,F))}_getAllProxyEmitters(R){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(F=>this._getProxyEmitter(R,F)).filter(F=>!!F)}}return h}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(b=>{mn[b]=$t.prototype[b]});class Rn extends ze(){constructor(h,y){super(),je(this,fr(h,y)),this._domNode=h,this._options=y}attach(h){if(this._domListeners&&this._domListeners[h])return;const y=this._createDomListener(h);this._domNode.addEventListener(h,y,this._options),this._domListeners||(this._domListeners={}),this._domListeners[h]=y}detach(h){let y;this._domListeners[h]&&(!(y=this._events[h])||!y.callbacks.length)&&this._domListeners[h].removeListener()}_addEventListener(h,y,R){this.attach(h),ze().prototype._addEventListener.call(this,h,y,R)}_removeEventListener(h,y){ze().prototype._removeEventListener.call(this,h,y),this.detach(h)}_createDomListener(h){const y=R=>{this.fire(h,R)};return y.removeListener=()=>{this._domNode.removeEventListener(h,y,this._options),delete this._domListeners[h]},y}}function Nn(b){return b["data-ck-expando"]||(b["data-ck-expando"]=Ee())}function fr(b,h){let y=Nn(b);for(const R of Object.keys(h).sort())h[R]&&(y+="-"+R);return y}let Mr;try{Mr={window,document}}catch(b){Mr={window:{},document:{}}}var Et=Mr;function En(b){let h=b.parentElement;if(!h)return null;for(;h.tagName!="BODY";){const y=h.style.overflowY||Et.window.getComputedStyle(h).overflowY;if(y==="auto"||y==="scroll")break;if(h=h.parentElement,!h)return null}return h}function Dr(b){const h=[];let y=b;for(;y&&y.nodeType!=Node.DOCUMENT_NODE;)h.unshift(y),y=y.parentNode;return h}function Tn(b){return Object.prototype.toString.apply(b)=="[object Range]"}function gr(b){const h=b.ownerDocument.defaultView.getComputedStyle(b);return{top:parseInt(h.borderTopWidth,10),right:parseInt(h.borderRightWidth,10),bottom:parseInt(h.borderBottomWidth,10),left:parseInt(h.borderLeftWidth,10)}}function Mn(b){return Object.prototype.toString.call(b)=="[object Text]"}const Nt=["top","right","bottom","left","width","height"];class Ct{constructor(h){const y=Tn(h);if(Object.defineProperty(this,"_source",{value:h._source||h,writable:!0,enumerable:!1}),Fn(h)||y)if(y){const R=Ct.getDomRangeRects(h);Ln(this,Ct.getBoundingRect(R))}else Ln(this,h.getBoundingClientRect());else if(Rt(h)){const{innerWidth:R,innerHeight:F}=h;Ln(this,{top:0,right:R,bottom:F,left:0,width:R,height:F})}else Ln(this,h)}clone(){return new Ct(this)}moveTo(h,y){return this.top=y,this.right=h+this.width,this.bottom=y+this.height,this.left=h,this}moveBy(h,y){return this.top+=y,this.right+=h,this.left+=h,this.bottom+=y,this}getIntersection(h){const y={top:Math.max(this.top,h.top),right:Math.min(this.right,h.right),bottom:Math.min(this.bottom,h.bottom),left:Math.max(this.left,h.left),width:0,height:0};return y.width=y.right-y.left,y.height=y.bottom-y.top,y.width<0||y.height<0?null:new Ct(y)}getIntersectionArea(h){const y=this.getIntersection(h);return y?y.getArea():0}getArea(){return this.width*this.height}getVisible(){const h=this._source;let y=this.clone();if(_r(h))return y;let R=h,F=h.parentNode||h.commonAncestorContainer,Y;for(;F&&!_r(F);){if(R instanceof HTMLElement&&zn(R)==="absolute"&&(Y=R),Y&&(zn(F)!=="relative"||Wn(F)==="visible")){R=F,F=F.parentNode;continue}const re=new Ct(F),ue=y.getIntersection(re);if(ue)ue.getArea()<y.getArea()&&(y=ue);else return null;R=F,F=F.parentNode}return y}isEqual(h){for(const y of Nt)if(this[y]!==h[y])return!1;return!0}contains(h){const y=this.getIntersection(h);return!!(y&&y.isEqual(h))}excludeScrollbarsAndBorders(){const h=this._source;let y,R,F;if(Rt(h))y=h.innerWidth-h.document.documentElement.clientWidth,R=h.innerHeight-h.document.documentElement.clientHeight,F=h.getComputedStyle(h.document.documentElement).direction;else{const Y=gr(h);y=h.offsetWidth-h.clientWidth-Y.left-Y.right,R=h.offsetHeight-h.clientHeight-Y.top-Y.bottom,F=h.ownerDocument.defaultView.getComputedStyle(h).direction,this.left+=Y.left,this.top+=Y.top,this.right-=Y.right,this.bottom-=Y.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=y,F==="ltr"?this.right-=y:this.left+=y,this.height-=R,this.bottom-=R,this}static getDomRangeRects(h){const y=[],R=Array.from(h.getClientRects());if(R.length)for(const F of R)y.push(new Ct(F));else{let F=h.startContainer;Mn(F)&&(F=F.parentNode);const Y=new Ct(F.getBoundingClientRect());Y.right=Y.left,Y.width=0,y.push(Y)}return y}static getBoundingRect(h){const y={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let R=0;for(const F of h)R++,y.left=Math.min(y.left,F.left),y.top=Math.min(y.top,F.top),y.right=Math.max(y.right,F.right),y.bottom=Math.max(y.bottom,F.bottom);return R==0?null:(y.width=y.right-y.left,y.height=y.bottom-y.top,new Ct(y))}}function Ln(b,h){for(const y of Nt)b[y]=h[y]}function _r(b){return Fn(b)?b===b.ownerDocument.body:!1}function Fn(b){return b!==null&&typeof b=="object"&&b.nodeType===1&&typeof b.getBoundingClientRect=="function"}function zn(b){return b.ownerDocument.defaultView.getComputedStyle(b).position}function Wn(b){return b.ownerDocument.defaultView.getComputedStyle(b).overflow}function Ir(b,h=0){const y=b.map(F=>{if(F instanceof Document){const Y=new Ct(Et.window);return Y.top+=h,Y.height-=h,Y}else return new Ct(F)});let R=y[0];for(const F of y.slice(1))R&&(R=R.getIntersection(F));return R}function Br(b){const h=[];let y=En(b);for(;y&&y!==Et.document.body;)h.push(y),y=En(y);return h.push(Et.document),h}function Pn(b){return b instanceof HTMLTextAreaElement?b.value:b.innerHTML}class Tt{constructor(h,y){Tt._observerInstance||Tt._createObserver(),this._element=h,this._callback=y,Tt._addElementCallback(h,y),Tt._observerInstance.observe(h)}get element(){return this._element}destroy(){Tt._deleteElementCallback(this._element,this._callback)}static _addElementCallback(h,y){Tt._elementCallbacks||(Tt._elementCallbacks=new Map);let R=Tt._elementCallbacks.get(h);R||(R=new Set,Tt._elementCallbacks.set(h,R)),R.add(y)}static _deleteElementCallback(h,y){const R=Tt._getElementCallbacks(h);R&&(R.delete(y),R.size||(Tt._elementCallbacks.delete(h),Tt._observerInstance.unobserve(h))),Tt._elementCallbacks&&!Tt._elementCallbacks.size&&(Tt._observerInstance=null,Tt._elementCallbacks=null)}static _getElementCallbacks(h){return Tt._elementCallbacks?Tt._elementCallbacks.get(h):null}static _createObserver(){Tt._observerInstance=new Et.window.ResizeObserver(h=>{for(const y of h){const R=Tt._getElementCallbacks(y.target);if(R)for(const F of R)F(y)}})}}Tt._observerInstance=null,Tt._elementCallbacks=null;function io(b,h){b instanceof HTMLTextAreaElement&&(b.value=h),b.innerHTML=h}function jn(b){return h=>h+b}function Kr(b){let h=0;for(;b.previousSibling;)b=b.previousSibling,h++;return h}function pr(b,h,y){b.insertBefore(y,b.childNodes[h]||null)}function so(b){return b&&b.nodeType===Node.COMMENT_NODE}function Zn(b){try{Et.document.createAttribute(b)}catch(h){return!1}return!0}function Vr(b){return!!(b&&b.getClientRects&&b.getClientRects().length)}function $r(b){return!b||!b.parentNode||b.offsetParent===Et.document.body?null:b.offsetParent}var Un=u(88987);function bt({element:b,target:h,positions:y,limiter:R,fitInViewport:F,viewportOffsetConfig:Y}){(0,Un.Z)(h)&&(h=h()),(0,Un.Z)(R)&&(R=R());const re=$r(b),ue=new Ct(b),ye=new Ct(h);let Ce;const Je=F&&Gt(Y)||null,qe={targetRect:ye,elementRect:ue,positionedElementAncestor:re,viewportRect:Je};if(!R&&!F)Ce=new xt(y[0],qe);else{const Xt=R&&new Ct(R).getVisible();Object.assign(qe,{limiterRect:Xt,viewportRect:Je}),Ce=rr(y,qe)||new xt(y[0],qe)}return Ce}function Gt(b){b=Object.assign({top:0,bottom:0,left:0,right:0},b);const h=new Ct(Et.window);return h.top+=b.top,h.height-=b.top,h.bottom-=b.bottom,h.height-=b.bottom,h}function rr(b,h){const{elementRect:y}=h,R=y.getArea(),F=b.map(ue=>new xt(ue,h)).filter(ue=>!!ue.name);let Y=0,re=null;for(const ue of F){const{limiterIntersectionArea:ye,viewportIntersectionArea:Ce}=ue;if(ye===R)return ue;const Je=an(Ce,2)+an(ye,2);Je>Y&&(Y=Je,re=ue)}return re}function le(b,h){const y=st(new Ct(h)),R=gr(h);let F=0,Y=0;F-=y.left,Y-=y.top,F+=h.scrollLeft,Y+=h.scrollTop,F-=R.left,Y-=R.top,b.moveBy(F,Y)}function st(b){const{scrollX:h,scrollY:y}=Et.window;return b.clone().moveBy(h,y)}class xt{constructor(h,y){const R=h(y.targetRect,y.elementRect,y.viewportRect);if(!R)return;const{left:F,top:Y,name:re,config:ue}=R;this.name=re,this.config=ue,this._positioningFunctionCorrdinates={left:F,top:Y},this._options=y}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const h=this._options.limiterRect;if(h){const y=this._options.viewportRect;if(y){const R=h.getIntersection(y);if(R)return R.getIntersectionArea(this._rect)}else return h.getIntersectionArea(this._rect)}return 0}get viewportIntersectionArea(){const h=this._options.viewportRect;return h?h.getIntersectionArea(this._rect):0}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCorrdinates.left,this._positioningFunctionCorrdinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=st(this._rect),this._options.positionedElementAncestor&&le(this._cachedAbsoluteRect,this._options.positionedElementAncestor),this._cachedAbsoluteRect)}}function bn(b){const h=b.parentNode;h&&h.removeChild(b)}function Cn({target:b,viewportOffset:h=0,ancestorOffset:y=0,alignToTop:R,forceScroll:F}){const Y=or(b);let re=Y,ue=null;for(h=co(h);re;){let ye;re==Y?ye=mr(b):ye=mr(ue),Hn({parent:ye,getRect:()=>ao(b,re),alignToTop:R,ancestorOffset:y,forceScroll:F});const Ce=ao(b,re);if(Mt({window:re,rect:Ce,viewportOffset:h,alignToTop:R,forceScroll:F}),re.parent!=re){if(ue=re.frameElement,re=re.parent,!ue)return}else re=null}}function un(b,h,y){const R=mr(b);Hn({parent:R,getRect:()=>new Rect(b),ancestorOffset:h,limiterElement:y})}function Mt({window:b,rect:h,alignToTop:y,forceScroll:R,viewportOffset:F}){const Y=h.clone().moveBy(0,F.bottom),re=h.clone().moveBy(0,-F.top),ue=new Ct(b).excludeScrollbarsAndBorders(),ye=[re,Y],Ce=y&&R,Je=ye.every(jt=>ue.contains(jt));let{scrollX:qe,scrollY:Xt}=b;const Vn=qe,Lt=Xt;Ce?Xt-=ue.top-h.top+F.top:Je||($n(re,ue)?Xt-=ue.top-h.top+F.top:Kn(Y,ue)&&(y?Xt+=h.top-ue.top-F.top:Xt+=h.bottom-ue.bottom+F.bottom)),Je||(wn(h,ue)?qe-=ue.left-h.left+F.left:Dn(h,ue)&&(qe+=h.right-ue.right+F.right)),(qe!=Vn||Xt!==Lt)&&b.scrollTo(qe,Xt)}function Hn({parent:b,getRect:h,alignToTop:y,forceScroll:R,ancestorOffset:F=0,limiterElement:Y}){const re=or(b),ue=y&&R;let ye,Ce,Je;const qe=Y||re.document.body;for(;b!=qe;)Ce=h(),ye=new Ct(b).excludeScrollbarsAndBorders(),Je=ye.contains(Ce),ue?b.scrollTop-=ye.top-Ce.top+F:Je||($n(Ce,ye)?b.scrollTop-=ye.top-Ce.top+F:Kn(Ce,ye)&&(y?b.scrollTop+=Ce.top-ye.top-F:b.scrollTop+=Ce.bottom-ye.bottom+F)),Je||(wn(Ce,ye)?b.scrollLeft-=ye.left-Ce.left+F:Dn(Ce,ye)&&(b.scrollLeft+=Ce.right-ye.right+F)),b=b.parentNode}function Kn(b,h){return b.bottom>h.bottom}function $n(b,h){return b.top<h.top}function wn(b,h){return b.left<h.left}function Dn(b,h){return b.right>h.right}function or(b){return Tn(b)?b.startContainer.ownerDocument.defaultView:b.ownerDocument.defaultView}function mr(b){if(Tn(b)){let h=b.commonAncestorContainer;return Mn(h)&&(h=h.parentNode),h}else return b.parentNode}function ao(b,h){const y=or(b),R=new Ct(b);if(y===h)return R;{let F=y;for(;F!=h;){const Y=F.frameElement,re=new Ct(Y).excludeScrollbarsAndBorders();R.moveBy(re.left,re.top),F=F.parent}}return R}function co(b){return typeof b=="number"?{top:b,bottom:b,left:b,right:b}:b}const nn={ctrl:"\u2303",cmd:"\u2318",alt:"\u2325",shift:"\u21E7"},Jt={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},Wt=kn(),No=Object.fromEntries(Object.entries(Wt).map(([b,h])=>[h,b.charAt(0).toUpperCase()+b.slice(1)]));function Nr(b){let h;if(typeof b=="string"){if(h=Wt[b.toLowerCase()],!h)throw new Re.ZP("keyboard-unknown-key",null,{key:b})}else h=b.keyCode+(b.altKey?Wt.alt:0)+(b.ctrlKey?Wt.ctrl:0)+(b.shiftKey?Wt.shift:0)+(b.metaKey?Wt.cmd:0);return h}function Lr(b){return typeof b=="string"&&(b=Jr(b)),b.map(h=>typeof h=="string"?yo(h):h).reduce((h,y)=>y+h,0)}function In(b){let h=Lr(b);return Object.entries(L.isMac?nn:Jt).reduce((F,[Y,re])=>(h&Wt[Y]&&(h&=~Wt[Y],F+=re),F),"")+(h?No[h]:"")}function Ot(b){return b==Wt.arrowright||b==Wt.arrowleft||b==Wt.arrowup||b==Wt.arrowdown}function Lo(b,h){const y=h==="ltr";switch(b){case Wt.arrowleft:return y?"left":"right";case Wt.arrowright:return y?"right":"left";case Wt.arrowup:return"up";case Wt.arrowdown:return"down"}}function yo(b){if(b.endsWith("!"))return Nr(b.slice(0,-1));const h=Nr(b);return L.isMac&&h==Wt.ctrl?Wt.cmd:h}function Gr(b,h){const y=Lo(b,h);return y==="down"||y==="right"}function kn(){const b={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let h=65;h<=90;h++){const y=String.fromCharCode(h);b[y.toLowerCase()]=h}for(let h=48;h<=57;h++)b[h-48]=h;for(let h=112;h<=123;h++)b["f"+(h-111)]=h;for(const h of"`-=[];',./\\")b[h]=h.charCodeAt(0);return b}function Jr(b){return b.split("+").map(h=>h.trim())}function Bn(b){return Array.isArray(b)?b:[b]}Et.window.CKEDITOR_TRANSLATIONS||(Et.window.CKEDITOR_TRANSLATIONS={});function Eo(b,h,y){global.window.CKEDITOR_TRANSLATIONS[b]||(global.window.CKEDITOR_TRANSLATIONS[b]={});const R=global.window.CKEDITOR_TRANSLATIONS[b];R.dictionary=R.dictionary||{},R.getPluralForm=y||R.getPluralForm,Object.assign(R.dictionary,h)}function fo(b,h,y=1){if(typeof y!="number")throw new Re.ZP("translation-service-quantity-not-a-number",null,{quantity:y});const R=$e();R===1&&(b=Object.keys(Et.window.CKEDITOR_TRANSLATIONS)[0]);const F=h.id||h.string;if(R===0||!we(b,F))return y!==1?h.plural:h.string;const Y=Et.window.CKEDITOR_TRANSLATIONS[b].dictionary,re=Et.window.CKEDITOR_TRANSLATIONS[b].getPluralForm||(Ce=>Ce===1?0:1),ue=Y[F];if(typeof ue=="string")return ue;const ye=Number(re(y));return ue[ye]}function Gn(){global.window.CKEDITOR_TRANSLATIONS={}}function we(b,h){return!!Et.window.CKEDITOR_TRANSLATIONS[b]&&!!Et.window.CKEDITOR_TRANSLATIONS[b].dictionary[h]}function $e(){return Object.keys(Et.window.CKEDITOR_TRANSLATIONS).length}const ir=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function xn(b){return ir.includes(b)?"rtl":"ltr"}class Xr{constructor({uiLanguage:h="en",contentLanguage:y}={}){this.uiLanguage=h,this.contentLanguage=y||this.uiLanguage,this.uiLanguageDirection=xn(this.uiLanguage),this.contentLanguageDirection=xn(this.contentLanguage),this.t=(R,F)=>this._t(R,F)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(h,y=[]){y=Bn(y),typeof h=="string"&&(h={string:h});const F=!!h.plural?y[0]:1,Y=fo(this.uiLanguage,h,F);return br(Y,y)}}function br(b,h){return b.replace(/%(\d+)/g,(y,R)=>R<h.length?h[R]:y)}class Fr extends ze(){constructor(h={},y={}){super();const R=gn(h);if(R||(y=h),this._items=[],this._itemMap=new Map,this._idProperty=y.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],R)for(const F of h)this._items.push(F),this._itemMap.set(this._getItemIdBeforeAdding(F),F)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(h,y){return this.addMany([h],y)}addMany(h,y){if(y===void 0)y=this._items.length;else if(y>this._items.length||y<0)throw new Re.ZP("collection-add-item-invalid-index",this);let R=0;for(const F of h){const Y=this._getItemIdBeforeAdding(F),re=y+R;this._items.splice(re,0,F),this._itemMap.set(Y,F),this.fire("add",F,re),R++}return this.fire("change",{added:h,removed:[],index:y}),this}get(h){let y;if(typeof h=="string")y=this._itemMap.get(h);else if(typeof h=="number")y=this._items[h];else throw new Re.ZP("collection-get-invalid-arg",this);return y||null}has(h){if(typeof h=="string")return this._itemMap.has(h);{const y=this._idProperty,R=h[y];return R&&this._itemMap.has(R)}}getIndex(h){let y;return typeof h=="string"?y=this._itemMap.get(h):y=h,y?this._items.indexOf(y):-1}remove(h){const[y,R]=this._remove(h);return this.fire("change",{added:[],removed:[y],index:R}),y}map(h,y){return this._items.map(h,y)}find(h,y){return this._items.find(h,y)}filter(h,y){return this._items.filter(h,y)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const h=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:h,index:0})}bindTo(h){if(this._bindToCollection)throw new Re.ZP("collection-bind-to-rebind",this);return this._bindToCollection=h,{as:y=>{this._setUpBindToBinding(R=>new y(R))},using:y=>{typeof y=="function"?this._setUpBindToBinding(y):this._setUpBindToBinding(R=>R[y])}}}_setUpBindToBinding(h){const y=this._bindToCollection,R=(F,Y,re)=>{const ue=y._bindToCollection==this,ye=y._bindToInternalToExternalMap.get(Y);if(ue&&ye)this._bindToExternalToInternalMap.set(Y,ye),this._bindToInternalToExternalMap.set(ye,Y);else{const Ce=h(Y);if(!Ce){this._skippedIndexesFromExternal.push(re);return}let Je=re;for(const qe of this._skippedIndexesFromExternal)re>qe&&Je--;for(const qe of y._skippedIndexesFromExternal)Je>=qe&&Je++;this._bindToExternalToInternalMap.set(Y,Ce),this._bindToInternalToExternalMap.set(Ce,Y),this.add(Ce,Je);for(let qe=0;qe<y._skippedIndexesFromExternal.length;qe++)Je<=y._skippedIndexesFromExternal[qe]&&y._skippedIndexesFromExternal[qe]++}};for(const F of y)R(null,F,y.getIndex(F));this.listenTo(y,"add",R),this.listenTo(y,"remove",(F,Y,re)=>{const ue=this._bindToExternalToInternalMap.get(Y);ue&&this.remove(ue),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((ye,Ce)=>(re<Ce&&ye.push(Ce-1),re>Ce&&ye.push(Ce),ye),[])})}_getItemIdBeforeAdding(h){const y=this._idProperty;let R;if(y in h){if(R=h[y],typeof R!="string")throw new Re.ZP("collection-add-invalid-id",this);if(this.get(R))throw new Re.ZP("collection-add-item-already-exists",this)}else h[y]=R=Ee();return R}_remove(h){let y,R,F,Y=!1;const re=this._idProperty;if(typeof h=="string"?(R=h,F=this._itemMap.get(R),Y=!F,F&&(y=this._items.indexOf(F))):typeof h=="number"?(y=h,F=this._items[y],Y=!F,F&&(R=F[re])):(F=h,R=F[re],y=this._items.indexOf(F),Y=y==-1||!this._itemMap.get(R)),Y)throw new Re.ZP("collection-remove-404",this);this._items.splice(y,1),this._itemMap.delete(R);const ue=this._bindToInternalToExternalMap.get(F);return this._bindToInternalToExternalMap.delete(F),this._bindToExternalToInternalMap.delete(ue),this.fire("remove",F,y),[F,y]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}function Yr(b){const h=b.next();return h.done?null:h.value}class wr extends mn(Vt()){constructor(){super(),this._elements=new Set,this._nextEventLoopTimeout=null,this.set("isFocused",!1),this.set("focusedElement",null)}add(h){if(this._elements.has(h))throw new Re.ZP("focustracker-add-element-already-exist",this);this.listenTo(h,"focus",()=>this._focus(h),{useCapture:!0}),this.listenTo(h,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(h)}remove(h){h===this.focusedElement&&this._blur(),this._elements.has(h)&&(this.stopListening(h),this._elements.delete(h))}destroy(){this.stopListening()}_focus(h){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=h,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}class kr{constructor(){this._listener=new(mn())}listenTo(h){this._listener.listenTo(h,"keydown",(y,R)=>{this._listener.fire("_keydown:"+Nr(R),R)})}set(h,y,R={}){const F=Lr(h),Y=R.priority;this._listener.listenTo(this._listener,"_keydown:"+F,(re,ue)=>{y(ue,()=>{ue.preventDefault(),ue.stopPropagation(),re.stop()}),re.return=!0},{priority:Y})}press(h){return!!this._listener.fire("_keydown:"+Nr(h),h)}stopListening(h){this._listener.stopListening(h)}destroy(){this.stopListening()}}function To(b){const h=new Map;for(const y in b)h.set(y,b[y]);return h}function vr(b){return gn(b)?new Map(b):To(b)}const Po=1e4;function sr(b,h,y,R){if(Math.max(h.length,b.length)>Po)return b.slice(0,y).concat(h).concat(b.slice(y+R,b.length));{const F=Array.from(b);return F.splice(y,R,...h),F}}function Dt(b,h){let y;function R(...F){R.cancel(),y=setTimeout(()=>b(...F),h)}return R.cancel=()=>{clearTimeout(y)},R}function Jn(b){function h(qe){return qe.length>=40&&qe.length<=255?"VALID":"INVALID"}if(!b)return"INVALID";let y="";try{y=atob(b)}catch(qe){return"INVALID"}const R=y.split("-"),F=R[0],Y=R[1];if(!Y)return h(b);try{atob(Y)}catch(qe){try{if(atob(F),!atob(F).length)return h(b)}catch(Xt){return h(b)}}if(F.length<40||F.length>255)return"INVALID";let re="";try{atob(F),re=atob(Y)}catch(qe){return"INVALID"}if(re.length!==8)return"INVALID";const ue=Number(re.substring(0,4)),ye=Number(re.substring(4,6))-1,Ce=Number(re.substring(6,8)),Je=new Date(ue,ye,Ce);return Je<We.D||isNaN(Number(Je))?"INVALID":"VALID"}function zr(b){return!!b&&b.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(b)}function ar(b){return!!b&&b.length==1&&/[\ud800-\udbff]/.test(b)}function yr(b){return!!b&&b.length==1&&/[\udc00-\udfff]/.test(b)}function Co(b,h){return ar(b.charAt(h-1))&&yr(b.charAt(h))}function go(b,h){return zr(b.charAt(h))}const _o=xo();function po(b,h){const y=String(b).matchAll(_o);return Array.from(y).some(R=>R.index<h&&h<R.index+R[0].length)}function xo(){const b=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],h=new RegExp("\\p{Regional_Indicator}{2}","u").source,y="(?:"+b.map(F=>F.source).join("|")+")",R=`${h}|${y}(?:\u200D${y})*`;return new RegExp(R,"ug")}},55379:function(J,j,u){"use strict";u.d(j,{D:function(){return L}});var v=u(3018);const V="39.0.2";var C=null;const L=new Date(2023,8,6);if(globalThis.CKEDITOR_VERSION)throw new v.ZP("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=V},99973:function(J,j,u){"use strict";u.d(j,{ML:function(){return v.ML},P$:function(){return v.P$},Sy:function(){return v.Sy},W9:function(){return v.W9},_y:function(){return v._y},ci:function(){return v.icons},mY:function(){return v.mY},xK:function(){return v.xK}});var v=u(95770);},99314:function(J,j,u){"use strict";u.d(j,{S8:function(){return v.S8},iw:function(){return v.iw},jB:function(){return v.jB},lp:function(){return v.lp},py:function(){return v.py},r1:function(){return v.r1},r5:function(){return v.r5}});var v=u(58522);},5101:function(J,j,u){const v=u(99419),V={};for(const m of Object.keys(v))V[v[m]]=m;const C={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};J.exports=C;for(const m of Object.keys(C)){if(!("channels"in C[m]))throw new Error("missing channels property: "+m);if(!("labels"in C[m]))throw new Error("missing channel labels property: "+m);if(C[m].labels.length!==C[m].channels)throw new Error("channel and label counts mismatch: "+m);const{channels:B,labels:M}=C[m];delete C[m].channels,delete C[m].labels,Object.defineProperty(C[m],"channels",{value:B}),Object.defineProperty(C[m],"labels",{value:M})}C.rgb.hsl=function(m){const B=m[0]/255,M=m[1]/255,D=m[2]/255,O=Math.min(B,M,D),W=Math.max(B,M,D),z=W-O;let q,te;W===O?q=0:B===W?q=(M-D)/z:M===W?q=2+(D-B)/z:D===W&&(q=4+(B-M)/z),q=Math.min(q*60,360),q<0&&(q+=360);const de=(O+W)/2;return W===O?te=0:de<=.5?te=z/(W+O):te=z/(2-W-O),[q,te*100,de*100]},C.rgb.hsv=function(m){let B,M,D,O,W;const z=m[0]/255,q=m[1]/255,te=m[2]/255,de=Math.max(z,q,te),he=de-Math.min(z,q,te),Ie=function(T){return(de-T)/6/he+1/2};return he===0?(O=0,W=0):(W=he/de,B=Ie(z),M=Ie(q),D=Ie(te),z===de?O=D-M:q===de?O=1/3+B-D:te===de&&(O=2/3+M-B),O<0?O+=1:O>1&&(O-=1)),[O*360,W*100,de*100]},C.rgb.hwb=function(m){const B=m[0],M=m[1];let D=m[2];const O=C.rgb.hsl(m)[0],W=1/255*Math.min(B,Math.min(M,D));return D=1-1/255*Math.max(B,Math.max(M,D)),[O,W*100,D*100]},C.rgb.cmyk=function(m){const B=m[0]/255,M=m[1]/255,D=m[2]/255,O=Math.min(1-B,1-M,1-D),W=(1-B-O)/(1-O)||0,z=(1-M-O)/(1-O)||0,q=(1-D-O)/(1-O)||0;return[W*100,z*100,q*100,O*100]};function L(m,B){return an(m[0]-B[0],2)+an(m[1]-B[1],2)+an(m[2]-B[2],2)}C.rgb.keyword=function(m){const B=V[m];if(B)return B;let M=1/0,D;for(const O of Object.keys(v)){const W=v[O],z=L(m,W);z<M&&(M=z,D=O)}return D},C.keyword.rgb=function(m){return v[m]},C.rgb.xyz=function(m){let B=m[0]/255,M=m[1]/255,D=m[2]/255;B=B>.04045?an((B+.055)/1.055,2.4):B/12.92,M=M>.04045?an((M+.055)/1.055,2.4):M/12.92,D=D>.04045?an((D+.055)/1.055,2.4):D/12.92;const O=B*.4124+M*.3576+D*.1805,W=B*.2126+M*.7152+D*.0722,z=B*.0193+M*.1192+D*.9505;return[O*100,W*100,z*100]},C.rgb.lab=function(m){const B=C.rgb.xyz(m);let M=B[0],D=B[1],O=B[2];M/=95.047,D/=100,O/=108.883,M=M>.008856?an(M,1/3):7.787*M+16/116,D=D>.008856?an(D,1/3):7.787*D+16/116,O=O>.008856?an(O,1/3):7.787*O+16/116;const W=116*D-16,z=500*(M-D),q=200*(D-O);return[W,z,q]},C.hsl.rgb=function(m){const B=m[0]/360,M=m[1]/100,D=m[2]/100;let O,W,z;if(M===0)return z=D*255,[z,z,z];D<.5?O=D*(1+M):O=D+M-D*M;const q=2*D-O,te=[0,0,0];for(let de=0;de<3;de++)W=B+1/3*-(de-1),W<0&&W++,W>1&&W--,6*W<1?z=q+(O-q)*6*W:2*W<1?z=O:3*W<2?z=q+(O-q)*(2/3-W)*6:z=q,te[de]=z*255;return te},C.hsl.hsv=function(m){const B=m[0];let M=m[1]/100,D=m[2]/100,O=M;const W=Math.max(D,.01);D*=2,M*=D<=1?D:2-D,O*=W<=1?W:2-W;const z=(D+M)/2,q=D===0?2*O/(W+O):2*M/(D+M);return[B,q*100,z*100]},C.hsv.rgb=function(m){const B=m[0]/60,M=m[1]/100;let D=m[2]/100;const O=Math.floor(B)%6,W=B-Math.floor(B),z=255*D*(1-M),q=255*D*(1-M*W),te=255*D*(1-M*(1-W));switch(D*=255,O){case 0:return[D,te,z];case 1:return[q,D,z];case 2:return[z,D,te];case 3:return[z,q,D];case 4:return[te,z,D];case 5:return[D,z,q]}},C.hsv.hsl=function(m){const B=m[0],M=m[1]/100,D=m[2]/100,O=Math.max(D,.01);let W,z;z=(2-M)*D;const q=(2-M)*O;return W=M*O,W/=q<=1?q:2-q,W=W||0,z/=2,[B,W*100,z*100]},C.hwb.rgb=function(m){const B=m[0]/360;let M=m[1]/100,D=m[2]/100;const O=M+D;let W;O>1&&(M/=O,D/=O);const z=Math.floor(6*B),q=1-D;W=6*B-z,z&1&&(W=1-W);const te=M+W*(q-M);let de,he,Ie;switch(z){default:case 6:case 0:de=q,he=te,Ie=M;break;case 1:de=te,he=q,Ie=M;break;case 2:de=M,he=q,Ie=te;break;case 3:de=M,he=te,Ie=q;break;case 4:de=te,he=M,Ie=q;break;case 5:de=q,he=M,Ie=te;break}return[de*255,he*255,Ie*255]},C.cmyk.rgb=function(m){const B=m[0]/100,M=m[1]/100,D=m[2]/100,O=m[3]/100,W=1-Math.min(1,B*(1-O)+O),z=1-Math.min(1,M*(1-O)+O),q=1-Math.min(1,D*(1-O)+O);return[W*255,z*255,q*255]},C.xyz.rgb=function(m){const B=m[0]/100,M=m[1]/100,D=m[2]/100;let O,W,z;return O=B*3.2406+M*-1.5372+D*-.4986,W=B*-.9689+M*1.8758+D*.0415,z=B*.0557+M*-.204+D*1.057,O=O>.0031308?1.055*an(O,1/2.4)-.055:O*12.92,W=W>.0031308?1.055*an(W,1/2.4)-.055:W*12.92,z=z>.0031308?1.055*an(z,1/2.4)-.055:z*12.92,O=Math.min(Math.max(0,O),1),W=Math.min(Math.max(0,W),1),z=Math.min(Math.max(0,z),1),[O*255,W*255,z*255]},C.xyz.lab=function(m){let B=m[0],M=m[1],D=m[2];B/=95.047,M/=100,D/=108.883,B=B>.008856?an(B,1/3):7.787*B+16/116,M=M>.008856?an(M,1/3):7.787*M+16/116,D=D>.008856?an(D,1/3):7.787*D+16/116;const O=116*M-16,W=500*(B-M),z=200*(M-D);return[O,W,z]},C.lab.xyz=function(m){const B=m[0],M=m[1],D=m[2];let O,W,z;W=(B+16)/116,O=M/500+W,z=W-D/200;const q=an(W,3),te=an(O,3),de=an(z,3);return W=q>.008856?q:(W-16/116)/7.787,O=te>.008856?te:(O-16/116)/7.787,z=de>.008856?de:(z-16/116)/7.787,O*=95.047,W*=100,z*=108.883,[O,W,z]},C.lab.lch=function(m){const B=m[0],M=m[1],D=m[2];let O;O=Math.atan2(D,M)*360/2/Math.PI,O<0&&(O+=360);const z=Math.sqrt(M*M+D*D);return[B,z,O]},C.lch.lab=function(m){const B=m[0],M=m[1],O=m[2]/360*2*Math.PI,W=M*Math.cos(O),z=M*Math.sin(O);return[B,W,z]},C.rgb.ansi16=function(m,B=null){const[M,D,O]=m;let W=B===null?C.rgb.hsv(m)[2]:B;if(W=Math.round(W/50),W===0)return 30;let z=30+(Math.round(O/255)<<2|Math.round(D/255)<<1|Math.round(M/255));return W===2&&(z+=60),z},C.hsv.ansi16=function(m){return C.rgb.ansi16(C.hsv.rgb(m),m[2])},C.rgb.ansi256=function(m){const B=m[0],M=m[1],D=m[2];return B===M&&M===D?B<8?16:B>248?231:Math.round((B-8)/247*24)+232:16+36*Math.round(B/255*5)+6*Math.round(M/255*5)+Math.round(D/255*5)},C.ansi16.rgb=function(m){let B=m%10;if(B===0||B===7)return m>50&&(B+=3.5),B=B/10.5*255,[B,B,B];const M=(~~(m>50)+1)*.5,D=(B&1)*M*255,O=(B>>1&1)*M*255,W=(B>>2&1)*M*255;return[D,O,W]},C.ansi256.rgb=function(m){if(m>=232){const W=(m-232)*10+8;return[W,W,W]}m-=16;let B;const M=Math.floor(m/36)/5*255,D=Math.floor((B=m%36)/6)/5*255,O=B%6/5*255;return[M,D,O]},C.rgb.hex=function(m){const M=(((Math.round(m[0])&255)<<16)+((Math.round(m[1])&255)<<8)+(Math.round(m[2])&255)).toString(16).toUpperCase();return"000000".substring(M.length)+M},C.hex.rgb=function(m){const B=m.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!B)return[0,0,0];let M=B[0];B[0].length===3&&(M=M.split("").map(q=>q+q).join(""));const D=parseInt(M,16),O=D>>16&255,W=D>>8&255,z=D&255;return[O,W,z]},C.rgb.hcg=function(m){const B=m[0]/255,M=m[1]/255,D=m[2]/255,O=Math.max(Math.max(B,M),D),W=Math.min(Math.min(B,M),D),z=O-W;let q,te;return z<1?q=W/(1-z):q=0,z<=0?te=0:O===B?te=(M-D)/z%6:O===M?te=2+(D-B)/z:te=4+(B-M)/z,te/=6,te%=1,[te*360,z*100,q*100]},C.hsl.hcg=function(m){const B=m[1]/100,M=m[2]/100,D=M<.5?2*B*M:2*B*(1-M);let O=0;return D<1&&(O=(M-.5*D)/(1-D)),[m[0],D*100,O*100]},C.hsv.hcg=function(m){const B=m[1]/100,M=m[2]/100,D=B*M;let O=0;return D<1&&(O=(M-D)/(1-D)),[m[0],D*100,O*100]},C.hcg.rgb=function(m){const B=m[0]/360,M=m[1]/100,D=m[2]/100;if(M===0)return[D*255,D*255,D*255];const O=[0,0,0],W=B%1*6,z=W%1,q=1-z;let te=0;switch(Math.floor(W)){case 0:O[0]=1,O[1]=z,O[2]=0;break;case 1:O[0]=q,O[1]=1,O[2]=0;break;case 2:O[0]=0,O[1]=1,O[2]=z;break;case 3:O[0]=0,O[1]=q,O[2]=1;break;case 4:O[0]=z,O[1]=0,O[2]=1;break;default:O[0]=1,O[1]=0,O[2]=q}return te=(1-M)*D,[(M*O[0]+te)*255,(M*O[1]+te)*255,(M*O[2]+te)*255]},C.hcg.hsv=function(m){const B=m[1]/100,M=m[2]/100,D=B+M*(1-B);let O=0;return D>0&&(O=B/D),[m[0],O*100,D*100]},C.hcg.hsl=function(m){const B=m[1]/100,D=m[2]/100*(1-B)+.5*B;let O=0;return D>0&&D<.5?O=B/(2*D):D>=.5&&D<1&&(O=B/(2*(1-D))),[m[0],O*100,D*100]},C.hcg.hwb=function(m){const B=m[1]/100,M=m[2]/100,D=B+M*(1-B);return[m[0],(D-B)*100,(1-D)*100]},C.hwb.hcg=function(m){const B=m[1]/100,D=1-m[2]/100,O=D-B;let W=0;return O<1&&(W=(D-O)/(1-O)),[m[0],O*100,W*100]},C.apple.rgb=function(m){return[m[0]/65535*255,m[1]/65535*255,m[2]/65535*255]},C.rgb.apple=function(m){return[m[0]/255*65535,m[1]/255*65535,m[2]/255*65535]},C.gray.rgb=function(m){return[m[0]/100*255,m[0]/100*255,m[0]/100*255]},C.gray.hsl=function(m){return[0,0,m[0]]},C.gray.hsv=C.gray.hsl,C.gray.hwb=function(m){return[0,100,m[0]]},C.gray.cmyk=function(m){return[0,0,0,m[0]]},C.gray.lab=function(m){return[m[0],0,0]},C.gray.hex=function(m){const B=Math.round(m[0]/100*255)&255,D=((B<<16)+(B<<8)+B).toString(16).toUpperCase();return"000000".substring(D.length)+D},C.rgb.gray=function(m){return[(m[0]+m[1]+m[2])/3/255*100]}},2771:function(J,j,u){const v=u(5101),V=u(3153),C={},L=Object.keys(v);function m(M){const D=function(...O){const W=O[0];return W==null?W:(W.length>1&&(O=W),M(O))};return"conversion"in M&&(D.conversion=M.conversion),D}function B(M){const D=function(...O){const W=O[0];if(W==null)return W;W.length>1&&(O=W);const z=M(O);if(typeof z=="object")for(let q=z.length,te=0;te<q;te++)z[te]=Math.round(z[te]);return z};return"conversion"in M&&(D.conversion=M.conversion),D}L.forEach(M=>{C[M]={},Object.defineProperty(C[M],"channels",{value:v[M].channels}),Object.defineProperty(C[M],"labels",{value:v[M].labels});const D=V(M);Object.keys(D).forEach(W=>{const z=D[W];C[M][W]=B(z),C[M][W].raw=m(z)})}),J.exports=C},3153:function(J,j,u){const v=u(5101);function V(){const B={},M=Object.keys(v);for(let D=M.length,O=0;O<D;O++)B[M[O]]={distance:-1,parent:null};return B}function C(B){const M=V(),D=[B];for(M[B].distance=0;D.length;){const O=D.pop(),W=Object.keys(v[O]);for(let z=W.length,q=0;q<z;q++){const te=W[q],de=M[te];de.distance===-1&&(de.distance=M[O].distance+1,de.parent=O,D.unshift(te))}}return M}function L(B,M){return function(D){return M(B(D))}}function m(B,M){const D=[M[B].parent,B];let O=v[M[B].parent][B],W=M[B].parent;for(;M[W].parent;)D.unshift(M[W].parent),O=L(v[M[W].parent][W],O),W=M[W].parent;return O.conversion=D,O}J.exports=function(B){const M=C(B),D={},O=Object.keys(M);for(let W=O.length,z=0;z<W;z++){const q=O[z];M[q].parent!==null&&(D[q]=m(q,M))}return D}},99419:function(J){"use strict";J.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},20547:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,'.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position{display:inline;pointer-events:none;position:relative}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{position:absolute;width:0}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__selection-handle,.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__type-around{display:none}.ck.ck-clipboard-drop-target-line{pointer-events:none;position:absolute}:root{--ck-clipboard-drop-target-dot-width:12px;--ck-clipboard-drop-target-dot-height:8px;--ck-clipboard-drop-target-color:var(--ck-color-focus-border)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{background:var(--ck-clipboard-drop-target-color);border:1px solid var(--ck-clipboard-drop-target-color);bottom:calc(var(--ck-clipboard-drop-target-dot-height)*-.5);margin-left:-1px;top:calc(var(--ck-clipboard-drop-target-dot-height)*-.5)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span:after{border-color:var(--ck-clipboard-drop-target-color) transparent transparent transparent;border-style:solid;border-width:calc(var(--ck-clipboard-drop-target-dot-height)) calc(var(--ck-clipboard-drop-target-dot-width)*.5) 0 calc(var(--ck-clipboard-drop-target-dot-width)*.5);content:"";display:block;height:0;left:50%;position:absolute;top:calc(var(--ck-clipboard-drop-target-dot-height)*-.5);transform:translateX(-50%);width:0}.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range{outline:var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color)!important}.ck.ck-editor__editable .ck-widget:-webkit-drag{zoom:.6;outline:none!important}.ck.ck-clipboard-drop-target-line{background:var(--ck-clipboard-drop-target-color);border:1px solid var(--ck-clipboard-drop-target-color);height:0;margin-top:-1px}',""]),j.Z=m},64586:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}",""]),j.Z=m},38709:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck .ck-placeholder,.ck.ck-placeholder{position:relative}.ck .ck-placeholder:before,.ck.ck-placeholder:before{content:attr(data-placeholder);left:0;pointer-events:none;position:absolute;right:0}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-reset_all .ck-placeholder{position:relative}.ck .ck-placeholder:before,.ck.ck-placeholder:before{color:var(--ck-color-engine-placeholder-text);cursor:text}",""]),j.Z=m},9379:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-editor__editable span[data-ck-unsafe-element]{display:none}",""]),j.Z=m},568:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-button,a.ck.ck-button{align-items:center;display:inline-flex;justify-content:left;position:relative;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{-webkit-appearance:none;border:1px solid transparent;cursor:default;font-size:inherit;line-height:1;min-height:var(--ck-ui-component-min-height);min-width:var(--ck-ui-component-min-height);padding:var(--ck-spacing-tiny);text-align:center;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;vertical-align:middle;white-space:nowrap}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{color:inherit;cursor:inherit;font-size:inherit;font-weight:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:var(--ck-spacing-small);margin-right:calc(var(--ck-spacing-small)*-1)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{color:var(--ck-color-button-on-color)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}",""]),j.Z=m},31127:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:calc(1.07692em + 1px);--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - 2px);--ck-switch-button-inner-hover-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton,.ck.ck-button.ck-switchbutton.ck-on:active,.ck.ck-button.ck-switchbutton.ck-on:focus,.ck.ck-button.ck-switchbutton.ck-on:hover,.ck.ck-button.ck-switchbutton:active,.ck.ck-button.ck-switchbutton:focus,.ck.ck-button.ck-switchbutton:hover{background:transparent;color:inherit}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(var(--ck-spacing-large)*2)}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(var(--ck-spacing-large)*2)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{background:var(--ck-color-switch-button-off-background);border:1px solid transparent;transition:background .4s ease,box-shadow .2s ease-in-out,outline .2s ease-in-out;width:var(--ck-switch-button-toggle-width)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(var(--ck-border-radius)*.5)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{background:var(--ck-color-switch-button-inner-background);height:var(--ck-switch-button-toggle-inner-size);transition:all .3s ease;width:var(--ck-switch-button-toggle-inner-size)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:var(--ck-switch-button-inner-hover-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton:focus{border-color:transparent;box-shadow:none;outline:none}.ck.ck-button.ck-switchbutton:focus .ck-button__toggle{box-shadow:0 0 0 1px var(--ck-color-base-background),0 0 0 5px var(--ck-color-focus-outer-shadow);outline:var(--ck-focus-ring);outline-offset:1px}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var( --ck-switch-button-translation ))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(var( --ck-switch-button-translation )*-1))}",""]),j.Z=m},38929:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#166fd4}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{border:0;height:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;width:var(--ck-color-grid-tile-size)}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-selector__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{color:var(--ck-color-color-grid-check-icon);display:none}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}",""]),j.Z=m},87101:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".color-picker-hex-input{width:max-content}.color-picker-hex-input .ck.ck-input{min-width:unset}.ck.ck-color-picker__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;margin:var(--ck-spacing-large) 0 0;width:unset}.ck.ck-color-picker__row .ck.ck-labeled-field-view{padding-top:unset}.ck.ck-color-picker__row .ck.ck-input-text{width:unset}.ck.ck-color-picker__row .ck-color-picker__hash-view{padding-right:var(--ck-spacing-medium);padding-top:var(--ck-spacing-tiny)}",""]),j.Z=m},84780:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker,.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color{align-items:center;display:flex}[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker,[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color{justify-content:flex-start}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar{display:flex;flex-direction:row;justify-content:space-around}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar .ck-button-cancel,.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar .ck-button-save{flex:1}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker,.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color{width:100%}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker{border-bottom-left-radius:0;border-bottom-right-radius:0;padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard)}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker:not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker .ck.ck-icon{margin-left:var(--ck-spacing-standard)}.ck.ck-color-selector .ck-color-grids-fragment label.ck.ck-color-grid__label{font-weight:unset}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker{padding:8px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker{height:100px;min-width:180px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(saturation){border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(hue){border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius)}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(hue-pointer),.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(saturation-pointer){height:15px;width:15px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar{padding:0 8px 8px}",""]),j.Z=m},38501:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,":root{--ck-dropdown-max-width:75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-dropdown__panel{display:none;max-width:var(--ck-dropdown-max-width);position:absolute;z-index:var(--ck-z-modal)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{bottom:auto;top:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{left:50%;transform:translateX(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translateX(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translateX(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-modal) + 1)}:root{--ck-dropdown-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{margin-left:var(--ck-spacing-standard);right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{overflow:hidden;text-overflow:ellipsis;width:7em}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;box-shadow:var(--ck-drop-shadow),0 0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}.ck.ck-dropdown__panel:focus{outline:none}",""]),j.Z=m},53128:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}",""]),j.Z=m},21700:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,'.ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-bottom-right-radius:unset;border-top-right-radius:unset}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-bottom-left-radius:unset;border-top-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-bottom-left-radius:unset;border-top-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-bottom-right-radius:unset;border-top-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton>.ck-splitbutton__arrow:not(:focus){border-bottom-width:0;border-top-width:0}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{background-color:var(--ck-color-split-button-hover-border);content:"";height:100%;position:absolute;width:1px}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:focus:after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:focus:after{--ck-color-split-button-hover-border:var(--ck-color-focus-border)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{left:-1px}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{right:-1px}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}',""]),j.Z=m},78177:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,":root{--ck-toolbar-dropdown-max-width:60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{max-width:var(--ck-toolbar-dropdown-max-width);width:max-content}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}",""]),j.Z=m},36662:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,":root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable.ck-rounded-corners:not(.ck-editor__nested-editable){border-radius:var(--ck-border-radius)}.ck.ck-editor__editable.ck-focused:not(.ck-editor__nested-editable){border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;outline:none}.ck.ck-editor__editable_inline{border:1px solid transparent;overflow:auto;padding:0 var(--ck-spacing-standard)}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background)}",""]),j.Z=m},63617:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-form__header{align-items:center;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}:root{--ck-form-header-height:38px}.ck.ck-form__header{border-bottom:1px solid var(--ck-color-base-border);height:var(--ck-form-header-height);line-height:var(--ck-form-header-height);padding:var(--ck-spacing-small) var(--ck-spacing-large)}.ck.ck-form__header .ck-form__header__label{font-weight:700}",""]),j.Z=m},18708:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{font-size:.8333350694em;height:var(--ck-icon-size);width:var(--ck-icon-size);will-change:transform}.ck.ck-icon,.ck.ck-icon *{cursor:inherit}.ck.ck-icon.ck-icon_inherit-color,.ck.ck-icon.ck-icon_inherit-color *{color:inherit}.ck.ck-icon.ck-icon_inherit-color :not([fill]){fill:currentColor}",""]),j.Z=m},27741:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,":root{--ck-input-width:18em;--ck-input-text-width:var(--ck-input-width)}.ck.ck-input{border-radius:0}.ck-rounded-corners .ck.ck-input,.ck.ck-input.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input{background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);min-height:var(--ck-ui-component-min-height);min-width:var(--ck-input-width);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck.ck-input:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-input[readonly]{background:var(--ck-color-input-disabled-background);border:1px solid var(--ck-color-input-disabled-border);color:var(--ck-color-input-disabled-text)}.ck.ck-input[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input.ck-error{animation:ck-input-shake .3s ease both;border-color:var(--ck-color-input-error-border)}.ck.ck-input.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}",""]),j.Z=m},72580:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}",""]),j.Z=m},22711:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}:root{--ck-labeled-field-view-transition:.1s cubic-bezier(0,0,0.24,0.95);--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-spacing-medium);--ck-labeled-field-label-default-position-x:var(--ck-spacing-medium);--ck-labeled-field-label-default-position-y:calc(var(--ck-font-size-base)*0.6);--ck-color-labeled-field-label-background:var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{top:0}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{background:var(--ck-color-labeled-field-label-background);font-weight:400;line-height:normal;max-width:100%;overflow:hidden;padding:0 calc(var(--ck-font-size-tiny)*.5);pointer-events:none;text-overflow:ellipsis;transform:translate(var(--ck-spacing-medium),-6px) scale(.75);transform-origin:0 0;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label,.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-labeled-field-label-default-position-x),var(--ck-labeled-field-label-default-position-y)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(var(--ck-labeled-field-label-default-position-x)*-1),var(--ck-labeled-field-label-default-position-y)) scale(1)}.ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{background:transparent;max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));padding:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}",""]),j.Z=m},26272:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-list{display:flex;flex-direction:column;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{background:var(--ck-color-list-background);list-style-type:none}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{border-radius:0;min-height:unset;padding:calc(var(--ck-line-height-base)*.2*var(--ck-font-size-base)) calc(var(--ck-line-height-base)*.4*var(--ck-font-size-base));text-align:left;width:100%}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(var(--ck-line-height-base)*1.2*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-switchbutton):not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{background:var(--ck-color-base-border);height:1px;width:100%}",""]),j.Z=m},76159:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-border-width:1px;--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px;--ck-balloon-arrow-drop-shadow:0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{background:var(--ck-color-panel-background);border:var(--ck-balloon-border-width) solid var(--ck-color-panel-border);box-shadow:var(--ck-drop-shadow),0 0;min-height:15px}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{border-style:solid;height:0;width:0}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-width:0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_n]:before{border-color:transparent transparent var(--ck-color-panel-border) transparent;margin-top:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_n]:after{border-color:transparent transparent var(--ck-color-panel-background) transparent;margin-top:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-width:var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-color:var(--ck-color-panel-border) transparent transparent;filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow));margin-bottom:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_s]:after{border-color:var(--ck-color-panel-background) transparent transparent transparent;margin-bottom:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_e]:after,.ck.ck-balloon-panel[class*=arrow_e]:before{border-width:var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_e]:before{border-color:transparent transparent transparent var(--ck-color-panel-border);margin-right:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_e]:after{border-color:transparent transparent transparent var(--ck-color-panel-background);margin-right:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_w]:after,.ck.ck-balloon-panel[class*=arrow_w]:before{border-width:var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0}.ck.ck-balloon-panel[class*=arrow_w]:before{border-color:transparent var(--ck-color-panel-border) transparent transparent;margin-left:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_w]:after{border-color:transparent var(--ck-color-panel-background) transparent transparent;margin-left:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);right:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);margin-right:calc(var(--ck-balloon-arrow-half-width)*2);right:25%}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{margin-right:calc(var(--ck-balloon-arrow-half-width)*2);right:25%;top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:before{margin-top:calc(var(--ck-balloon-arrow-half-width)*-1);right:calc(var(--ck-balloon-arrow-height)*-1);top:50%}.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:before{left:calc(var(--ck-balloon-arrow-height)*-1);margin-top:calc(var(--ck-balloon-arrow-half-width)*-1);top:50%}',""]),j.Z=m},65279:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck .ck-balloon-rotator__navigation{align-items:center;display:flex;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-bottom:var(--ck-spacing-small);margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-left:var(--ck-spacing-small);margin-right:var(--ck-spacing-standard)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}",""]),j.Z=m},94656:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);box-shadow:var(--ck-drop-shadow),0 0;height:100%;min-height:15px;width:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}",""]),j.Z=m},74315:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{position:fixed;top:0;z-index:var(--ck-z-modal)}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{position:absolute;top:auto}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{border-top-left-radius:0;border-top-right-radius:0;border-width:0 1px 1px;box-shadow:var(--ck-drop-shadow),0 0}",""]),j.Z=m},31957:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-block-toolbar-button{position:absolute;z-index:var(--ck-z-default)}:root{--ck-color-block-toolbar-button:var(--ck-color-text);--ck-block-toolbar-button-size:var(--ck-font-size-normal)}.ck.ck-block-toolbar-button{color:var(--ck-color-block-toolbar-button);font-size:var(--ck-block-toolbar-size)}",""]),j.Z=m},87478:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-toolbar{align-items:center;display:flex;flex-flow:row nowrap;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-toolbar>.ck-toolbar__items{align-items:center;display:flex;flex-flow:row wrap;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);border:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;background:var(--ck-color-toolbar-border);margin-bottom:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);min-width:1px;width:1px}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-bottom:var(--ck-spacing-small);margin-top:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{border-radius:0;margin:0;width:100%}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-dropdown__panel{min-width:auto}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-button>.ck-button__label{max-width:7em;width:auto}.ck.ck-toolbar:focus{outline:none}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-bottom-right-radius:0;border-top-right-radius:0}.ck.ck-toolbar.ck-toolbar_grouping[dir=rtl]>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-bottom-right-radius:0;border-top-right-radius:0}.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-toolbar.ck-toolbar_grouping[dir=ltr]>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}",""]),j.Z=m},35756:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck.ck-balloon-panel.ck-tooltip{--ck-balloon-border-width:0px;--ck-balloon-arrow-offset:0px;--ck-balloon-arrow-half-width:4px;--ck-balloon-arrow-height:4px;--ck-color-panel-background:var(--ck-color-tooltip-background);padding:0 var(--ck-spacing-medium);pointer-events:none;z-index:calc(var(--ck-z-modal) + 100)}.ck.ck-balloon-panel.ck-tooltip .ck-tooltip__text{color:var(--ck-color-tooltip-text);font-size:.9em;line-height:1.5}.ck.ck-balloon-panel.ck-tooltip{box-shadow:none}.ck.ck-balloon-panel.ck-tooltip:before{display:none}",""]),j.Z=m},82727:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck-hidden{display:none!important}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset,.ck.ck-reset_all{box-sizing:border-box;height:auto;position:static;width:auto}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999)}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-powered-by-line-height:10px;--ck-powered-by-padding-vertical:2px;--ck-powered-by-padding-horizontal:4px;--ck-powered-by-text-color:#4f4f4f;--ck-powered-by-border-radius:var(--ck-border-radius);--ck-powered-by-background:#fff;--ck-powered-by-border-color:var(--ck-color-focus-border)}.ck.ck-balloon-panel.ck-powered-by-balloon{--ck-border-radius:var(--ck-powered-by-border-radius);background:var(--ck-powered-by-background);box-shadow:none;min-height:unset;z-index:calc(var(--ck-z-modal) - 1)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by{line-height:var(--ck-powered-by-line-height)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by a{align-items:center;cursor:pointer;display:flex;filter:grayscale(80%);line-height:var(--ck-powered-by-line-height);opacity:.66;padding:var(--ck-powered-by-padding-vertical) var(--ck-powered-by-padding-horizontal)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by .ck-powered-by__label{color:var(--ck-powered-by-text-color);cursor:pointer;font-size:7.5px;font-weight:700;letter-spacing:-.2px;line-height:normal;margin-right:4px;padding-left:2px;text-transform:uppercase}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by .ck-icon{cursor:pointer;display:block}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by:hover a{filter:grayscale(0);opacity:1}.ck.ck-balloon-panel.ck-powered-by-balloon[class*=position_inside]{border-color:transparent}.ck.ck-balloon-panel.ck-powered-by-balloon[class*=position_border]{border:var(--ck-focus-ring);border-color:var(--ck-powered-by-border-color)}:root{--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#ccced1;--ck-color-base-action:#53a336;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#2977ff;--ck-color-base-active-focus:#0d65ff;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:218,81.8%,56.9%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#cae1fc;--ck-color-focus-disabled-shadow:rgba(119,186,248,.3);--ck-color-focus-error-shadow:rgba(255,64,31,.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,.15);--ck-color-shadow-drop-active:rgba(0,0,0,.2);--ck-color-shadow-inner:rgba(0,0,0,.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#f0f0f0;--ck-color-button-default-active-background:#f0f0f0;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#f0f7ff;--ck-color-button-on-hover-background:#dbecff;--ck-color-button-on-active-background:#dbecff;--ck-color-button-on-disabled-background:#f0f2f4;--ck-color-button-on-color:#2977ff;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#4d9d30;--ck-color-button-action-active-background:#4d9d30;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#939393;--ck-color-switch-button-off-hover-background:#7d7d7d;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#4d9d30;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:var(--ck-color-base-border);--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:var(--ck-color-base-border);--ck-color-input-disabled-text:#757575;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-button-on-color);--ck-color-list-button-on-background-focus:var(--ck-color-button-on-color);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-background);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,176,255,.1);--ck-color-link-fake-selection:rgba(31,176,255,.3);--ck-color-highlight-background:#ff0;--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset,.ck.ck-reset_all{word-wrap:break-word;background:transparent;border:0;margin:0;padding:0;text-decoration:none;transition:none;vertical-align:middle}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset_all{border-collapse:collapse;color:var(--ck-color-text);cursor:auto;float:none;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);text-align:left;white-space:nowrap}.ck-reset_all .ck-rtl :not(.ck-reset_all-excluded *){text-align:right}.ck-reset_all iframe:not(.ck-reset_all-excluded *){vertical-align:inherit}.ck-reset_all textarea:not(.ck-reset_all-excluded *){white-space:pre-wrap}.ck-reset_all input[type=password]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text]:not(.ck-reset_all-excluded *),.ck-reset_all textarea:not(.ck-reset_all-excluded *){cursor:text}.ck-reset_all input[type=password][disabled]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text][disabled]:not(.ck-reset_all-excluded *),.ck-reset_all textarea[disabled]:not(.ck-reset_all-excluded *){cursor:default}.ck-reset_all fieldset:not(.ck-reset_all-excluded *){border:2px groove #dfdee3;padding:10px}.ck-reset_all button:not(.ck-reset_all-excluded *)::-moz-focus-inner{border:0;padding:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}",""]),j.Z=m},12679:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2;--ck-resizer-border-radius:var(--ck-border-radius);--ck-resizer-tooltip-offset:10px;--ck-resizer-tooltip-height:calc(var(--ck-spacing-small)*2 + 10px)}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);color:var(--ck-color-resizer-tooltip-text);display:block;font-size:var(--ck-font-size-tiny);height:var(--ck-resizer-tooltip-height);line-height:var(--ck-resizer-tooltip-height);padding:0 var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-above-center,.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{left:var(--ck-resizer-tooltip-offset);top:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{right:var(--ck-resizer-tooltip-offset);top:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-above-center{left:50%;top:calc(var(--ck-resizer-tooltip-height)*-1);transform:translate(-50%)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-color:transparent;outline-style:solid;outline-width:var(--ck-widget-outline-thickness);transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{background-color:var(--ck-color-widget-editable-focus-background);border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;outline:none}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{background-color:transparent;border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;box-sizing:border-box;left:calc(0px - var(--ck-widget-outline-thickness));opacity:0;padding:4px;top:0;transform:translateY(-100%);transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{color:var(--ck-color-widget-drag-handler-icon-color);height:var(--ck-widget-handler-icon-size);width:var(--ck-widget-handler-icon-size)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{background-color:var(--ck-color-widget-hover-border);opacity:1}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{background-color:var(--ck-color-focus-border);opacity:1}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}",""]),j.Z=m},79733:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,".ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;left:0;pointer-events:none;position:absolute;top:0}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{pointer-events:all;position:absolute}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{cursor:nesw-resize}:root{--ck-resizer-size:10px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-border-width:1px}.ck .ck-widget__resizer{outline:1px solid var(--ck-color-resizer)}.ck .ck-widget__resizer__handle{background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius);height:var(--ck-resizer-size);width:var(--ck-resizer-size)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{left:var(--ck-resizer-offset);top:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{right:var(--ck-resizer-offset);top:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}",""]),j.Z=m},68153:function(J,j,u){"use strict";var v=u(82650),V=u.n(v),C=u(40196),L=u.n(C),m=L()(V());m.push([J.id,'.ck .ck-widget .ck-widget__type-around__button{display:block;overflow:hidden;position:absolute;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{left:50%;position:absolute;top:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{left:min(10%,30px);top:calc(var(--ck-widget-outline-thickness)*-.5);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(var(--ck-widget-outline-thickness)*-.5);right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;left:1px;position:absolute;top:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;left:0;position:absolute;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(var(--ck-widget-outline-thickness)*-1);right:calc(var(--ck-widget-outline-thickness)*-1)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:block;top:calc(var(--ck-widget-outline-thickness)*-1 - 1px)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button);border-radius:100px;height:var(--ck-widget-type-around-button-size);opacity:0;pointer-events:none;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);width:var(--ck-widget-type-around-button-size)}.ck .ck-widget .ck-widget__type-around__button svg{height:8px;margin-top:1px;transform:translate(-50%,-50%);transition:transform .5s ease;width:10px}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3));border-radius:100px;height:calc(var(--ck-widget-type-around-button-size) - 2px);width:calc(var(--ck-widget-type-around-button-size) - 2px)}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;background:var(--ck-color-base-text);height:1px;outline:1px solid hsla(0,0%,100%,.5);pointer-events:none}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}',""]),j.Z=m},40196:function(J){"use strict";J.exports=function(j){var u=[];return u.toString=function(){return this.map(function(V){var C="",L=typeof V[5]!="undefined";return V[4]&&(C+="@supports (".concat(V[4],") {")),V[2]&&(C+="@media ".concat(V[2]," {")),L&&(C+="@layer".concat(V[5].length>0?" ".concat(V[5]):""," {")),C+=j(V),L&&(C+="}"),V[2]&&(C+="}"),V[4]&&(C+="}"),C}).join("")},u.i=function(V,C,L,m,B){typeof V=="string"&&(V=[[null,V,void 0]]);var M={};if(L)for(var D=0;D<this.length;D++){var O=this[D][0];O!=null&&(M[O]=!0)}for(var W=0;W<V.length;W++){var z=[].concat(V[W]);L&&M[z[0]]||(typeof B!="undefined"&&(typeof z[5]=="undefined"||(z[1]="@layer".concat(z[5].length>0?" ".concat(z[5]):""," {").concat(z[1],"}")),z[5]=B),C&&(z[2]&&(z[1]="@media ".concat(z[2]," {").concat(z[1],"}")),z[2]=C),m&&(z[4]?(z[1]="@supports (".concat(z[4],") {").concat(z[1],"}"),z[4]=m):z[4]="".concat(m)),u.push(z))}},u}},82650:function(J){"use strict";J.exports=function(j){return j[1]}},1062:function(J){"use strict";var j=[];function u(C){for(var L=-1,m=0;m<j.length;m++)if(j[m].identifier===C){L=m;break}return L}function v(C,L){for(var m={},B=[],M=0;M<C.length;M++){var D=C[M],O=L.base?D[0]+L.base:D[0],W=m[O]||0,z="".concat(O," ").concat(W);m[O]=W+1;var q=u(z),te={css:D[1],media:D[2],sourceMap:D[3],supports:D[4],layer:D[5]};if(q!==-1)j[q].references++,j[q].updater(te);else{var de=V(te,L);L.byIndex=M,j.splice(M,0,{identifier:z,updater:de,references:1})}B.push(z)}return B}function V(C,L){var m=L.domAPI(L);m.update(C);var B=function(D){if(D){if(D.css===C.css&&D.media===C.media&&D.sourceMap===C.sourceMap&&D.supports===C.supports&&D.layer===C.layer)return;m.update(C=D)}else m.remove()};return B}J.exports=function(C,L){L=L||{},C=C||[];var m=v(C,L);return function(M){M=M||[];for(var D=0;D<m.length;D++){var O=m[D],W=u(O);j[W].references--}for(var z=v(M,L),q=0;q<m.length;q++){var te=m[q],de=u(te);j[de].references===0&&(j[de].updater(),j.splice(de,1))}m=z}}},33566:function(J){"use strict";var j={};function u(V){if(typeof j[V]=="undefined"){var C=document.querySelector(V);if(window.HTMLIFrameElement&&C instanceof window.HTMLIFrameElement)try{C=C.contentDocument.head}catch(L){C=null}j[V]=C}return j[V]}function v(V,C){var L=u(V);if(!L)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");L.appendChild(C)}J.exports=v},24911:function(J){"use strict";function j(u){var v=document.createElement("style");return u.setAttributes(v,u.attributes),u.insert(v,u.options),v}J.exports=j},84107:function(J,j,u){"use strict";function v(V){var C=u.nc;C&&V.setAttribute("nonce",C)}J.exports=v},60552:function(J){"use strict";function j(V,C,L){var m="";L.supports&&(m+="@supports (".concat(L.supports,") {")),L.media&&(m+="@media ".concat(L.media," {"));var B=typeof L.layer!="undefined";B&&(m+="@layer".concat(L.layer.length>0?" ".concat(L.layer):""," {")),m+=L.css,B&&(m+="}"),L.media&&(m+="}"),L.supports&&(m+="}");var M=L.sourceMap;M&&typeof btoa!="undefined"&&(m+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(M))))," */")),C.styleTagTransform(m,V,C.options)}function u(V){if(V.parentNode===null)return!1;V.parentNode.removeChild(V)}function v(V){if(typeof document=="undefined")return{update:function(){},remove:function(){}};var C=V.insertStyleElement(V);return{update:function(m){j(C,V,m)},remove:function(){u(C)}}}J.exports=v},63227:function(J){"use strict";function j(u,v){if(v.styleSheet)v.styleSheet.cssText=u;else{for(;v.firstChild;)v.removeChild(v.firstChild);v.appendChild(document.createTextNode(u))}}J.exports=j},76304:function(J){"use strict";J.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>'},49706:function(J){"use strict";J.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>'},92300:function(J){"use strict";J.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>'},11779:function(J,j,u){"use strict";u.d(j,{Z:function(){return T}});function v(){this.__data__=[],this.size=0}var V=v,C=u(54523);function L(Te,Le){for(var Pe=Te.length;Pe--;)if((0,C.Z)(Te[Pe][0],Le))return Pe;return-1}var m=L,B=Array.prototype,M=B.splice;function D(Te){var Le=this.__data__,Pe=m(Le,Te);if(Pe<0)return!1;var Qe=Le.length-1;return Pe==Qe?Le.pop():M.call(Le,Pe,1),--this.size,!0}var O=D;function W(Te){var Le=this.__data__,Pe=m(Le,Te);return Pe<0?void 0:Le[Pe][1]}var z=W;function q(Te){return m(this.__data__,Te)>-1}var te=q;function de(Te,Le){var Pe=this.__data__,Qe=m(Pe,Te);return Qe<0?(++this.size,Pe.push([Te,Le])):Pe[Qe][1]=Le,this}var he=de;function Ie(Te){var Le=-1,Pe=Te==null?0:Te.length;for(this.clear();++Le<Pe;){var Qe=Te[Le];this.set(Qe[0],Qe[1])}}Ie.prototype.clear=V,Ie.prototype.delete=O,Ie.prototype.get=z,Ie.prototype.has=te,Ie.prototype.set=he;var T=Ie},19385:function(J,j,u){"use strict";var v=u(1311),V=u(99615),C=(0,v.Z)(V.Z,"Map");j.Z=C},91380:function(J,j,u){"use strict";u.d(j,{Z:function(){return Ht}});var v=u(1311),V=(0,v.Z)(Object,"create"),C=V;function L(){this.__data__=C?C(null):{},this.size=0}var m=L;function B(Me){var pe=this.has(Me)&&delete this.__data__[Me];return this.size-=pe?1:0,pe}var M=B,D="__lodash_hash_undefined__",O=Object.prototype,W=O.hasOwnProperty;function z(Me){var pe=this.__data__;if(C){var G=pe[Me];return G===D?void 0:G}return W.call(pe,Me)?pe[Me]:void 0}var q=z,te=Object.prototype,de=te.hasOwnProperty;function he(Me){var pe=this.__data__;return C?pe[Me]!==void 0:de.call(pe,Me)}var Ie=he,T="__lodash_hash_undefined__";function Te(Me,pe){var G=this.__data__;return this.size+=this.has(Me)?0:1,G[Me]=C&&pe===void 0?T:pe,this}var Le=Te;function Pe(Me){var pe=-1,G=Me==null?0:Me.length;for(this.clear();++pe<G;){var ce=Me[pe];this.set(ce[0],ce[1])}}Pe.prototype.clear=m,Pe.prototype.delete=M,Pe.prototype.get=q,Pe.prototype.has=Ie,Pe.prototype.set=Le;var Qe=Pe,ct=u(11779),Fe=u(19385);function Ee(){this.size=0,this.__data__={hash:new Qe,map:new(Fe.Z||ct.Z),string:new Qe}}var Ke=Ee;function mt(Me){var pe=typeof Me;return pe=="string"||pe=="number"||pe=="symbol"||pe=="boolean"?Me!=="__proto__":Me===null}var St=mt;function We(Me,pe){var G=Me.__data__;return St(pe)?G[typeof pe=="string"?"string":"hash"]:G.map}var Re=We;function Ne(Me){var pe=Re(this,Me).delete(Me);return this.size-=pe?1:0,pe}var Oe=Ne;function Be(Me){return Re(this,Me).get(Me)}var it=Be;function ze(Me){return Re(this,Me).has(Me)}var dt=ze;function je(Me,pe){var G=Re(this,Me),ce=G.size;return G.set(Me,pe),this.size+=G.size==ce?0:1,this}var pt=je;function kt(Me){var pe=-1,G=Me==null?0:Me.length;for(this.clear();++pe<G;){var ce=Me[pe];this.set(ce[0],ce[1])}}kt.prototype.clear=Ke,kt.prototype.delete=Oe,kt.prototype.get=it,kt.prototype.has=dt,kt.prototype.set=pt;var Ht=kt},24507:function(J,j,u){"use strict";u.d(j,{Z:function(){return Ie}});var v=u(11779);function V(){this.__data__=new v.Z,this.size=0}var C=V;function L(T){var Te=this.__data__,Le=Te.delete(T);return this.size=Te.size,Le}var m=L;function B(T){return this.__data__.get(T)}var M=B;function D(T){return this.__data__.has(T)}var O=D,W=u(19385),z=u(91380),q=200;function te(T,Te){var Le=this.__data__;if(Le instanceof v.Z){var Pe=Le.__data__;if(!W.Z||Pe.length<q-1)return Pe.push([T,Te]),this.size=++Le.size,this;Le=this.__data__=new z.Z(Pe)}return Le.set(T,Te),this.size=Le.size,this}var de=te;function he(T){var Te=this.__data__=new v.Z(T);this.size=Te.size}he.prototype.clear=C,he.prototype.delete=m,he.prototype.get=M,he.prototype.has=O,he.prototype.set=de;var Ie=he},66711:function(J,j,u){"use strict";var v=u(99615),V=v.Z.Symbol;j.Z=V},16299:function(J,j,u){"use strict";var v=u(99615),V=v.Z.Uint8Array;j.Z=V},36858:function(J,j,u){"use strict";u.d(j,{Z:function(){return z}});function v(q,te){for(var de=-1,he=Array(q);++de<q;)he[de]=te(de);return he}var V=v,C=u(65380),L=u(56052),m=u(45673),B=u(99313),M=u(79064),D=Object.prototype,O=D.hasOwnProperty;function W(q,te){var de=(0,L.Z)(q),he=!de&&(0,C.Z)(q),Ie=!de&&!he&&(0,m.Z)(q),T=!de&&!he&&!Ie&&(0,M.Z)(q),Te=de||he||Ie||T,Le=Te?V(q.length,String):[],Pe=Le.length;for(var Qe in q)(te||O.call(q,Qe))&&!(Te&&(Qe=="length"||Ie&&(Qe=="offset"||Qe=="parent")||T&&(Qe=="buffer"||Qe=="byteLength"||Qe=="byteOffset")||(0,B.Z)(Qe,Pe)))&&Le.push(Qe);return Le}var z=W},18573:function(J,j){"use strict";function u(v,V){for(var C=-1,L=V.length,m=v.length;++C<L;)v[m+C]=V[C];return v}j.Z=u},61572:function(J,j,u){"use strict";var v=u(857),V=u(54523),C=Object.prototype,L=C.hasOwnProperty;function m(B,M,D){var O=B[M];(!(L.call(B,M)&&(0,V.Z)(O,D))||D===void 0&&!(M in B))&&(0,v.Z)(B,M,D)}j.Z=m},857:function(J,j,u){"use strict";var v=u(55136);function V(C,L,m){L=="__proto__"&&v.Z?(0,v.Z)(C,L,{configurable:!0,enumerable:!0,value:m,writable:!0}):C[L]=m}j.Z=V},12653:function(J,j,u){"use strict";u.d(j,{Z:function(){return rr}});var v=u(24507);function V(le,st){for(var xt=-1,bn=le==null?0:le.length;++xt<bn&&st(le[xt],xt,le)!==!1;);return le}var C=V,L=u(61572),m=u(52949),B=u(31085);function M(le,st){return le&&(0,m.Z)(st,(0,B.Z)(st),le)}var D=M,O=u(32817);function W(le,st){return le&&(0,m.Z)(st,(0,O.Z)(st),le)}var z=W,q=u(14054),te=u(32126),de=u(98409);function he(le,st){return(0,m.Z)(le,(0,de.Z)(le),st)}var Ie=he,T=u(18573),Te=u(10964),Le=u(69043),Pe=Object.getOwnPropertySymbols,Qe=Pe?function(le){for(var st=[];le;)(0,T.Z)(st,(0,de.Z)(le)),le=(0,Te.Z)(le);return st}:Le.Z,ct=Qe;function Fe(le,st){return(0,m.Z)(le,ct(le),st)}var Ee=Fe,Ke=u(38366),mt=u(96909);function St(le){return(0,mt.Z)(le,O.Z,ct)}var We=St,Re=u(25922),Ne=Object.prototype,Oe=Ne.hasOwnProperty;function Be(le){var st=le.length,xt=new le.constructor(st);return st&&typeof le[0]=="string"&&Oe.call(le,"index")&&(xt.index=le.index,xt.input=le.input),xt}var it=Be,ze=u(97990);function dt(le,st){var xt=st?(0,ze.Z)(le.buffer):le.buffer;return new le.constructor(xt,le.byteOffset,le.byteLength)}var je=dt,pt=/\w*$/;function kt(le){var st=new le.constructor(le.source,pt.exec(le));return st.lastIndex=le.lastIndex,st}var Ht=kt,Me=u(66711),pe=Me.Z?Me.Z.prototype:void 0,G=pe?pe.valueOf:void 0;function ce(le){return G?Object(G.call(le)):{}}var fe=ce,ke=u(11523),_e="[object Boolean]",xe="[object Date]",He="[object Map]",ut="[object Number]",Ye="[object RegExp]",Yt="[object Set]",cn="[object String]",Vt="[object Symbol]",qt="[object ArrayBuffer]",Sr="[object DataView]",Xe="[object Float32Array]",oe="[object Float64Array]",be="[object Int8Array]",De="[object Int16Array]",nt="[object Int32Array]",vt="[object Uint8Array]",yn="[object Uint8ClampedArray]",en="[object Uint16Array]",ln="[object Uint32Array]";function dn(le,st,xt){var bn=le.constructor;switch(st){case qt:return(0,ze.Z)(le);case _e:case xe:return new bn(+le);case Sr:return je(le,xt);case Xe:case oe:case be:case De:case nt:case vt:case yn:case en:case ln:return(0,ke.Z)(le,xt);case He:return new bn;case ut:case cn:return new bn(le);case Ye:return Ht(le);case Yt:return new bn;case Vt:return fe(le)}}var Or=dn,gn=u(16448),_n=u(56052),yt=u(45673),pn=u(13795),hr="[object Map]";function Rr(le){return(0,pn.Z)(le)&&(0,Re.Z)(le)==hr}var tn=Rr,On=u(5467),Kt=u(92350),nr=Kt.Z&&Kt.Z.isMap,oo=nr?(0,On.Z)(nr):tn,et=oo,ht=u(82433),Ue="[object Set]";function gt(le){return(0,pn.Z)(le)&&(0,Re.Z)(le)==Ue}var Rt=gt,$t=Kt.Z&&Kt.Z.isSet,mn=$t?(0,On.Z)($t):Rt,Rn=mn,Nn=1,fr=2,Mr=4,Et="[object Arguments]",En="[object Array]",Dr="[object Boolean]",Tn="[object Date]",gr="[object Error]",Mn="[object Function]",Nt="[object GeneratorFunction]",Ct="[object Map]",Ln="[object Number]",_r="[object Object]",Fn="[object RegExp]",zn="[object Set]",Wn="[object String]",Ir="[object Symbol]",Br="[object WeakMap]",Pn="[object ArrayBuffer]",Tt="[object DataView]",io="[object Float32Array]",jn="[object Float64Array]",Kr="[object Int8Array]",pr="[object Int16Array]",so="[object Int32Array]",Zn="[object Uint8Array]",Vr="[object Uint8ClampedArray]",$r="[object Uint16Array]",Un="[object Uint32Array]",bt={};bt[Et]=bt[En]=bt[Pn]=bt[Tt]=bt[Dr]=bt[Tn]=bt[io]=bt[jn]=bt[Kr]=bt[pr]=bt[so]=bt[Ct]=bt[Ln]=bt[_r]=bt[Fn]=bt[zn]=bt[Wn]=bt[Ir]=bt[Zn]=bt[Vr]=bt[$r]=bt[Un]=!0,bt[gr]=bt[Mn]=bt[Br]=!1;function Gt(le,st,xt,bn,Cn,un){var Mt,Hn=st&Nn,Kn=st&fr,$n=st&Mr;if(xt&&(Mt=Cn?xt(le,bn,Cn,un):xt(le)),Mt!==void 0)return Mt;if(!(0,ht.Z)(le))return le;var wn=(0,_n.Z)(le);if(wn){if(Mt=it(le),!Hn)return(0,te.Z)(le,Mt)}else{var Dn=(0,Re.Z)(le),or=Dn==Mn||Dn==Nt;if((0,yt.Z)(le))return(0,q.Z)(le,Hn);if(Dn==_r||Dn==Et||or&&!Cn){if(Mt=Kn||or?{}:(0,gn.Z)(le),!Hn)return Kn?Ee(le,z(Mt,le)):Ie(le,D(Mt,le))}else{if(!bt[Dn])return Cn?le:{};Mt=Or(le,Dn,Hn)}}un||(un=new v.Z);var mr=un.get(le);if(mr)return mr;un.set(le,Mt),Rn(le)?le.forEach(function(nn){Mt.add(Gt(nn,st,xt,nn,le,un))}):et(le)&&le.forEach(function(nn,Jt){Mt.set(Jt,Gt(nn,st,xt,Jt,le,un))});var ao=$n?Kn?We:Ke.Z:Kn?O.Z:B.Z,co=wn?void 0:ao(le);return C(co||le,function(nn,Jt){co&&(Jt=nn,nn=le[Jt]),(0,L.Z)(Mt,Jt,Gt(nn,st,xt,Jt,le,un))}),Mt}var rr=Gt},96909:function(J,j,u){"use strict";var v=u(18573),V=u(56052);function C(L,m,B){var M=m(L);return(0,V.Z)(L)?M:(0,v.Z)(M,B(L))}j.Z=C},33918:function(J,j,u){"use strict";u.d(j,{Z:function(){return Ie}});var v=u(66711),V=Object.prototype,C=V.hasOwnProperty,L=V.toString,m=v.Z?v.Z.toStringTag:void 0;function B(T){var Te=C.call(T,m),Le=T[m];try{T[m]=void 0;var Pe=!0}catch(ct){}var Qe=L.call(T);return Pe&&(Te?T[m]=Le:delete T[m]),Qe}var M=B,D=Object.prototype,O=D.toString;function W(T){return O.call(T)}var z=W,q="[object Null]",te="[object Undefined]",de=v.Z?v.Z.toStringTag:void 0;function he(T){return T==null?T===void 0?te:q:de&&de in Object(T)?M(T):z(T)}var Ie=he},5467:function(J,j){"use strict";function u(v){return function(V){return v(V)}}j.Z=u},97990:function(J,j,u){"use strict";var v=u(16299);function V(C){var L=new C.constructor(C.byteLength);return new v.Z(L).set(new v.Z(C)),L}j.Z=V},14054:function(J,j,u){"use strict";var v=u(99615),V=typeof exports=="object"&&exports&&!exports.nodeType&&exports,C=V&&typeof module=="object"&&module&&!module.nodeType&&module,L=C&&C.exports===V,m=L?v.Z.Buffer:void 0,B=m?m.allocUnsafe:void 0;function M(D,O){if(O)return D.slice();var W=D.length,z=B?B(W):new D.constructor(W);return D.copy(z),z}j.Z=M},11523:function(J,j,u){"use strict";var v=u(97990);function V(C,L){var m=L?(0,v.Z)(C.buffer):C.buffer;return new C.constructor(m,C.byteOffset,C.length)}j.Z=V},32126:function(J,j){"use strict";function u(v,V){var C=-1,L=v.length;for(V||(V=Array(L));++C<L;)V[C]=v[C];return V}j.Z=u},52949:function(J,j,u){"use strict";var v=u(61572),V=u(857);function C(L,m,B,M){var D=!B;B||(B={});for(var O=-1,W=m.length;++O<W;){var z=m[O],q=M?M(B[z],L[z],z,B,L):void 0;q===void 0&&(q=L[z]),D?(0,V.Z)(B,z,q):(0,v.Z)(B,z,q)}return B}j.Z=C},67194:function(J,j,u){"use strict";u.d(j,{Z:function(){return Re}});function v(Ne){return Ne}var V=v;function C(Ne,Oe,Be){switch(Be.length){case 0:return Ne.call(Oe);case 1:return Ne.call(Oe,Be[0]);case 2:return Ne.call(Oe,Be[0],Be[1]);case 3:return Ne.call(Oe,Be[0],Be[1],Be[2])}return Ne.apply(Oe,Be)}var L=C,m=Math.max;function B(Ne,Oe,Be){return Oe=m(Oe===void 0?Ne.length-1:Oe,0),function(){for(var it=arguments,ze=-1,dt=m(it.length-Oe,0),je=Array(dt);++ze<dt;)je[ze]=it[Oe+ze];ze=-1;for(var pt=Array(Oe+1);++ze<Oe;)pt[ze]=it[ze];return pt[Oe]=Be(je),L(Ne,this,pt)}}var M=B;function D(Ne){return function(){return Ne}}var O=D,W=u(55136),z=W.Z?function(Ne,Oe){return(0,W.Z)(Ne,"toString",{configurable:!0,enumerable:!1,value:O(Oe),writable:!0})}:V,q=z,te=800,de=16,he=Date.now;function Ie(Ne){var Oe=0,Be=0;return function(){var it=he(),ze=de-(it-Be);if(Be=it,ze>0){if(++Oe>=te)return arguments[0]}else Oe=0;return Ne.apply(void 0,arguments)}}var T=Ie,Te=T(q),Le=Te;function Pe(Ne,Oe){return Le(M(Ne,Oe,V),Ne+"")}var Qe=Pe,ct=u(54523),Fe=u(49634),Ee=u(99313),Ke=u(82433);function mt(Ne,Oe,Be){if(!(0,Ke.Z)(Be))return!1;var it=typeof Oe;return(it=="number"?(0,Fe.Z)(Be)&&(0,Ee.Z)(Oe,Be.length):it=="string"&&Oe in Be)?(0,ct.Z)(Be[Oe],Ne):!1}var St=mt;function We(Ne){return Qe(function(Oe,Be){var it=-1,ze=Be.length,dt=ze>1?Be[ze-1]:void 0,je=ze>2?Be[2]:void 0;for(dt=Ne.length>3&&typeof dt=="function"?(ze--,dt):void 0,je&&St(Be[0],Be[1],je)&&(dt=ze<3?void 0:dt,ze=1),Oe=Object(Oe);++it<ze;){var pt=Be[it];pt&&Ne(Oe,pt,it,dt)}return Oe})}var Re=We},55136:function(J,j,u){"use strict";var v=u(1311),V=function(){try{var C=(0,v.Z)(Object,"defineProperty");return C({},"",{}),C}catch(L){}}();j.Z=V},97889:function(J,j){"use strict";var u=typeof global=="object"&&global&&global.Object===Object&&global;j.Z=u},38366:function(J,j,u){"use strict";var v=u(96909),V=u(98409),C=u(31085);function L(m){return(0,v.Z)(m,C.Z,V.Z)}j.Z=L},1311:function(J,j,u){"use strict";u.d(j,{Z:function(){return ct}});var v=u(88987),V=u(99615),C=V.Z["__core-js_shared__"],L=C,m=function(){var Fe=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||"");return Fe?"Symbol(src)_1."+Fe:""}();function B(Fe){return!!m&&m in Fe}var M=B,D=u(82433),O=u(65114),W=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,q=Function.prototype,te=Object.prototype,de=q.toString,he=te.hasOwnProperty,Ie=RegExp("^"+de.call(he).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function T(Fe){if(!(0,D.Z)(Fe)||M(Fe))return!1;var Ee=(0,v.Z)(Fe)?Ie:z;return Ee.test((0,O.Z)(Fe))}var Te=T;function Le(Fe,Ee){return Fe==null?void 0:Fe[Ee]}var Pe=Le;function Qe(Fe,Ee){var Ke=Pe(Fe,Ee);return Te(Ke)?Ke:void 0}var ct=Qe},10964:function(J,j,u){"use strict";var v=u(45635),V=(0,v.Z)(Object.getPrototypeOf,Object);j.Z=V},98409:function(J,j,u){"use strict";u.d(j,{Z:function(){return D}});function v(O,W){for(var z=-1,q=O==null?0:O.length,te=0,de=[];++z<q;){var he=O[z];W(he,z,O)&&(de[te++]=he)}return de}var V=v,C=u(69043),L=Object.prototype,m=L.propertyIsEnumerable,B=Object.getOwnPropertySymbols,M=B?function(O){return O==null?[]:(O=Object(O),V(B(O),function(W){return m.call(O,W)}))}:C.Z,D=M},25922:function(J,j,u){"use strict";u.d(j,{Z:function(){return mt}});var v=u(1311),V=u(99615),C=(0,v.Z)(V.Z,"DataView"),L=C,m=u(19385),B=(0,v.Z)(V.Z,"Promise"),M=B,D=(0,v.Z)(V.Z,"Set"),O=D,W=(0,v.Z)(V.Z,"WeakMap"),z=W,q=u(33918),te=u(65114),de="[object Map]",he="[object Object]",Ie="[object Promise]",T="[object Set]",Te="[object WeakMap]",Le="[object DataView]",Pe=(0,te.Z)(L),Qe=(0,te.Z)(m.Z),ct=(0,te.Z)(M),Fe=(0,te.Z)(O),Ee=(0,te.Z)(z),Ke=q.Z;(L&&Ke(new L(new ArrayBuffer(1)))!=Le||m.Z&&Ke(new m.Z)!=de||M&&Ke(M.resolve())!=Ie||O&&Ke(new O)!=T||z&&Ke(new z)!=Te)&&(Ke=function(St){var We=(0,q.Z)(St),Re=We==he?St.constructor:void 0,Ne=Re?(0,te.Z)(Re):"";if(Ne)switch(Ne){case Pe:return Le;case Qe:return de;case ct:return Ie;case Fe:return T;case Ee:return Te}return We});var mt=Ke},16448:function(J,j,u){"use strict";u.d(j,{Z:function(){return D}});var v=u(82433),V=Object.create,C=function(){function O(){}return function(W){if(!(0,v.Z)(W))return{};if(V)return V(W);O.prototype=W;var z=new O;return O.prototype=void 0,z}}(),L=C,m=u(10964),B=u(5196);function M(O){return typeof O.constructor=="function"&&!(0,B.Z)(O)?L((0,m.Z)(O)):{}}var D=M},99313:function(J,j){"use strict";var u=9007199254740991,v=/^(?:0|[1-9]\d*)$/;function V(C,L){var m=typeof C;return L=L==null?u:L,!!L&&(m=="number"||m!="symbol"&&v.test(C))&&C>-1&&C%1==0&&C<L}j.Z=V},5196:function(J,j){"use strict";var u=Object.prototype;function v(V){var C=V&&V.constructor,L=typeof C=="function"&&C.prototype||u;return V===L}j.Z=v},92350:function(J,j,u){"use strict";var v=u(97889),V=typeof exports=="object"&&exports&&!exports.nodeType&&exports,C=V&&typeof module=="object"&&module&&!module.nodeType&&module,L=C&&C.exports===V,m=L&&v.Z.process,B=function(){try{var M=C&&C.require&&C.require("util").types;return M||m&&m.binding&&m.binding("util")}catch(D){}}();j.Z=B},45635:function(J,j){"use strict";function u(v,V){return function(C){return v(V(C))}}j.Z=u},99615:function(J,j,u){"use strict";var v=u(97889),V=typeof self=="object"&&self&&self.Object===Object&&self,C=v.Z||V||Function("return this")();j.Z=C},65114:function(J,j){"use strict";var u=Function.prototype,v=u.toString;function V(C){if(C!=null){try{return v.call(C)}catch(L){}try{return C+""}catch(L){}}return""}j.Z=V},43670:function(J,j,u){"use strict";var v=u(52949),V=u(67194),C=u(32817),L=(0,V.Z)(function(m,B){(0,v.Z)(B,(0,C.Z)(B),m)});j.Z=L},94195:function(J,j,u){"use strict";var v=u(12653),V=1,C=4;function L(m,B){return B=typeof B=="function"?B:void 0,(0,v.Z)(m,V|C,B)}j.Z=L},67811:function(J,j,u){"use strict";u.d(j,{Z:function(){return Fe}});var v=u(82433),V=u(99615),C=function(){return V.Z.Date.now()},L=C,m=/\s/;function B(Ee){for(var Ke=Ee.length;Ke--&&m.test(Ee.charAt(Ke)););return Ke}var M=B,D=/^\s+/;function O(Ee){return Ee&&Ee.slice(0,M(Ee)+1).replace(D,"")}var W=O,z=u(98111),q=0/0,te=/^[-+]0x[0-9a-f]+$/i,de=/^0b[01]+$/i,he=/^0o[0-7]+$/i,Ie=parseInt;function T(Ee){if(typeof Ee=="number")return Ee;if((0,z.Z)(Ee))return q;if((0,v.Z)(Ee)){var Ke=typeof Ee.valueOf=="function"?Ee.valueOf():Ee;Ee=(0,v.Z)(Ke)?Ke+"":Ke}if(typeof Ee!="string")return Ee===0?Ee:+Ee;Ee=W(Ee);var mt=de.test(Ee);return mt||he.test(Ee)?Ie(Ee.slice(2),mt?2:8):te.test(Ee)?q:+Ee}var Te=T,Le="Expected a function",Pe=Math.max,Qe=Math.min;function ct(Ee,Ke,mt){var St,We,Re,Ne,Oe,Be,it=0,ze=!1,dt=!1,je=!0;if(typeof Ee!="function")throw new TypeError(Le);Ke=Te(Ke)||0,(0,v.Z)(mt)&&(ze=!!mt.leading,dt="maxWait"in mt,Re=dt?Pe(Te(mt.maxWait)||0,Ke):Re,je="trailing"in mt?!!mt.trailing:je);function pt(_e){var xe=St,He=We;return St=We=void 0,it=_e,Ne=Ee.apply(He,xe),Ne}function kt(_e){return it=_e,Oe=setTimeout(pe,Ke),ze?pt(_e):Ne}function Ht(_e){var xe=_e-Be,He=_e-it,ut=Ke-xe;return dt?Qe(ut,Re-He):ut}function Me(_e){var xe=_e-Be,He=_e-it;return Be===void 0||xe>=Ke||xe<0||dt&&He>=Re}function pe(){var _e=L();if(Me(_e))return G(_e);Oe=setTimeout(pe,Ht(_e))}function G(_e){return Oe=void 0,je&&St?pt(_e):(St=We=void 0,Ne)}function ce(){Oe!==void 0&&clearTimeout(Oe),it=0,St=Be=We=Oe=void 0}function fe(){return Oe===void 0?Ne:G(L())}function ke(){var _e=L(),xe=Me(_e);if(St=arguments,We=this,Be=_e,xe){if(Oe===void 0)return kt(Be);if(dt)return clearTimeout(Oe),Oe=setTimeout(pe,Ke),pt(Be)}return Oe===void 0&&(Oe=setTimeout(pe,Ke)),Ne}return ke.cancel=ce,ke.flush=fe,ke}var Fe=ct},54523:function(J,j){"use strict";function u(v,V){return v===V||v!==v&&V!==V}j.Z=u},65380:function(J,j,u){"use strict";u.d(j,{Z:function(){return W}});var v=u(33918),V=u(13795),C="[object Arguments]";function L(z){return(0,V.Z)(z)&&(0,v.Z)(z)==C}var m=L,B=Object.prototype,M=B.hasOwnProperty,D=B.propertyIsEnumerable,O=m(function(){return arguments}())?m:function(z){return(0,V.Z)(z)&&M.call(z,"callee")&&!D.call(z,"callee")},W=O},56052:function(J,j){"use strict";var u=Array.isArray;j.Z=u},49634:function(J,j,u){"use strict";var v=u(88987),V=u(65743);function C(L){return L!=null&&(0,V.Z)(L.length)&&!(0,v.Z)(L)}j.Z=C},45673:function(J,j,u){"use strict";u.d(j,{Z:function(){return W}});var v=u(99615);function V(){return!1}var C=V,L=typeof exports=="object"&&exports&&!exports.nodeType&&exports,m=L&&typeof module=="object"&&module&&!module.nodeType&&module,B=m&&m.exports===L,M=B?v.Z.Buffer:void 0,D=M?M.isBuffer:void 0,O=D||C,W=O},23132:function(J,j,u){"use strict";var v=u(13795),V=u(54098);function C(L){return(0,v.Z)(L)&&L.nodeType===1&&!(0,V.Z)(L)}j.Z=C},88987:function(J,j,u){"use strict";var v=u(33918),V=u(82433),C="[object AsyncFunction]",L="[object Function]",m="[object GeneratorFunction]",B="[object Proxy]";function M(D){if(!(0,V.Z)(D))return!1;var O=(0,v.Z)(D);return O==L||O==m||O==C||O==B}j.Z=M},65743:function(J,j){"use strict";var u=9007199254740991;function v(V){return typeof V=="number"&&V>-1&&V%1==0&&V<=u}j.Z=v},82433:function(J,j){"use strict";function u(v){var V=typeof v;return v!=null&&(V=="object"||V=="function")}j.Z=u},13795:function(J,j){"use strict";function u(v){return v!=null&&typeof v=="object"}j.Z=u},54098:function(J,j,u){"use strict";var v=u(33918),V=u(10964),C=u(13795),L="[object Object]",m=Function.prototype,B=Object.prototype,M=m.toString,D=B.hasOwnProperty,O=M.call(Object);function W(z){if(!(0,C.Z)(z)||(0,v.Z)(z)!=L)return!1;var q=(0,V.Z)(z);if(q===null)return!0;var te=D.call(q,"constructor")&&q.constructor;return typeof te=="function"&&te instanceof te&&M.call(te)==O}j.Z=W},98111:function(J,j,u){"use strict";var v=u(33918),V=u(13795),C="[object Symbol]";function L(m){return typeof m=="symbol"||(0,V.Z)(m)&&(0,v.Z)(m)==C}j.Z=L},79064:function(J,j,u){"use strict";u.d(j,{Z:function(){return dt}});var v=u(33918),V=u(65743),C=u(13795),L="[object Arguments]",m="[object Array]",B="[object Boolean]",M="[object Date]",D="[object Error]",O="[object Function]",W="[object Map]",z="[object Number]",q="[object Object]",te="[object RegExp]",de="[object Set]",he="[object String]",Ie="[object WeakMap]",T="[object ArrayBuffer]",Te="[object DataView]",Le="[object Float32Array]",Pe="[object Float64Array]",Qe="[object Int8Array]",ct="[object Int16Array]",Fe="[object Int32Array]",Ee="[object Uint8Array]",Ke="[object Uint8ClampedArray]",mt="[object Uint16Array]",St="[object Uint32Array]",We={};We[Le]=We[Pe]=We[Qe]=We[ct]=We[Fe]=We[Ee]=We[Ke]=We[mt]=We[St]=!0,We[L]=We[m]=We[T]=We[B]=We[Te]=We[M]=We[D]=We[O]=We[W]=We[z]=We[q]=We[te]=We[de]=We[he]=We[Ie]=!1;function Re(je){return(0,C.Z)(je)&&(0,V.Z)(je.length)&&!!We[(0,v.Z)(je)]}var Ne=Re,Oe=u(5467),Be=u(92350),it=Be.Z&&Be.Z.isTypedArray,ze=it?(0,Oe.Z)(it):Ne,dt=ze},31085:function(J,j,u){"use strict";u.d(j,{Z:function(){return q}});var v=u(36858),V=u(5196),C=u(45635),L=(0,C.Z)(Object.keys,Object),m=L,B=Object.prototype,M=B.hasOwnProperty;function D(te){if(!(0,V.Z)(te))return m(te);var de=[];for(var he in Object(te))M.call(te,he)&&he!="constructor"&&de.push(he);return de}var O=D,W=u(49634);function z(te){return(0,W.Z)(te)?(0,v.Z)(te):O(te)}var q=z},32817:function(J,j,u){"use strict";u.d(j,{Z:function(){return q}});var v=u(36858),V=u(82433),C=u(5196);function L(te){var de=[];if(te!=null)for(var he in Object(te))de.push(he);return de}var m=L,B=Object.prototype,M=B.hasOwnProperty;function D(te){if(!(0,V.Z)(te))return m(te);var de=(0,C.Z)(te),he=[];for(var Ie in te)Ie=="constructor"&&(de||!M.call(te,Ie))||he.push(Ie);return he}var O=D,W=u(49634);function z(te){return(0,W.Z)(te)?(0,v.Z)(te,!0):O(te)}var q=z},69043:function(J,j){"use strict";function u(){return[]}j.Z=u},20057:function(J,j,u){"use strict";var v=u(67811),V=u(82433),C="Expected a function";function L(m,B,M){var D=!0,O=!0;if(typeof m!="function")throw new TypeError(C);return(0,V.Z)(M)&&(D="leading"in M?!!M.leading:D,O="trailing"in M?!!M.trailing:O),(0,v.Z)(m,B,{leading:D,maxWait:B,trailing:O})}j.Z=L}}]);
}());